var eo=Object.defineProperty;var to=(d,e,t)=>e in d?eo(d,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):d[e]=t;var m=(d,e,t)=>to(d,typeof e!="symbol"?e+"":e,t);import{w as Ct,k as io,l as Cn,j as Xe,c as $,s as ao,u as x,m as no,n as so,d as Ms,p as kn,q as st,r as ye,b as z,t as Z,x as L,y as Ts,z as S,A as Bt,B as Se,C as Te,e as Ee,o as rt,f as Q,T as ro,D as U,E as _t,F as Qt,G as An,H as It,I as gi,J as Sn,a as oa,K as oo,L as lo,M as co,N as En,O as Dn,P as Xn,Q as ho,R as uo,S as mo,U as fo,V as go,W as po,X as vo,Y as _o}from"./apollo.DbE8OQgH.js";import{c as bo,u as Mn}from"./stable.D2huTIpT.js";import{u as Is,a as Ls,b as yo,c as wo,T as xo,d as Co}from"./ton.Lna-8UYj.js";import{V as Rs,$ as Bs,g as Pa,H as ko,N as Ao,_ as So,L as Eo}from"./telegram.D2RFDn1l.js";import{h as Fs}from"./moment.C5S46NFB.js";import{h as Mo}from"./howler.Com7-U_w.js";import{d as To}from"./lodash-debounce.CDAA_tUE.js";import{l as Io}from"./socket-io.CGwCSIWv.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))i(a);new MutationObserver(a=>{for(const n of a)if(n.type==="childList")for(const o of n.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function t(a){const n={};return a.integrity&&(n.integrity=a.integrity),a.referrerPolicy&&(n.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?n.credentials="include":a.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function i(a){if(a.ep)return;a.ep=!0;const n=t(a);fetch(a.href,n)}})();function Lo(){return Ps().__VUE_DEVTOOLS_GLOBAL_HOOK__}function Ps(){return typeof navigator<"u"&&typeof window<"u"?window:typeof globalThis<"u"?globalThis:{}}const Ro=typeof Proxy=="function",Bo="devtools-plugin:setup",Fo="plugin:settings:set";let wi,on;function Po(){var d;return wi!==void 0||(typeof window<"u"&&window.performance?(wi=!0,on=window.performance):typeof globalThis<"u"&&(!((d=globalThis.perf_hooks)===null||d===void 0)&&d.performance)?(wi=!0,on=globalThis.perf_hooks.performance):wi=!1),wi}function Oo(){return Po()?on.now():Date.now()}class Yo{constructor(e,t){this.target=null,this.targetQueue=[],this.onQueue=[],this.plugin=e,this.hook=t;const i={};if(e.settings)for(const o in e.settings){const s=e.settings[o];i[o]=s.defaultValue}const a=`__vue-devtools-plugin-settings__${e.id}`;let n=Object.assign({},i);try{const o=localStorage.getItem(a),s=JSON.parse(o);Object.assign(n,s)}catch{}this.fallbacks={getSettings(){return n},setSettings(o){try{localStorage.setItem(a,JSON.stringify(o))}catch{}n=o},now(){return Oo()}},t&&t.on(Fo,(o,s)=>{o===this.plugin.id&&this.fallbacks.setSettings(s)}),this.proxiedOn=new Proxy({},{get:(o,s)=>this.target?this.target.on[s]:(...h)=>{this.onQueue.push({method:s,args:h})}}),this.proxiedTarget=new Proxy({},{get:(o,s)=>this.target?this.target[s]:s==="on"?this.proxiedOn:Object.keys(this.fallbacks).includes(s)?(...h)=>(this.targetQueue.push({method:s,args:h,resolve:()=>{}}),this.fallbacks[s](...h)):(...h)=>new Promise(r=>{this.targetQueue.push({method:s,args:h,resolve:r})})})}async setRealTarget(e){this.target=e;for(const t of this.onQueue)this.target.on[t.method](...t.args);for(const t of this.targetQueue)t.resolve(await this.target[t.method](...t.args))}}function No(d,e){const t=d,i=Ps(),a=Lo(),n=Ro&&t.enableEarlyProxy;if(a&&(i.__VUE_DEVTOOLS_PLUGIN_API_AVAILABLE__||!n))a.emit(Bo,d,e);else{const o=n?new Yo(t,a):null;(i.__VUE_DEVTOOLS_PLUGINS__=i.__VUE_DEVTOOLS_PLUGINS__||[]).push({pluginDescriptor:t,setupFn:e,proxy:o}),o&&e(o.proxiedTarget)}}/*!
 * vuex v4.1.0
 * (c) 2022 Evan You
 * @license MIT
 */var Os="store";function it(d){return d===void 0&&(d=null),Xe(d!==null?d:Os)}function Gi(d,e){Object.keys(d).forEach(function(t){return e(d[t],t)})}function Vo(d){return d!==null&&typeof d=="object"}function Do(d){return d&&typeof d.then=="function"}function Xo(d,e){return function(){return d(e)}}function Ys(d,e,t){return e.indexOf(d)<0&&(t&&t.prepend?e.unshift(d):e.push(d)),function(){var i=e.indexOf(d);i>-1&&e.splice(i,1)}}function Ns(d,e){d._actions=Object.create(null),d._mutations=Object.create(null),d._wrappedGetters=Object.create(null),d._modulesNamespaceMap=Object.create(null);var t=d.state;Oa(d,t,[],d._modules.root,!0),Tn(d,t,e)}function Tn(d,e,t){var i=d._state,a=d._scope;d.getters={},d._makeLocalGettersCache=Object.create(null);var n=d._wrappedGetters,o={},s={},h=io(!0);h.run(function(){Gi(n,function(r,l){o[l]=Xo(r,d),s[l]=$(function(){return o[l]()}),Object.defineProperty(d.getters,l,{get:function(){return s[l].value},enumerable:!0})})}),d._state=Cn({data:e}),d._scope=h,d.strict&&jo(d),i&&t&&d._withCommit(function(){i.data=null}),a&&a.stop()}function Oa(d,e,t,i,a){var n=!t.length,o=d._modules.getNamespace(t);if(i.namespaced&&(d._modulesNamespaceMap[o],d._modulesNamespaceMap[o]=i),!n&&!a){var s=In(e,t.slice(0,-1)),h=t[t.length-1];d._withCommit(function(){s[h]=i.state})}var r=i.context=zo(d,o,t);i.forEachMutation(function(l,c){var f=o+c;Uo(d,f,l,r)}),i.forEachAction(function(l,c){var f=l.root?c:o+c,u=l.handler||l;qo(d,f,u,r)}),i.forEachGetter(function(l,c){var f=o+c;Go(d,f,l,r)}),i.forEachChild(function(l,c){Oa(d,e,t.concat(c),l,a)})}function zo(d,e,t){var i=e==="",a={dispatch:i?d.dispatch:function(n,o,s){var h=ya(n,o,s),r=h.payload,l=h.options,c=h.type;return(!l||!l.root)&&(c=e+c),d.dispatch(c,r)},commit:i?d.commit:function(n,o,s){var h=ya(n,o,s),r=h.payload,l=h.options,c=h.type;(!l||!l.root)&&(c=e+c),d.commit(c,r,l)}};return Object.defineProperties(a,{getters:{get:i?function(){return d.getters}:function(){return Vs(d,e)}},state:{get:function(){return In(d.state,t)}}}),a}function Vs(d,e){if(!d._makeLocalGettersCache[e]){var t={},i=e.length;Object.keys(d.getters).forEach(function(a){if(a.slice(0,i)===e){var n=a.slice(i);Object.defineProperty(t,n,{get:function(){return d.getters[a]},enumerable:!0})}}),d._makeLocalGettersCache[e]=t}return d._makeLocalGettersCache[e]}function Uo(d,e,t,i){var a=d._mutations[e]||(d._mutations[e]=[]);a.push(function(o){t.call(d,i.state,o)})}function qo(d,e,t,i){var a=d._actions[e]||(d._actions[e]=[]);a.push(function(o){var s=t.call(d,{dispatch:i.dispatch,commit:i.commit,getters:i.getters,state:i.state,rootGetters:d.getters,rootState:d.state},o);return Do(s)||(s=Promise.resolve(s)),d._devtoolHook?s.catch(function(h){throw d._devtoolHook.emit("vuex:error",h),h}):s})}function Go(d,e,t,i){d._wrappedGetters[e]||(d._wrappedGetters[e]=function(n){return t(i.state,i.getters,n.state,n.getters)})}function jo(d){Ct(function(){return d._state.data},function(){},{deep:!0,flush:"sync"})}function In(d,e){return e.reduce(function(t,i){return t[i]},d)}function ya(d,e,t){return Vo(d)&&d.type&&(t=e,e=d,d=d.type),{type:d,payload:e,options:t}}var Ho="vuex bindings",zn="vuex:mutations",Ua="vuex:actions",xi="vuex",Wo=0;function Zo(d,e){No({id:"org.vuejs.vuex",app:d,label:"Vuex",homepage:"https://next.vuex.vuejs.org/",logo:"https://vuejs.org/images/icons/favicon-96x96.png",packageName:"vuex",componentStateTypes:[Ho]},function(t){t.addTimelineLayer({id:zn,label:"Vuex Mutations",color:Un}),t.addTimelineLayer({id:Ua,label:"Vuex Actions",color:Un}),t.addInspector({id:xi,label:"Vuex",icon:"storage",treeFilterPlaceholder:"Filter stores..."}),t.on.getInspectorTree(function(i){if(i.app===d&&i.inspectorId===xi)if(i.filter){var a=[];Us(a,e._modules.root,i.filter,""),i.rootNodes=a}else i.rootNodes=[zs(e._modules.root,"")]}),t.on.getInspectorState(function(i){if(i.app===d&&i.inspectorId===xi){var a=i.nodeId;Vs(e,a),i.state=Qo(el(e._modules,a),a==="root"?e.getters:e._makeLocalGettersCache,a)}}),t.on.editInspectorState(function(i){if(i.app===d&&i.inspectorId===xi){var a=i.nodeId,n=i.path;a!=="root"&&(n=a.split("/").filter(Boolean).concat(n)),e._withCommit(function(){i.set(e._state.data,n,i.state.value)})}}),e.subscribe(function(i,a){var n={};i.payload&&(n.payload=i.payload),n.state=a,t.notifyComponentUpdate(),t.sendInspectorTree(xi),t.sendInspectorState(xi),t.addTimelineEvent({layerId:zn,event:{time:Date.now(),title:i.type,data:n}})}),e.subscribeAction({before:function(i,a){var n={};i.payload&&(n.payload=i.payload),i._id=Wo++,i._time=Date.now(),n.state=a,t.addTimelineEvent({layerId:Ua,event:{time:i._time,title:i.type,groupId:i._id,subtitle:"start",data:n}})},after:function(i,a){var n={},o=Date.now()-i._time;n.duration={_custom:{type:"duration",display:o+"ms",tooltip:"Action duration",value:o}},i.payload&&(n.payload=i.payload),n.state=a,t.addTimelineEvent({layerId:Ua,event:{time:Date.now(),title:i.type,groupId:i._id,subtitle:"end",data:n}})}})})}var Un=8702998,$o=6710886,Ko=16777215,Ds={label:"namespaced",textColor:Ko,backgroundColor:$o};function Xs(d){return d&&d!=="root"?d.split("/").slice(-2,-1)[0]:"Root"}function zs(d,e){return{id:e||"root",label:Xs(e),tags:d.namespaced?[Ds]:[],children:Object.keys(d._children).map(function(t){return zs(d._children[t],e+t+"/")})}}function Us(d,e,t,i){i.includes(t)&&d.push({id:i||"root",label:i.endsWith("/")?i.slice(0,i.length-1):i||"Root",tags:e.namespaced?[Ds]:[]}),Object.keys(e._children).forEach(function(a){Us(d,e._children[a],t,i+a+"/")})}function Qo(d,e,t){e=t==="root"?e:e[t];var i=Object.keys(e),a={state:Object.keys(d.state).map(function(o){return{key:o,editable:!0,value:d.state[o]}})};if(i.length){var n=Jo(e);a.getters=Object.keys(n).map(function(o){return{key:o.endsWith("/")?Xs(o):o,editable:!1,value:ln(function(){return n[o]})}})}return a}function Jo(d){var e={};return Object.keys(d).forEach(function(t){var i=t.split("/");if(i.length>1){var a=e,n=i.pop();i.forEach(function(o){a[o]||(a[o]={_custom:{value:{},display:o,tooltip:"Module",abstract:!0}}),a=a[o]._custom.value}),a[n]=ln(function(){return d[t]})}else e[t]=ln(function(){return d[t]})}),e}function el(d,e){var t=e.split("/").filter(function(i){return i});return t.reduce(function(i,a,n){var o=i[a];if(!o)throw new Error('Missing module "'+a+'" for path "'+e+'".');return n===t.length-1?o:o._children},e==="root"?d:d.root._children)}function ln(d){try{return d()}catch(e){return e}}var Ft=function(e,t){this.runtime=t,this._children=Object.create(null),this._rawModule=e;var i=e.state;this.state=(typeof i=="function"?i():i)||{}},qs={namespaced:{configurable:!0}};qs.namespaced.get=function(){return!!this._rawModule.namespaced};Ft.prototype.addChild=function(e,t){this._children[e]=t};Ft.prototype.removeChild=function(e){delete this._children[e]};Ft.prototype.getChild=function(e){return this._children[e]};Ft.prototype.hasChild=function(e){return e in this._children};Ft.prototype.update=function(e){this._rawModule.namespaced=e.namespaced,e.actions&&(this._rawModule.actions=e.actions),e.mutations&&(this._rawModule.mutations=e.mutations),e.getters&&(this._rawModule.getters=e.getters)};Ft.prototype.forEachChild=function(e){Gi(this._children,e)};Ft.prototype.forEachGetter=function(e){this._rawModule.getters&&Gi(this._rawModule.getters,e)};Ft.prototype.forEachAction=function(e){this._rawModule.actions&&Gi(this._rawModule.actions,e)};Ft.prototype.forEachMutation=function(e){this._rawModule.mutations&&Gi(this._rawModule.mutations,e)};Object.defineProperties(Ft.prototype,qs);var vi=function(e){this.register([],e,!1)};vi.prototype.get=function(e){return e.reduce(function(t,i){return t.getChild(i)},this.root)};vi.prototype.getNamespace=function(e){var t=this.root;return e.reduce(function(i,a){return t=t.getChild(a),i+(t.namespaced?a+"/":"")},"")};vi.prototype.update=function(e){Gs([],this.root,e)};vi.prototype.register=function(e,t,i){var a=this;i===void 0&&(i=!0);var n=new Ft(t,i);if(e.length===0)this.root=n;else{var o=this.get(e.slice(0,-1));o.addChild(e[e.length-1],n)}t.modules&&Gi(t.modules,function(s,h){a.register(e.concat(h),s,i)})};vi.prototype.unregister=function(e){var t=this.get(e.slice(0,-1)),i=e[e.length-1],a=t.getChild(i);a&&a.runtime&&t.removeChild(i)};vi.prototype.isRegistered=function(e){var t=this.get(e.slice(0,-1)),i=e[e.length-1];return t?t.hasChild(i):!1};function Gs(d,e,t){if(e.update(t),t.modules)for(var i in t.modules){if(!e.getChild(i))return;Gs(d.concat(i),e.getChild(i),t.modules[i])}}function tl(d){return new gt(d)}var gt=function(e){var t=this;e===void 0&&(e={});var i=e.plugins;i===void 0&&(i=[]);var a=e.strict;a===void 0&&(a=!1);var n=e.devtools;this._committing=!1,this._actions=Object.create(null),this._actionSubscribers=[],this._mutations=Object.create(null),this._wrappedGetters=Object.create(null),this._modules=new vi(e),this._modulesNamespaceMap=Object.create(null),this._subscribers=[],this._makeLocalGettersCache=Object.create(null),this._scope=null,this._devtools=n;var o=this,s=this,h=s.dispatch,r=s.commit;this.dispatch=function(f,u){return h.call(o,f,u)},this.commit=function(f,u,g){return r.call(o,f,u,g)},this.strict=a;var l=this._modules.root.state;Oa(this,l,[],this._modules.root),Tn(this,l),i.forEach(function(c){return c(t)})},Ln={state:{configurable:!0}};gt.prototype.install=function(e,t){e.provide(t||Os,this),e.config.globalProperties.$store=this;var i=this._devtools!==void 0?this._devtools:!1;i&&Zo(e,this)};Ln.state.get=function(){return this._state.data};Ln.state.set=function(d){};gt.prototype.commit=function(e,t,i){var a=this,n=ya(e,t,i),o=n.type,s=n.payload,h={type:o,payload:s},r=this._mutations[o];r&&(this._withCommit(function(){r.forEach(function(c){c(s)})}),this._subscribers.slice().forEach(function(l){return l(h,a.state)}))};gt.prototype.dispatch=function(e,t){var i=this,a=ya(e,t),n=a.type,o=a.payload,s={type:n,payload:o},h=this._actions[n];if(h){try{this._actionSubscribers.slice().filter(function(l){return l.before}).forEach(function(l){return l.before(s,i.state)})}catch{}var r=h.length>1?Promise.all(h.map(function(l){return l(o)})):h[0](o);return new Promise(function(l,c){r.then(function(f){try{i._actionSubscribers.filter(function(u){return u.after}).forEach(function(u){return u.after(s,i.state)})}catch{}l(f)},function(f){try{i._actionSubscribers.filter(function(u){return u.error}).forEach(function(u){return u.error(s,i.state,f)})}catch{}c(f)})})}};gt.prototype.subscribe=function(e,t){return Ys(e,this._subscribers,t)};gt.prototype.subscribeAction=function(e,t){var i=typeof e=="function"?{before:e}:e;return Ys(i,this._actionSubscribers,t)};gt.prototype.watch=function(e,t,i){var a=this;return Ct(function(){return e(a.state,a.getters)},t,Object.assign({},i))};gt.prototype.replaceState=function(e){var t=this;this._withCommit(function(){t._state.data=e})};gt.prototype.registerModule=function(e,t,i){i===void 0&&(i={}),typeof e=="string"&&(e=[e]),this._modules.register(e,t),Oa(this,this.state,e,this._modules.get(e),i.preserveState),Tn(this,this.state)};gt.prototype.unregisterModule=function(e){var t=this;typeof e=="string"&&(e=[e]),this._modules.unregister(e),this._withCommit(function(){var i=In(t.state,e.slice(0,-1));delete i[e[e.length-1]]}),Ns(this)};gt.prototype.hasModule=function(e){return typeof e=="string"&&(e=[e]),this._modules.isRegistered(e)};gt.prototype.hotUpdate=function(e){this._modules.update(e),Ns(this,!0)};gt.prototype._withCommit=function(e){var t=this._committing;this._committing=!0,e(),this._committing=t};Object.defineProperties(gt.prototype,Ln);const il={namespaced:!0,state:{telegram_id:null,avatar:null,name:null,bandName:null,balance:0,band:{code:null,available:null},auth_token:null,temporary_auth_token:null,available_daily_rewards:{status:!1,amount:0}},mutations:{SET_USER(d,e){d.telegram_id=e.telegram_id,d.avatar=e.avatar,d.name=e.name,d.bandName=e.bandName,d.balance=e.balance,d.band.code=e.band.code,d.band.available=e.band.available,d.auth_token=e.token,d.temporary_auth_token&&(d.temporary_auth_token=null),e.available_daily_rewards&&(d.available_daily_rewards.status=e.available_daily_rewards.status,e.available_daily_rewards.amount&&(d.available_daily_rewards.amount=e.available_daily_rewards.amount))},SET_USER_BALANCE(d,e){d.balance=e},SET_TEMPORARY_AUTH_TOKEN(d,e){d.temporary_auth_token=e},SET_USER_AVAILABLE_DAILY_REWARDS(d,e){e.status&&(d.available_daily_rewards.status=e.status),e.amount&&(d.available_daily_rewards.amount=e.amount)},SET_USER_BAND_AVAILABLE(d,e){d.band.available=e}},actions:{setTemporaryAuthToken({commit:d},e){d("SET_TEMPORARY_AUTH_TOKEN",e)},setUser({commit:d},e){d("SET_USER",e)},setUserBalance({commit:d},e){d("SET_USER_BALANCE",e)},setUserAvailableDailyRewards({commit:d},e){d("SET_USER_AVAILABLE_DAILY_REWARDS",e)},setUserBandAvailable({commit:d},e){d("SET_USER_BAND_AVAILABLE",e)}},getters:{isAuth(d){return d.auth_token!==null}}},al={namespaced:!0,state:{active:!1,closeAnimation:!1,selected:null,props:{},render:!1},mutations:{SET_MODAL_RENDER:(d,e)=>{d.render=e},SET_MODAL_PROPS:(d,e)=>{d.props=e},SET_MODAL_ACTIVE:(d,e)=>{e?(d.selected=e,d.active=!0):(d.active=!1,d.selected=null,d.props={})},SET_MODAL_CLOSE_ANIMATION:(d,e)=>{d.closeAnimation=e}},actions:{setModalRender:({commit:d},e)=>{d("SET_MODAL_RENDER",e)},setModalProps:({commit:d},e)=>{d("SET_MODAL_PROPS",e)},setModalActive:({commit:d},e)=>{d("SET_MODAL_ACTIVE",e)},setModalCloseAnimation:({commit:d},e)=>{d("SET_MODAL_CLOSE_ANIMATION",e)}}},nl={namespaced:!0,state:{status:!1,title:null,description:null,button:{name:null,type:null,function:null}},mutations:{SET_ERROR:(d,e)=>{e.status&&(d.status=e.status),e.description&&(d.description=e.description),e.title&&(d.title=e.title),e.button&&(e.button.function&&(d.button.function=e.button.function),e.button.name&&(d.button.name=e.button.name),e.button.type&&(d.button.type=e.button.type))}},actions:{setError:({commit:d},e)=>{d("SET_ERROR",e)}}},sl={namespaced:!0,state:{status:!0},mutations:{SET_PRELOADER:(d,e)=>{d.status=e}},actions:{setPreloader:({commit:d},e)=>{d("SET_PRELOADER",e)}}},rl={namespaced:!0,state:{player_register:{avatar:null},default_avatar:null},mutations:{SET_INIT_PLAYER_REGISTER_AVATAR:(d,e)=>{d.player_register.avatar=e},SET_INIT_DEFAULT_AVATAR:(d,e)=>{d.default_avatar=e}},actions:{setInitPlayerRegisterAvatar:({commit:d},e)=>{d("SET_INIT_PLAYER_REGISTER_AVATAR",e)},setInitDefaultAvatar:({commit:d},e)=>{d("SET_INIT_DEFAULT_AVATAR",e)}}},ol={namespaced:!0,state:{popup:[]},mutations:{ADD_ITEM_TO_NOTIFICATIONS_POPUP:(d,e)=>{d.popup.length===2&&d.popup.shift();const t=d.popup;t.findIndex(a=>a.message===e.message)!==-1&&t.splice(bo.findIndex,1),t.push(e),d.popup=t.reverse()},DELETE_ITEM_FROM_NOTIFICATIONS_POPUP:(d,e)=>{d.popup=d.popup.filter(t=>t.id!==e)}},actions:{addItemNotificationsPopup:({commit:d},e)=>{d("ADD_ITEM_TO_NOTIFICATIONS_POPUP",e)},deleteItemNotificationsPopup:({commit:d},e)=>{d("DELETE_ITEM_FROM_NOTIFICATIONS_POPUP",e)}}},ll={namespaced:!0,state:{own:[],other:[]},mutations:{SET_TASKS_OWN_LIST:(d,e)=>{d.own=e},SET_TASKS_OTHER_LIST:(d,e)=>{d.other=e}},actions:{setTasksOwnList:({commit:d},e)=>{d("SET_TASKS_OWN_LIST",e)},setTasksOtherList:({commit:d},e)=>{d("SET_TASKS_OTHER_LIST",e)}}},Ve=tl({state:{components:{header:{visible:!0},menu:{visible:!0}},drop_game:{started:!1}},modules:{user:il,modal:al,error:nl,preloader:sl,notifications:ol,init:rl,tasks:ll},mutations:{SET_COMPONENTS_HEADER_VISIBLE(d,e){d.components.header.visible=e},SET_COMPONENTS_MENU_VISIBLE(d,e){d.components.menu.visible=e},SET_DROP_GAME_STARTED(d,e){d.drop_game.started=e}},actions:{setComponentsHeaderVisible:({commit:d},e)=>{d("SET_COMPONENTS_HEADER_VISIBLE",e)},setComponentsMenuVisible:({commit:d},e)=>{d("SET_COMPONENTS_MENU_VISIBLE",e)},setDropGameStarted:({commit:d},e)=>{d("SET_DROP_GAME_STARTED",e)}}});/*!
  * vue-router v4.4.3
  * (c) 2024 Eduardo San Martin Morote
  * @license MIT
  */const Ti=typeof document<"u";function cl(d){return d.__esModule||d[Symbol.toStringTag]==="Module"}const Ue=Object.assign;function qa(d,e){const t={};for(const i in e){const a=e[i];t[i]=Lt(a)?a.map(d):d(a)}return t}const ea=()=>{},Lt=Array.isArray,js=/#/g,hl=/&/g,dl=/\//g,ul=/=/g,ml=/\?/g,Hs=/\+/g,fl=/%5B/g,gl=/%5D/g,Ws=/%5E/g,pl=/%60/g,Zs=/%7B/g,vl=/%7C/g,$s=/%7D/g,_l=/%20/g;function Rn(d){return encodeURI(""+d).replace(vl,"|").replace(fl,"[").replace(gl,"]")}function bl(d){return Rn(d).replace(Zs,"{").replace($s,"}").replace(Ws,"^")}function cn(d){return Rn(d).replace(Hs,"%2B").replace(_l,"+").replace(js,"%23").replace(hl,"%26").replace(pl,"`").replace(Zs,"{").replace($s,"}").replace(Ws,"^")}function yl(d){return cn(d).replace(ul,"%3D")}function wl(d){return Rn(d).replace(js,"%23").replace(ml,"%3F")}function xl(d){return d==null?"":wl(d).replace(dl,"%2F")}function ia(d){try{return decodeURIComponent(""+d)}catch{}return""+d}const Cl=/\/$/,kl=d=>d.replace(Cl,"");function Ga(d,e,t="/"){let i,a={},n="",o="";const s=e.indexOf("#");let h=e.indexOf("?");return s<h&&s>=0&&(h=-1),h>-1&&(i=e.slice(0,h),n=e.slice(h+1,s>-1?s:e.length),a=d(n)),s>-1&&(i=i||e.slice(0,s),o=e.slice(s,e.length)),i=Ml(i??e,t),{fullPath:i+(n&&"?")+n+o,path:i,query:a,hash:ia(o)}}function Al(d,e){const t=e.query?d(e.query):"";return e.path+(t&&"?")+t+(e.hash||"")}function Sl(d,e,t){const i=e.matched.length-1,a=t.matched.length-1;return i>-1&&i===a&&Yi(e.matched[i],t.matched[a])&&Ks(e.params,t.params)&&d(e.query)===d(t.query)&&e.hash===t.hash}function Yi(d,e){return(d.aliasOf||d)===(e.aliasOf||e)}function Ks(d,e){if(Object.keys(d).length!==Object.keys(e).length)return!1;for(const t in d)if(!El(d[t],e[t]))return!1;return!0}function El(d,e){return Lt(d)?qn(d,e):Lt(e)?qn(e,d):d===e}function qn(d,e){return Lt(e)?d.length===e.length&&d.every((t,i)=>t===e[i]):d.length===1&&d[0]===e}function Ml(d,e){if(d.startsWith("/"))return d;if(!d)return e;const t=e.split("/"),i=d.split("/"),a=i[i.length-1];(a===".."||a===".")&&i.push("");let n=t.length-1,o,s;for(o=0;o<i.length;o++)if(s=i[o],s!==".")if(s==="..")n>1&&n--;else break;return t.slice(0,n).join("/")+"/"+i.slice(o).join("/")}const ti={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};var aa;(function(d){d.pop="pop",d.push="push"})(aa||(aa={}));var wa;(function(d){d.back="back",d.forward="forward",d.unknown=""})(wa||(wa={}));const ja="";function Tl(d){if(!d)if(Ti){const e=document.querySelector("base");d=e&&e.getAttribute("href")||"/",d=d.replace(/^\w+:\/\/[^\/]+/,"")}else d="/";return d[0]!=="/"&&d[0]!=="#"&&(d="/"+d),kl(d)}const Il=/^[^#]+#/;function Ll(d,e){return d.replace(Il,"#")+e}function Rl(d,e){const t=document.documentElement.getBoundingClientRect(),i=d.getBoundingClientRect();return{behavior:e.behavior,left:i.left-t.left-(e.left||0),top:i.top-t.top-(e.top||0)}}const Bl=()=>({left:window.scrollX,top:window.scrollY});function Fl(d){let e;if("el"in d){const t=d.el,i=typeof t=="string"&&t.startsWith("#"),a=typeof t=="string"?i?document.getElementById(t.slice(1)):document.querySelector(t):t;if(!a)return;e=Rl(a,d)}else e=d;"scrollBehavior"in document.documentElement.style?window.scrollTo(e):window.scrollTo(e.left!=null?e.left:window.scrollX,e.top!=null?e.top:window.scrollY)}function Gn(d,e){return(history.state?history.state.position-e:-1)+d}const hn=new Map;function Pl(d,e){hn.set(d,e)}function Ol(d){const e=hn.get(d);return hn.delete(d),e}function Yl(d=""){let e=[],t=[ja],i=0;d=Tl(d);function a(s){i++,i!==t.length&&t.splice(i),t.push(s)}function n(s,h,{direction:r,delta:l}){const c={direction:r,delta:l,type:aa.pop};for(const f of e)f(s,h,c)}const o={location:ja,state:{},base:d,createHref:Ll.bind(null,d),replace(s){t.splice(i--,1),a(s)},push(s,h){a(s)},listen(s){return e.push(s),()=>{const h=e.indexOf(s);h>-1&&e.splice(h,1)}},destroy(){e=[],t=[ja],i=0},go(s,h=!0){const r=this.location,l=s<0?wa.back:wa.forward;i=Math.max(0,Math.min(i+s,t.length-1)),h&&n(this.location,r,{direction:l,delta:s})}};return Object.defineProperty(o,"location",{enumerable:!0,get:()=>t[i]}),o}function Nl(d){return typeof d=="string"||d&&typeof d=="object"}function Qs(d){return typeof d=="string"||typeof d=="symbol"}const Js=Symbol("");var jn;(function(d){d[d.aborted=4]="aborted",d[d.cancelled=8]="cancelled",d[d.duplicated=16]="duplicated"})(jn||(jn={}));function Ni(d,e){return Ue(new Error,{type:d,[Js]:!0},e)}function Ut(d,e){return d instanceof Error&&Js in d&&(e==null||!!(d.type&e))}const Hn="[^/]+?",Vl={sensitive:!1,strict:!1,start:!0,end:!0},Dl=/[.+*?^${}()[\]/\\]/g;function Xl(d,e){const t=Ue({},Vl,e),i=[];let a=t.start?"^":"";const n=[];for(const r of d){const l=r.length?[]:[90];t.strict&&!r.length&&(a+="/");for(let c=0;c<r.length;c++){const f=r[c];let u=40+(t.sensitive?.25:0);if(f.type===0)c||(a+="/"),a+=f.value.replace(Dl,"\\$&"),u+=40;else if(f.type===1){const{value:g,repeatable:p,optional:v,regexp:b}=f;n.push({name:g,repeatable:p,optional:v});const w=b||Hn;if(w!==Hn){u+=10;try{new RegExp(`(${w})`)}catch(y){throw new Error(`Invalid custom RegExp for param "${g}" (${w}): `+y.message)}}let _=p?`((?:${w})(?:/(?:${w}))*)`:`(${w})`;c||(_=v&&r.length<2?`(?:/${_})`:"/"+_),v&&(_+="?"),a+=_,u+=20,v&&(u+=-8),p&&(u+=-20),w===".*"&&(u+=-50)}l.push(u)}i.push(l)}if(t.strict&&t.end){const r=i.length-1;i[r][i[r].length-1]+=.7000000000000001}t.strict||(a+="/?"),t.end?a+="$":t.strict&&(a+="(?:/|$)");const o=new RegExp(a,t.sensitive?"":"i");function s(r){const l=r.match(o),c={};if(!l)return null;for(let f=1;f<l.length;f++){const u=l[f]||"",g=n[f-1];c[g.name]=u&&g.repeatable?u.split("/"):u}return c}function h(r){let l="",c=!1;for(const f of d){(!c||!l.endsWith("/"))&&(l+="/"),c=!1;for(const u of f)if(u.type===0)l+=u.value;else if(u.type===1){const{value:g,repeatable:p,optional:v}=u,b=g in r?r[g]:"";if(Lt(b)&&!p)throw new Error(`Provided param "${g}" is an array but it is not repeatable (* or + modifiers)`);const w=Lt(b)?b.join("/"):b;if(!w)if(v)f.length<2&&(l.endsWith("/")?l=l.slice(0,-1):c=!0);else throw new Error(`Missing required param "${g}"`);l+=w}}return l||"/"}return{re:o,score:i,keys:n,parse:s,stringify:h}}function zl(d,e){let t=0;for(;t<d.length&&t<e.length;){const i=e[t]-d[t];if(i)return i;t++}return d.length<e.length?d.length===1&&d[0]===80?-1:1:d.length>e.length?e.length===1&&e[0]===80?1:-1:0}function er(d,e){let t=0;const i=d.score,a=e.score;for(;t<i.length&&t<a.length;){const n=zl(i[t],a[t]);if(n)return n;t++}if(Math.abs(a.length-i.length)===1){if(Wn(i))return 1;if(Wn(a))return-1}return a.length-i.length}function Wn(d){const e=d[d.length-1];return d.length>0&&e[e.length-1]<0}const Ul={type:0,value:""},ql=/[a-zA-Z0-9_]/;function Gl(d){if(!d)return[[]];if(d==="/")return[[Ul]];if(!d.startsWith("/"))throw new Error(`Invalid path "${d}"`);function e(u){throw new Error(`ERR (${t})/"${r}": ${u}`)}let t=0,i=t;const a=[];let n;function o(){n&&a.push(n),n=[]}let s=0,h,r="",l="";function c(){r&&(t===0?n.push({type:0,value:r}):t===1||t===2||t===3?(n.length>1&&(h==="*"||h==="+")&&e(`A repeatable param (${r}) must be alone in its segment. eg: '/:ids+.`),n.push({type:1,value:r,regexp:l,repeatable:h==="*"||h==="+",optional:h==="*"||h==="?"})):e("Invalid state to consume buffer"),r="")}function f(){r+=h}for(;s<d.length;){if(h=d[s++],h==="\\"&&t!==2){i=t,t=4;continue}switch(t){case 0:h==="/"?(r&&c(),o()):h===":"?(c(),t=1):f();break;case 4:f(),t=i;break;case 1:h==="("?t=2:ql.test(h)?f():(c(),t=0,h!=="*"&&h!=="?"&&h!=="+"&&s--);break;case 2:h===")"?l[l.length-1]=="\\"?l=l.slice(0,-1)+h:t=3:l+=h;break;case 3:c(),t=0,h!=="*"&&h!=="?"&&h!=="+"&&s--,l="";break;default:e("Unknown state");break}}return t===2&&e(`Unfinished custom RegExp for param "${r}"`),c(),o(),a}function jl(d,e,t){const i=Xl(Gl(d.path),t),a=Ue(i,{record:d,parent:e,children:[],alias:[]});return e&&!a.record.aliasOf==!e.record.aliasOf&&e.children.push(a),a}function Hl(d,e){const t=[],i=new Map;e=Kn({strict:!1,end:!0,sensitive:!1},e);function a(c){return i.get(c)}function n(c,f,u){const g=!u,p=Wl(c);p.aliasOf=u&&u.record;const v=Kn(e,c),b=[p];if("alias"in c){const y=typeof c.alias=="string"?[c.alias]:c.alias;for(const k of y)b.push(Ue({},p,{components:u?u.record.components:p.components,path:k,aliasOf:u?u.record:p}))}let w,_;for(const y of b){const{path:k}=y;if(f&&k[0]!=="/"){const C=f.record.path,A=C[C.length-1]==="/"?"":"/";y.path=f.record.path+(k&&A+k)}if(w=jl(y,f,v),u?u.alias.push(w):(_=_||w,_!==w&&_.alias.push(w),g&&c.name&&!$n(w)&&o(c.name)),tr(w)&&h(w),p.children){const C=p.children;for(let A=0;A<C.length;A++)n(C[A],w,u&&u.children[A])}u=u||w}return _?()=>{o(_)}:ea}function o(c){if(Qs(c)){const f=i.get(c);f&&(i.delete(c),t.splice(t.indexOf(f),1),f.children.forEach(o),f.alias.forEach(o))}else{const f=t.indexOf(c);f>-1&&(t.splice(f,1),c.record.name&&i.delete(c.record.name),c.children.forEach(o),c.alias.forEach(o))}}function s(){return t}function h(c){const f=Kl(c,t);t.splice(f,0,c),c.record.name&&!$n(c)&&i.set(c.record.name,c)}function r(c,f){let u,g={},p,v;if("name"in c&&c.name){if(u=i.get(c.name),!u)throw Ni(1,{location:c});v=u.record.name,g=Ue(Zn(f.params,u.keys.filter(_=>!_.optional).concat(u.parent?u.parent.keys.filter(_=>_.optional):[]).map(_=>_.name)),c.params&&Zn(c.params,u.keys.map(_=>_.name))),p=u.stringify(g)}else if(c.path!=null)p=c.path,u=t.find(_=>_.re.test(p)),u&&(g=u.parse(p),v=u.record.name);else{if(u=f.name?i.get(f.name):t.find(_=>_.re.test(f.path)),!u)throw Ni(1,{location:c,currentLocation:f});v=u.record.name,g=Ue({},f.params,c.params),p=u.stringify(g)}const b=[];let w=u;for(;w;)b.unshift(w.record),w=w.parent;return{name:v,path:p,params:g,matched:b,meta:$l(b)}}d.forEach(c=>n(c));function l(){t.length=0,i.clear()}return{addRoute:n,resolve:r,removeRoute:o,clearRoutes:l,getRoutes:s,getRecordMatcher:a}}function Zn(d,e){const t={};for(const i of e)i in d&&(t[i]=d[i]);return t}function Wl(d){return{path:d.path,redirect:d.redirect,name:d.name,meta:d.meta||{},aliasOf:void 0,beforeEnter:d.beforeEnter,props:Zl(d),children:d.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in d?d.components||null:d.component&&{default:d.component}}}function Zl(d){const e={},t=d.props||!1;if("component"in d)e.default=t;else for(const i in d.components)e[i]=typeof t=="object"?t[i]:t;return e}function $n(d){for(;d;){if(d.record.aliasOf)return!0;d=d.parent}return!1}function $l(d){return d.reduce((e,t)=>Ue(e,t.meta),{})}function Kn(d,e){const t={};for(const i in d)t[i]=i in e?e[i]:d[i];return t}function Kl(d,e){let t=0,i=e.length;for(;t!==i;){const n=t+i>>1;er(d,e[n])<0?i=n:t=n+1}const a=Ql(d);return a&&(i=e.lastIndexOf(a,i-1)),i}function Ql(d){let e=d;for(;e=e.parent;)if(tr(e)&&er(d,e)===0)return e}function tr({record:d}){return!!(d.name||d.components&&Object.keys(d.components).length||d.redirect)}function Jl(d){const e={};if(d===""||d==="?")return e;const i=(d[0]==="?"?d.slice(1):d).split("&");for(let a=0;a<i.length;++a){const n=i[a].replace(Hs," "),o=n.indexOf("="),s=ia(o<0?n:n.slice(0,o)),h=o<0?null:ia(n.slice(o+1));if(s in e){let r=e[s];Lt(r)||(r=e[s]=[r]),r.push(h)}else e[s]=h}return e}function Qn(d){let e="";for(let t in d){const i=d[t];if(t=yl(t),i==null){i!==void 0&&(e+=(e.length?"&":"")+t);continue}(Lt(i)?i.map(n=>n&&cn(n)):[i&&cn(i)]).forEach(n=>{n!==void 0&&(e+=(e.length?"&":"")+t,n!=null&&(e+="="+n))})}return e}function ec(d){const e={};for(const t in d){const i=d[t];i!==void 0&&(e[t]=Lt(i)?i.map(a=>a==null?null:""+a):i==null?i:""+i)}return e}const tc=Symbol(""),Jn=Symbol(""),Ya=Symbol(""),Bn=Symbol(""),dn=Symbol("");function Wi(){let d=[];function e(i){return d.push(i),()=>{const a=d.indexOf(i);a>-1&&d.splice(a,1)}}function t(){d=[]}return{add:e,list:()=>d.slice(),reset:t}}function si(d,e,t,i,a,n=o=>o()){const o=i&&(i.enterCallbacks[a]=i.enterCallbacks[a]||[]);return()=>new Promise((s,h)=>{const r=f=>{f===!1?h(Ni(4,{from:t,to:e})):f instanceof Error?h(f):Nl(f)?h(Ni(2,{from:e,to:f})):(o&&i.enterCallbacks[a]===o&&typeof f=="function"&&o.push(f),s())},l=n(()=>d.call(i&&i.instances[a],e,t,r));let c=Promise.resolve(l);d.length<3&&(c=c.then(r)),c.catch(f=>h(f))})}function Ha(d,e,t,i,a=n=>n()){const n=[];for(const o of d)for(const s in o.components){let h=o.components[s];if(!(e!=="beforeRouteEnter"&&!o.instances[s]))if(ic(h)){const l=(h.__vccOpts||h)[e];l&&n.push(si(l,t,i,o,s,a))}else{let r=h();n.push(()=>r.then(l=>{if(!l)return Promise.reject(new Error(`Couldn't resolve component "${s}" at "${o.path}"`));const c=cl(l)?l.default:l;o.components[s]=c;const u=(c.__vccOpts||c)[e];return u&&si(u,t,i,o,s,a)()}))}}return n}function ic(d){return typeof d=="object"||"displayName"in d||"props"in d||"__vccOpts"in d}function es(d){const e=Xe(Ya),t=Xe(Bn),i=$(()=>{const h=x(d.to);return e.resolve(h)}),a=$(()=>{const{matched:h}=i.value,{length:r}=h,l=h[r-1],c=t.matched;if(!l||!c.length)return-1;const f=c.findIndex(Yi.bind(null,l));if(f>-1)return f;const u=ts(h[r-2]);return r>1&&ts(l)===u&&c[c.length-1].path!==u?c.findIndex(Yi.bind(null,h[r-2])):f}),n=$(()=>a.value>-1&&rc(t.params,i.value.params)),o=$(()=>a.value>-1&&a.value===t.matched.length-1&&Ks(t.params,i.value.params));function s(h={}){return sc(h)?e[x(d.replace)?"replace":"push"](x(d.to)).catch(ea):Promise.resolve()}return{route:i,href:$(()=>i.value.href),isActive:n,isExactActive:o,navigate:s}}const ac=Ms({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink:es,setup(d,{slots:e}){const t=Cn(es(d)),{options:i}=Xe(Ya),a=$(()=>({[is(d.activeClass,i.linkActiveClass,"router-link-active")]:t.isActive,[is(d.exactActiveClass,i.linkExactActiveClass,"router-link-exact-active")]:t.isExactActive}));return()=>{const n=e.default&&e.default(t);return d.custom?n:kn("a",{"aria-current":t.isExactActive?d.ariaCurrentValue:null,href:t.href,onClick:t.navigate,class:a.value},n)}}}),nc=ac;function sc(d){if(!(d.metaKey||d.altKey||d.ctrlKey||d.shiftKey)&&!d.defaultPrevented&&!(d.button!==void 0&&d.button!==0)){if(d.currentTarget&&d.currentTarget.getAttribute){const e=d.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(e))return}return d.preventDefault&&d.preventDefault(),!0}}function rc(d,e){for(const t in e){const i=e[t],a=d[t];if(typeof i=="string"){if(i!==a)return!1}else if(!Lt(a)||a.length!==i.length||i.some((n,o)=>n!==a[o]))return!1}return!0}function ts(d){return d?d.aliasOf?d.aliasOf.path:d.path:""}const is=(d,e,t)=>d??e??t,oc=Ms({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(d,{attrs:e,slots:t}){const i=Xe(dn),a=$(()=>d.route||i.value),n=Xe(Jn,0),o=$(()=>{let r=x(n);const{matched:l}=a.value;let c;for(;(c=l[r])&&!c.components;)r++;return r}),s=$(()=>a.value.matched[o.value]);st(Jn,$(()=>o.value+1)),st(tc,s),st(dn,a);const h=ye();return Ct(()=>[h.value,s.value,d.name],([r,l,c],[f,u,g])=>{l&&(l.instances[c]=r,u&&u!==l&&r&&r===f&&(l.leaveGuards.size||(l.leaveGuards=u.leaveGuards),l.updateGuards.size||(l.updateGuards=u.updateGuards))),r&&l&&(!u||!Yi(l,u)||!f)&&(l.enterCallbacks[c]||[]).forEach(p=>p(r))},{flush:"post"}),()=>{const r=a.value,l=d.name,c=s.value,f=c&&c.components[l];if(!f)return as(t.default,{Component:f,route:r});const u=c.props[l],g=u?u===!0?r.params:typeof u=="function"?u(r):u:null,v=kn(f,Ue({},g,e,{onVnodeUnmounted:b=>{b.component.isUnmounted&&(c.instances[l]=null)},ref:h}));return as(t.default,{Component:v,route:r})||v}}});function as(d,e){if(!d)return null;const t=d(e);return t.length===1?t[0]:t}const lc=oc;function cc(d){const e=Hl(d.routes,d),t=d.parseQuery||Jl,i=d.stringifyQuery||Qn,a=d.history,n=Wi(),o=Wi(),s=Wi(),h=ao(ti);let r=ti;Ti&&d.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const l=qa.bind(null,V=>""+V),c=qa.bind(null,xl),f=qa.bind(null,ia);function u(V,H){let G,W;return Qs(V)?(G=e.getRecordMatcher(V),W=H):W=V,e.addRoute(W,G)}function g(V){const H=e.getRecordMatcher(V);H&&e.removeRoute(H)}function p(){return e.getRoutes().map(V=>V.record)}function v(V){return!!e.getRecordMatcher(V)}function b(V,H){if(H=Ue({},H||h.value),typeof V=="string"){const xe=Ga(t,V,H.path),qe=e.resolve({path:xe.path},H),ei=a.createHref(xe.fullPath);return Ue(xe,qe,{params:f(qe.params),hash:ia(xe.hash),redirectedFrom:void 0,href:ei})}let G;if(V.path!=null)G=Ue({},V,{path:Ga(t,V.path,H.path).path});else{const xe=Ue({},V.params);for(const qe in xe)xe[qe]==null&&delete xe[qe];G=Ue({},V,{params:c(xe)}),H.params=c(H.params)}const W=e.resolve(G,H),Re=V.hash||"";W.params=l(f(W.params));const De=Al(i,Ue({},V,{hash:bl(Re),path:W.path})),Me=a.createHref(De);return Ue({fullPath:De,hash:Re,query:i===Qn?ec(V.query):V.query||{}},W,{redirectedFrom:void 0,href:Me})}function w(V){return typeof V=="string"?Ga(t,V,h.value.path):Ue({},V)}function _(V,H){if(r!==V)return Ni(8,{from:H,to:V})}function y(V){return A(V)}function k(V){return y(Ue(w(V),{replace:!0}))}function C(V){const H=V.matched[V.matched.length-1];if(H&&H.redirect){const{redirect:G}=H;let W=typeof G=="function"?G(V):G;return typeof W=="string"&&(W=W.includes("?")||W.includes("#")?W=w(W):{path:W},W.params={}),Ue({query:V.query,hash:V.hash,params:W.path!=null?{}:V.params},W)}}function A(V,H){const G=r=b(V),W=h.value,Re=V.state,De=V.force,Me=V.replace===!0,xe=C(G);if(xe)return A(Ue(w(xe),{state:typeof xe=="object"?Ue({},Re,xe.state):Re,force:De,replace:Me}),H||G);const qe=G;qe.redirectedFrom=H;let ei;return!De&&Sl(i,W,G)&&(ei=Ni(16,{to:qe,from:W}),Le(W,W,!0,!1)),(ei?Promise.resolve(ei):B(qe,W)).catch(at=>Ut(at)?Ut(at,2)?at:Ae(at):be(at,qe,W)).then(at=>{if(at){if(Ut(at,2))return A(Ue({replace:Me},w(at.to),{state:typeof at.to=="object"?Ue({},Re,at.to.state):Re,force:De}),H||qe)}else at=Y(qe,W,!0,Me,Re);return F(qe,W,at),at})}function E(V,H){const G=_(V,H);return G?Promise.reject(G):Promise.resolve()}function M(V){const H=we.values().next().value;return H&&typeof H.runWithContext=="function"?H.runWithContext(V):V()}function B(V,H){let G;const[W,Re,De]=hc(V,H);G=Ha(W.reverse(),"beforeRouteLeave",V,H);for(const xe of W)xe.leaveGuards.forEach(qe=>{G.push(si(qe,V,H))});const Me=E.bind(null,V,H);return G.push(Me),Ke(G).then(()=>{G=[];for(const xe of n.list())G.push(si(xe,V,H));return G.push(Me),Ke(G)}).then(()=>{G=Ha(Re,"beforeRouteUpdate",V,H);for(const xe of Re)xe.updateGuards.forEach(qe=>{G.push(si(qe,V,H))});return G.push(Me),Ke(G)}).then(()=>{G=[];for(const xe of De)if(xe.beforeEnter)if(Lt(xe.beforeEnter))for(const qe of xe.beforeEnter)G.push(si(qe,V,H));else G.push(si(xe.beforeEnter,V,H));return G.push(Me),Ke(G)}).then(()=>(V.matched.forEach(xe=>xe.enterCallbacks={}),G=Ha(De,"beforeRouteEnter",V,H,M),G.push(Me),Ke(G))).then(()=>{G=[];for(const xe of o.list())G.push(si(xe,V,H));return G.push(Me),Ke(G)}).catch(xe=>Ut(xe,8)?xe:Promise.reject(xe))}function F(V,H,G){s.list().forEach(W=>M(()=>W(V,H,G)))}function Y(V,H,G,W,Re){const De=_(V,H);if(De)return De;const Me=H===ti,xe=Ti?history.state:{};G&&(W||Me?a.replace(V.fullPath,Ue({scroll:Me&&xe&&xe.scroll},Re)):a.push(V.fullPath,Re)),h.value=V,Le(V,H,G,Me),Ae()}let N;function I(){N||(N=a.listen((V,H,G)=>{if(!Ce.listening)return;const W=b(V),Re=C(W);if(Re){A(Ue(Re,{replace:!0}),W).catch(ea);return}r=W;const De=h.value;Ti&&Pl(Gn(De.fullPath,G.delta),Bl()),B(W,De).catch(Me=>Ut(Me,12)?Me:Ut(Me,2)?(A(Me.to,W).then(xe=>{Ut(xe,20)&&!G.delta&&G.type===aa.pop&&a.go(-1,!1)}).catch(ea),Promise.reject()):(G.delta&&a.go(-G.delta,!1),be(Me,W,De))).then(Me=>{Me=Me||Y(W,De,!1),Me&&(G.delta&&!Ut(Me,8)?a.go(-G.delta,!1):G.type===aa.pop&&Ut(Me,20)&&a.go(-1,!1)),F(W,De,Me)}).catch(ea)}))}let O=Wi(),D=Wi(),te;function be(V,H,G){Ae(V);const W=D.list();return W.length?W.forEach(Re=>Re(V,H,G)):console.error(V),Promise.reject(V)}function le(){return te&&h.value!==ti?Promise.resolve():new Promise((V,H)=>{O.add([V,H])})}function Ae(V){return te||(te=!V,I(),O.list().forEach(([H,G])=>V?G(V):H()),O.reset()),V}function Le(V,H,G,W){const{scrollBehavior:Re}=d;if(!Ti||!Re)return Promise.resolve();const De=!G&&Ol(Gn(V.fullPath,0))||(W||!G)&&history.state&&history.state.scroll||null;return so().then(()=>Re(V,H,De)).then(Me=>Me&&Fl(Me)).catch(Me=>be(Me,V,H))}const Ye=V=>a.go(V);let J;const we=new Set,Ce={currentRoute:h,listening:!0,addRoute:u,removeRoute:g,clearRoutes:e.clearRoutes,hasRoute:v,getRoutes:p,resolve:b,options:d,push:y,replace:k,go:Ye,back:()=>Ye(-1),forward:()=>Ye(1),beforeEach:n.add,beforeResolve:o.add,afterEach:s.add,onError:D.add,isReady:le,install(V){const H=this;V.component("RouterLink",nc),V.component("RouterView",lc),V.config.globalProperties.$router=H,Object.defineProperty(V.config.globalProperties,"$route",{enumerable:!0,get:()=>x(h)}),Ti&&!J&&h.value===ti&&(J=!0,y(a.location).catch(Re=>{}));const G={};for(const Re in ti)Object.defineProperty(G,Re,{get:()=>h.value[Re],enumerable:!0});V.provide(Ya,H),V.provide(Bn,no(G)),V.provide(dn,h);const W=V.unmount;we.add(V),V.unmount=function(){we.delete(V),we.size<1&&(r=ti,N&&N(),N=null,h.value=ti,J=!1,te=!1),W()}}};function Ke(V){return V.reduce((H,G)=>H.then(()=>M(G)),Promise.resolve())}return Ce}function hc(d,e){const t=[],i=[],a=[],n=Math.max(e.matched.length,d.matched.length);for(let o=0;o<n;o++){const s=e.matched[o];s&&(d.matched.find(r=>Yi(r,s))?i.push(s):t.push(s));const h=d.matched[o];h&&(e.matched.find(r=>Yi(r,h))||a.push(h))}return[t,i,a]}function di(){return Xe(Ya)}function Na(d){return Xe(Bn)}const dc="_icon_sqi9p_1",uc={icon:dc},mc=["data-icon-tag"],fc=["xlink:href"],Ne={__name:"icon",props:{name:String,customFill:{type:String,required:!1,default:null}},setup(d){const e=d,t=$(()=>{let i="";return i+="fill: ",e.customFill?i+="url(#"+e.customFill+")":i+="currentColor",i});return(i,a)=>(z(),Z("svg",{class:S({[x(uc).icon]:!0}),"data-icon-tag":e.name,style:Bt(t.value)},[L("use",{"xlink:href":"#icon-"+e.name},null,8,fc),Ts(i.$slots,"default")],14,mc))}},Vi=d=>parseFloat(d).toFixed(0).replace(/\B(?=(\d{3})+(?!\d))/g," "),gc="_name_43n2l_18",un={"gradient-button":"_gradient-button_43n2l_1",name:gc,"button-text-default":"_button-text-default_43n2l_25"},ft={"border-gradient":"_border-gradient_tfn7z_1","d-none":"_d-none_tfn7z_15","h-100":"_h-100_tfn7z_18"},Jt={__name:"turquoise-gradient-button",props:{icon:{type:String,required:!1,default:null},name:{type:String,required:!1},iconWidth:{type:Number,required:!1},iconColor:{type:String,required:!1}},setup(d){const e=d;return(t,i)=>(z(),Z("button",{type:"button",class:S({[x(un)["gradient-button"]]:!0,[x(ft)["border-gradient"]]:!0})},[e.name?(z(),Z("span",{key:0,class:S({[x(un).name]:!0})},Se(e.name),3)):Te("",!0),e.icon?(z(),Ee(Ne,{key:1,name:e.icon,style:Bt({width:(e.iconWidth?e.iconWidth:16)+"px",height:(e.iconWidth?e.iconWidth:16)+"px",color:e.iconColor?e.iconColor:"#000"})},null,8,["name","style"])):Te("",!0)],2))}},la="/static/images/no-image.Bx7nrYD4.png",pc="_home_13a3r_1",vc="_avatar_13a3r_13",_c="_username_13a3r_30",bc="_balance_13a3r_37",yc="_amount_13a3r_60",wc="_bottom_13a3r_82",xc="_info_13a3r_94",Cc="_name_13a3r_101",kc="_text_13a3r_115",He={home:pc,"home-user":"_home-user_13a3r_6",avatar:vc,"avatar-img":"_avatar-img_13a3r_21",username:_c,balance:bc,"balance-icon":"_balance-icon_13a3r_43","styled-icon":"_styled-icon_13a3r_56",amount:yc,"home-game":"_home-game_13a3r_65","card-game":"_card-game_13a3r_70",bottom:wc,info:xc,name:Cc,text:kc,"button-play":"_button-play_13a3r_120"},Zi={"home-user-avatar-enter-from":"_home-user-avatar-enter-from_st9a0_1","home-user-avatar-leave-to":"_home-user-avatar-leave-to_st9a0_2","home-user-avatar-enter-to":"_home-user-avatar-enter-to_st9a0_6","home-user-avatar-leave-from":"_home-user-avatar-leave-from_st9a0_7","home-user-avatar-enter-active":"_home-user-avatar-enter-active_st9a0_11","home-user-avatar-leave-active":"_home-user-avatar-leave-active_st9a0_12","home-user-username-enter-from":"_home-user-username-enter-from_st9a0_16","home-user-username-leave-to":"_home-user-username-leave-to_st9a0_17","home-user-username-enter-to":"_home-user-username-enter-to_st9a0_21","home-user-username-leave-from":"_home-user-username-leave-from_st9a0_22","home-user-username-enter-active":"_home-user-username-enter-active_st9a0_26","home-user-username-leave-active":"_home-user-username-leave-active_st9a0_27","home-user-balance-enter-from":"_home-user-balance-enter-from_st9a0_31","home-user-balance-leave-to":"_home-user-balance-leave-to_st9a0_32","home-user-balance-enter-to":"_home-user-balance-enter-to_st9a0_36","home-user-balance-leave-from":"_home-user-balance-leave-from_st9a0_37","home-user-balance-enter-active":"_home-user-balance-enter-active_st9a0_41","home-user-balance-leave-active":"_home-user-balance-leave-active_st9a0_42","home-game-card-game-enter-from":"_home-game-card-game-enter-from_st9a0_46","home-game-card-game-leave-to":"_home-game-card-game-leave-to_st9a0_47","home-game-card-game-enter-to":"_home-game-card-game-enter-to_st9a0_51","home-game-card-game-leave-from":"_home-game-card-game-leave-from_st9a0_52","home-game-card-game-enter-active":"_home-game-card-game-enter-active_st9a0_56","home-game-card-game-leave-active":"_home-game-card-game-leave-active_st9a0_57","home-game-button-enter-from":"_home-game-button-enter-from_st9a0_61","home-game-button-leave-to":"_home-game-button-leave-to_st9a0_62","home-game-button-enter-to":"_home-game-button-enter-to_st9a0_66","home-game-button-leave-from":"_home-game-button-leave-from_st9a0_67","home-game-button-enter-active":"_home-game-button-enter-active_st9a0_71","home-game-button-leave-active":"_home-game-button-leave-active_st9a0_72"},ee={__name:"animation",props:{animationStyle:Object,name:String,startAnimation:{type:Boolean,default:!1}},setup(d){const e=d,t=ye(!e.startAnimation),i=$(()=>{if(e.animationStyle[`${e.name}-enter-from`])return e.animationStyle[`${e.name}-enter-from`]}),a=$(()=>{if(e.animationStyle[`${e.name}-enter-to`])return e.animationStyle[`${e.name}-enter-to`]}),n=$(()=>{if(e.animationStyle[`${e.name}-enter-active`])return e.animationStyle[`${e.name}-enter-active`]}),o=$(()=>{if(e.animationStyle[`${e.name}-leave-from`])return e.animationStyle[`${e.name}-leave-from`]}),s=$(()=>{if(e.animationStyle[`${e.name}-leave-to`])return e.animationStyle[`${e.name}-leave-to`]}),h=$(()=>{if(e.animationStyle[`${e.name}-leave-active`])return e.animationStyle[`${e.name}-leave-active`]});return rt(()=>{t.value||(t.value=!0)}),(r,l)=>(z(),Ee(ro,{"enter-from-class":i.value,"enter-to-class":a.value,"enter-active-class":n.value,"leave-from-class":o.value,"leave-to-class":s.value,"leave-active-class":h.value},{default:Q(()=>[t.value?Ts(r.$slots,"default",{key:0}):Te("",!0)]),_:3},8,["enter-from-class","enter-to-class","enter-active-class","leave-from-class","leave-to-class","leave-active-class"]))}},Ac={__name:"main",setup(d){const e=it(),t=$(()=>e.state.user),i=di();return(a,n)=>(z(),Z("div",{class:S({[x(He).home]:!0})},[L("div",{class:S({[x(He)["home-user"]]:!0})},[U(ee,{name:"home-user-avatar","animation-style":x(Zi),"start-animation":!0},{default:Q(()=>[L("div",{class:S({[x(He).avatar]:!0})},[L("div",{class:S({[x(He)["avatar-img"]]:!0}),style:Bt({"background-image":`url(${t.value.avatar}), url(${x(la)})`})},null,6)],2)]),_:1},8,["animation-style"]),U(ee,{name:"home-user-username","animation-style":x(Zi),"start-animation":!0},{default:Q(()=>[L("div",{class:S({[x(He).username]:!0})},Se(t.value.bandName),3)]),_:1},8,["animation-style"]),U(ee,{name:"home-user-balance","animation-style":x(Zi),"start-animation":!0},{default:Q(()=>[L("div",{class:S({[x(He).balance]:!0})},[L("div",{class:S({[x(He)["balance-icon"]]:!0})},[U(Ne,{class:S({[x(He)["styled-icon"]]:!0}),name:"music-alt"},null,8,["class"])],2),L("span",{class:S({[x(He).amount]:!0})},Se(x(Vi)(t.value.balance)),3)],2)]),_:1},8,["animation-style"])],2),L("div",{class:S({[x(He)["home-game"]]:!0})},[U(ee,{name:"home-game-card-game","animation-style":x(Zi),"start-animation":!0},{default:Q(()=>[L("div",{class:S({[x(He)["card-game"]]:!0})},[L("div",{class:S({[x(He).bottom]:!0})},[L("div",{class:S({[x(He).info]:!0})},[L("div",{class:S({[x(He).name]:!0})},"Drop game",2),L("div",{class:S({[x(He).amount]:!0})},[U(Ne,{class:S({[x(He)["styled-icon"]]:!0}),name:"gradient-background-music-alt"},null,8,["class"]),L("span",{class:S({[x(He).text]:!0})},Se(x(Vi)(t.value.balance)),3)],2)],2),L("button",{type:"button",class:S({[x(He)["button-play"]]:!0}),onClick:n[0]||(n[0]=()=>x(i).push("/game"))},[L("span",{class:S({[x(He).name]:!0})},"Play",2),U(Ne,{class:S({[x(He)["styled-icon"]]:!0}),name:"game-play"},null,8,["class"])],2)],2)],2)]),_:1},8,["animation-style"]),U(ee,{name:"home-game-button","animation-style":x(Zi),"start-animation":!0},{default:Q(()=>[U(Jt,{class:S({[x(ft)["d-none"]]:!0}),icon:"rock",name:"Letâ€™s rock"},null,8,["class"])]),_:1},8,["animation-style"])],2)],2))}},oi=(d,e)=>(d=Math.ceil(d),e=Math.floor(e),Math.floor(Math.random()*(e-d+1))+d),Sc="_loader_1jvqw_4",Ec="_rotation360_1jvqw_1",Mc={loader:Sc,rotation360:Ec},Di={__name:"circle-loader",props:{borderSize:{type:Number,required:!1,default:4},width:{type:Number,required:!1,default:30},height:{type:Number,required:!1,default:30}},setup(d){return(e,t)=>(z(),Z("div",{class:S({[x(Mc).loader]:!0}),style:Bt({"--circle-loader-border-size":d.borderSize+"px",width:d.width+"px",height:d.height+"px"})},null,6))}};_t`
	query getBalance {
		balance {
			amount
		}
	}
`;const Tc=_t`
	mutation ($initData: String) {
		initGame(initData: $initData) {
			is_register,
			name,
			avatar,
			default_avatar,
			temporary_auth_token
		}
	}
`,Ic=_t`
	mutation ($bandName: String) {
		checkingAvailabilityBandName(bandName: $bandName) {
			available
		}
	}
`,Lc=_t`
	mutation ($initData: String, $bandName: String, $avatar: String, $refCode: String) {
		createBand(initData: $initData, bandName: $bandName, avatar: $avatar, refCode: $refCode) {
			success
		}
	}
`,Rc=_t`
	mutation ($initData: String) {
		initUser(initData: $initData) {
			telegram_id,
			avatar,
			name,
			bandName,
			balance,
			band {
				code,
				available
			},
			token,
			available_daily_rewards {
				status,
				amount
			}
		}
	}
`,Bc=_t`
	mutation {
		claimDailyRewards {
			amount,
			balance
		}
	}
`,Fc=_t`
	query getTasks {
		tasks {
            own {
                id,
				type,
                title,
                reward,
                info {
                    type,
                    link,
					amount,
					count
                },
                claim
            },
            other {
                id,
				type,
                title,
                reward,
                info {
                    type,
                    link,
					amount,
					count
                },
                claim
            }
        }
	}
`,Pc=_t`
	mutation ($tasks_id: ID) {
		claimTasks(tasks_id: $tasks_id) {
			amount,
			balance
		}
	}
`,Oc=_t`
	mutation {
		claimBandEarn {
			amount,
			balance
		}
	}
`,Yc=_t`
	query getBand {
		band {
			available
		}
	}
`,Nc=_t`
	mutation ($page: Int) {
		bandUsers (page: $page) {
			items {
				avatar,
				name,
				amount
			},
			page {
				current,
				total
			},
			count
		}
	}
`,Vc=_t`
	query getDropGameTasks {
		dropGameTracks {
			id,
			image,
			source,
			author,
			name,
			next_timer,
			history_created_at
		}
	}
`,Dc=_t`
	mutation ($notes: Int, $track_id: Int) {
		completeDropGame (notes: $notes, track_id: $track_id) {
			balance,
			amount
		}
	}
`,$e=(d,e,t=null)=>Ve.dispatch("notifications/addItemNotificationsPopup",{id:Mn.v4(),type:d,message:e,...t&&{title:t}}),mn=(d,e=!0)=>{const t="https://t.me/MarshellCryptoBot?start="+d;return e?"https://t.me/share/url?url="+encodeURIComponent(t)+"&text="+encodeURIComponent(`ðŸŽ¶Marshell: Play, Earn - Your Airdrop Adventure Awaits!
ðŸŽReady to earn? Join the airdrop now!`):t},Xc="_item_1xcsj_1",zc="_info_1xcsj_33",Uc="_title_1xcsj_40",qc="_description_1xcsj_45",Gc="_button_1xcsj_56",jc="_name_1xcsj_67",Qe={item:Xc,"left-blocks":"_left-blocks_1xcsj_10","item-icon":"_item-icon_1xcsj_17","styled-icon":"_styled-icon_1xcsj_29",info:zc,title:Uc,description:qc,"right-buttons":"_right-buttons_1xcsj_50",button:Gc,"button-gradient":"_button-gradient_1xcsj_64",name:jc,"button-icon":"_button-icon_1xcsj_73","button-start":"_button-start_1xcsj_82"},Hc={"item-enter-from":"_item-enter-from_ji7za_5","item-leave-to":"_item-leave-to_ji7za_6","item-enter-to":"_item-enter-to_ji7za_10","item-leave-from":"_item-leave-from_ji7za_11","item-enter-active":"_item-enter-active_ji7za_15","item-leave-active":"_item-leave-active_ji7za_16"},Wc=["disabled"],Zc={__name:"item",props:{item_id:Number,animation_id:Number,type:String,title:String,reward:Number,info:Object,claim:Boolean},setup(d){const e=d,t=it(),i=$(()=>t.state.user),a=$(()=>{const _=e.info;return _.type==="balance"?(i.value.balance>_.amount?_.amount:i.value.balance)+"/"+_.amount+" notes. Get "+e.reward+" notes":_.type==="band"?(_.count>_.amount?_.amount:_.count)+"/"+_.amount+" friends. Get "+e.reward+" notes":"Get "+e.reward+" notes"}),n=$(()=>e.type==="telegram"||e.type==="youtube"||e.type==="instagram"||e.type==="x"?"social-"+e.type:e.type==="balance"?"white-music-alt":e.type==="band"?"band":e.type),o=Rs(),{open:s}=Is(),h=Ls(),{mutate:r,onError:l}=Qt(Pc,()=>({variables:{tasks_id:e.item_id}})),c=ye(!1),f=$(()=>{const _=e.info;return!!(_.type==="balance"||_.type==="band"&&_.count>=_.amount||_.type==="telegram-wallet"&&h.value)}),u=ye(f.value),g=Xe("arr-item-change-claim"),p=()=>{if(!(c.value||e.claim))return u.value?w():b()},v=()=>{const _=e.info;switch(_.type){case"link":return o.openLink(_.link);case"telegram-subscribe":return o.openTelegramLink(_.link);case"telegram-boost":return o.openTelegramLink(_.link);case"telegram-wallet":return h.value?w():s();case"band":return o.openTelegramLink(mn(i.value.band.code));default:return}},b=()=>{if(e.claim||c.value||u.value)return;const _=e.info;if(c.value=!0,v(),_.type==="link")return setTimeout(()=>{u.value=!0,c.value=!1},oi(5*1e3,7*1e3));(_.type==="band"&&_.count>=_.amount||_.type!=="band")&&(u.value=!0),c.value=!1},w=async()=>{if(e.claim||c.value||!u.value)return;c.value=!0;const _=async()=>{if(e.info.type==="telegram-wallet"&&!h.value)return c.value=!1,$e("error","Link Telegram Wallet to complete this task");const k=await r();if(!k||!k.data||!k.data.claimTasks)return;const C=k.data.claimTasks;return g(e.item_id),c.value=!1,await t.dispatch("user/setUserBalance",C.balance),$e("success","You got +"+C.amount+" notes!")};return setTimeout(()=>_(),oi(1*1e3,4*1e3))};return l(_=>{c.value=!1,$e("error",_.message)}),(_,y)=>(z(),Ee(ee,{name:"item","animation-style":x(Hc),style:Bt({"--tasks-item-animation-ms":100+e.animation_id*100*1.5+"ms"}),"start-animation":!0},{default:Q(()=>[L("div",{class:S({[x(Qe).item]:!0})},[L("div",{class:S({[x(Qe)["left-blocks"]]:!0})},[L("div",{class:S({[x(Qe)["item-icon"]]:!0})},[U(Ne,{class:S({[x(Qe)["styled-icon"]]:!0}),name:n.value},null,8,["class","name"])],2),L("div",{class:S({[x(Qe).info]:!0})},[L("div",{class:S({[x(Qe).title]:!0})},Se(e.title),3),L("div",{class:S({[x(Qe).description]:!0})},Se(a.value),3)],2)],2),L("div",{class:S({[x(Qe)["right-buttons"]]:!0})},[u.value&&!e.claim&&!f.value?(z(),Z("button",{key:0,type:"button",class:S({[x(Qe).button]:!0,[x(Qe)["button-start"]]:!0}),onClick:v},[L("span",{class:S({[x(Qe).name]:!0})},"Open",2)],2)):Te("",!0),e.claim?(z(),Z("button",{key:2,type:"button",class:S({[x(Qe).button]:!0,[x(Qe)["button-icon"]]:!0}),disabled:!0,onClick:p},[U(Ne,{class:S({[x(Qe)["styled-icon"]]:!0}),name:"circle-check"},null,8,["class"])],2)):(z(),Z("button",{key:1,type:"button",class:S({[x(Qe).button]:!0,[x(Qe)["button-start"]]:!u.value,[x(Qe)["button-gradient"]]:u.value,[x(ft)["border-gradient"]]:u.value,[x(Qe)["button-icon"]]:c.value}),disabled:c.value||e.info.type==="balance"&&i.value.balance<e.info.amount,onClick:p},[c.value?(z(),Ee(Di,{key:0,width:15,height:15,"border-size":2})):(z(),Z("span",{key:1,class:S({[x(Qe).name]:!0})},Se(u.value?"Claim":e.info.type==="band"?"Invite":"Start"),3))],10,Wc))],2)],2)]),_:1},8,["animation-style","style"]))}},$c="_title_1fa4z_9",Kc="_amount_1fa4z_15",Qc="_description_1fa4z_18",Ci={"tasks-category":"_tasks-category_1fa4z_1","tasks-header":"_tasks-header_1fa4z_6",title:$c,amount:Kc,description:Qc,"tasks-list":"_tasks-list_1fa4z_23"},ns={"tasks-header-title-enter-from":"_tasks-header-title-enter-from_1clzb_1","tasks-header-title-leave-to":"_tasks-header-title-leave-to_1clzb_2","tasks-header-title-enter-to":"_tasks-header-title-enter-to_1clzb_6","tasks-header-title-leave-from":"_tasks-header-title-leave-from_1clzb_7","tasks-header-title-enter-active":"_tasks-header-title-enter-active_1clzb_11","tasks-header-title-leave-active":"_tasks-header-title-leave-active_1clzb_12","tasks-header-description-enter-from":"_tasks-header-description-enter-from_1clzb_16","tasks-header-description-leave-to":"_tasks-header-description-leave-to_1clzb_17","tasks-header-description-enter-to":"_tasks-header-description-enter-to_1clzb_21","tasks-header-description-leave-from":"_tasks-header-description-leave-from_1clzb_22","tasks-header-description-enter-active":"_tasks-header-description-enter-active_1clzb_26","tasks-header-description-leave-active":"_tasks-header-description-leave-active_1clzb_27"},Jc={__name:"category",props:{title:String,description:String,items:Array},setup(d){const e=d,t=ye(e.items),i=$(()=>t.value.sort((a,n)=>a.claim-n.claim));return st("arr-item-change-claim",a=>{const n=t.value.findIndex(o=>o.id===a);n!==-1&&(t.value[n].claim=!0)}),(a,n)=>e.items.length>0?(z(),Z("div",{key:0,class:S({[x(Ci)["tasks-category"]]:!0})},[L("div",{class:S({[x(Ci)["tasks-header"]]:!0})},[U(ee,{name:"tasks-header-title","animation-style":x(ns),"start-animation":!0},{default:Q(()=>[L("div",{class:S({[x(Ci).title]:!0})},[An(Se(e.title)+" ",1),L("span",{class:S({[x(Ci).amount]:!0})},"("+Se(i.value.filter(o=>!o.claim).length)+")",3)],2)]),_:1},8,["animation-style"]),U(ee,{name:"tasks-header-description","animation-style":x(ns),"start-animation":!0},{default:Q(()=>[L("div",{class:S({[x(Ci).description]:!0})},Se(e.description),3)]),_:1},8,["animation-style"])],2),L("div",{class:S({[x(Ci)["tasks-list"]]:!0})},[(z(!0),Z(It,null,gi(i.value,(o,s)=>(z(),Ee(Zc,{key:o.id,item_id:o.id,animation_id:s,type:o.type,title:o.title,reward:o.reward,info:o.info,claim:o.claim},null,8,["item_id","animation_id","type","title","reward","info","claim"]))),128))],2)],2)):Te("",!0)}},eh="_tasks_1ho8h_1",Wa={tasks:eh,"now-loading":"_now-loading_1ho8h_5","tasks-main-category":"_tasks-main-category_1ho8h_11"},th={"tasks-loading-enter-from":"_tasks-loading-enter-from_1r0jz_1","tasks-loading-leave-to":"_tasks-loading-leave-to_1r0jz_2","tasks-loading-enter-to":"_tasks-loading-enter-to_1r0jz_5","tasks-loading-leave-from":"_tasks-loading-leave-from_1r0jz_6","tasks-loading-enter-active":"_tasks-loading-enter-active_1r0jz_9","tasks-loading-leave-active":"_tasks-loading-leave-active_1r0jz_10"},ih={__name:"main",setup(d){const e=di(),t=it(),i=$(()=>t.state.tasks),a=ye(!0),{load:n,onError:o}=Sn(Fc,{},{fetchPolicy:"no-cache"}),s={own:{title:"Marshell socials",description:"Become part of the vibrant Marshell community, discover exciting updates, and find your people."},other:{title:"Tasks",description:"Enjoy instant gratification with points awarded for every task finished."}},h=async()=>{const r=await n();if(!r||!r.tasks)return;const l=r.tasks;await t.dispatch("tasks/setTasksOwnList",l.own),await t.dispatch("tasks/setTasksOtherList",l.other),a.value=!1};return o(()=>(e.push("/"),$e("error","An error occurred while loading tasks"))),rt(()=>h()),(r,l)=>(z(),Z("div",{class:S({[x(Wa).tasks]:!0,[x(Wa)["now-loading"]]:a.value})},[a.value?(z(),Ee(ee,{key:0,name:"tasks-loading","animation-style":x(th),"start-animation":!0},{default:Q(()=>[U(Di,{"border-size":5,width:48,height:48})]),_:1},8,["animation-style"])):(z(!0),Z(It,{key:1},gi(Object.keys(i.value),c=>(z(),Ee(Jc,{class:S({[x(Wa)["tasks-main-category"]]:!0}),title:s[c].title,description:s[c].description,items:i.value[c]},null,8,["class","title","description","items"]))),256))],2))}},ah="_balance_f8uz1_1",nh="_info_f8uz1_43",sh="_title_f8uz1_50",rh="_amount_f8uz1_56",oh="_balanceAmountLoading_f8uz1_1",kt={balance:ah,"left-blocks":"_left-blocks_f8uz1_15","balance-icon":"_balance-icon_f8uz1_23","styled-icon":"_styled-icon_f8uz1_37",info:nh,title:sh,"amount-value":"_amount-value_f8uz1_56",amount:rh,"amount-loading":"_amount-loading_f8uz1_71",balanceAmountLoading:oh,"balance-button":"_balance-button_f8uz1_87"},lh={"balance-enter-from":"_balance-enter-from_1b9pe_1","balance-leave-to":"_balance-leave-to_1b9pe_2","balance-enter-to":"_balance-enter-to_1b9pe_6","balance-leave-from":"_balance-leave-from_1b9pe_7","balance-enter-active":"_balance-enter-active_1b9pe_11","balance-leave-active":"_balance-leave-active_1b9pe_12"},ch={__name:"balance",setup(d){const e=it(),t=$(()=>e.state.user),i=ye(!1),a=Xe("band-loading"),{mutate:n,onError:o}=Qt(Oc,()=>({variables:{}})),s=async()=>{const h=await n();if(!h||!h.data||!h.data.claimBandEarn)return;const r=h.data.claimBandEarn;return i.value=!1,await e.dispatch("user/setUserBandAvailable",0),await e.dispatch("user/setUserBalance",r.balance),$e("success","You got +"+r.amount+" notes!")};return o(h=>(i.value=!1,$e("error",h.message))),(h,r)=>(z(),Ee(ee,{name:"balance","animation-style":x(lh),"start-animation":!0},{default:Q(()=>[L("div",{class:S({[x(kt).balance]:!0,[x(ft)["border-gradient"]]:!0})},[L("div",{class:S({[x(kt)["left-blocks"]]:!0})},[L("div",{class:S({[x(kt)["balance-icon"]]:!0,[x(ft)["border-gradient"]]:!0})},[U(Ne,{class:S({[x(kt)["styled-icon"]]:!0}),name:"wallet"},null,8,["class"])],2),L("div",{class:S({[x(kt).info]:!0})},[L("div",{class:S({[x(kt).title]:!0})},"You earned",2),L("div",{class:S({[x(kt)["amount-value"]]:!0})},[U(Ne,{class:S({[x(kt)["styled-icon"]]:!0}),name:"opacity-background-music-alt"},null,8,["class"]),L("span",{class:S({[x(kt).amount]:!0,[x(kt)["amount-loading"]]:x(a)})},Se(x(Vi)(t.value.band.available)),3)],2)],2)],2),U(Jt,{disabled:x(a)||i.value||!t.value.band.available,class:S({[x(kt)["balance-button"]]:!0}),name:"Claim",onClick:s},null,8,["disabled","class"])],2)]),_:1},8,["animation-style"]))}},hh="_avatar_ivynz_11",dh="_info_ivynz_20",uh="_name_ivynz_27",mh="_amount_ivynz_32",ii={"user-item":"_user-item_ivynz_1",avatar:hh,info:dh,name:uh,"amount-value":"_amount-value_ivynz_32","styled-icon":"_styled-icon_ivynz_43",amount:mh},fh={__name:"user-item",props:{avatar:String,name:String,amount:Number},setup(d){const e=d;return(t,i)=>(z(),Z("div",{class:S({[x(ii)["user-item"]]:!0})},[L("div",{class:S({[x(ii).avatar]:!0}),style:Bt({backgroundImage:`url(${e.avatar}), url(${x(la)})`})},null,6),L("div",{class:S({[x(ii).info]:!0})},[L("div",{class:S({[x(ii).name]:!0})},Se(e.name),3),L("div",{class:S({[x(ii)["amount-value"]]:!0})},[L("span",{class:S({[x(ii).name]:!0})},"You got:",2),U(Ne,{class:S({[x(ii)["styled-icon"]]:!0}),name:"gradient-background-music-alt"},null,8,["class"]),L("span",{class:S({[x(ii).amount]:!0})},Se(x(Vi)(e.amount)),3)],2)],2)],2))}},gh="_title_1axt4_4",ph="_amount_1axt4_9",vh="_pagination_1axt4_19",_h="_button_1axt4_25",bh="_name_1axt4_45",yh="_active_1axt4_56",wh="_empty_1axt4_98",xh="_loading_1axt4_112",je={"invited-list":"_invited-list_1axt4_1",title:gh,amount:ph,"list-of-users":"_list-of-users_1axt4_12",pagination:vh,button:_h,"button-arrow":"_button-arrow_1axt4_34",name:bh,active:yh,"styled-icon":"_styled-icon_1axt4_62","pagination-numbers":"_pagination-numbers_1axt4_82","invited-loading":"_invited-loading_1axt4_88",empty:wh,loading:xh,"some-loader":"_some-loader_1axt4_135"},ki={"invited-list-title-enter-from":"_invited-list-title-enter-from_k00v0_1","invited-list-title-leave-to":"_invited-list-title-leave-to_k00v0_2","invited-list-title-enter-to":"_invited-list-title-enter-to_k00v0_6","invited-list-title-leave-from":"_invited-list-title-leave-from_k00v0_7","invited-list-title-enter-active":"_invited-list-title-enter-active_k00v0_11","invited-list-title-leave-active":"_invited-list-title-leave-active_k00v0_12","invited-list-of-users-enter-from":"_invited-list-of-users-enter-from_k00v0_16","invited-list-of-users-leave-to":"_invited-list-of-users-leave-to_k00v0_17","invited-list-of-users-enter-to":"_invited-list-of-users-enter-to_k00v0_21","invited-list-of-users-leave-from":"_invited-list-of-users-leave-from_k00v0_22","invited-list-of-users-enter-active":"_invited-list-of-users-enter-active_k00v0_26","invited-list-of-users-leave-active":"_invited-list-of-users-leave-active_k00v0_27","invited-list-pagination-arrow-left-enter-from":"_invited-list-pagination-arrow-left-enter-from_k00v0_31","invited-list-pagination-arrow-left-leave-to":"_invited-list-pagination-arrow-left-leave-to_k00v0_32","invited-list-pagination-arrow-left-enter-to":"_invited-list-pagination-arrow-left-enter-to_k00v0_35","invited-list-pagination-arrow-left-leave-from":"_invited-list-pagination-arrow-left-leave-from_k00v0_36","invited-list-pagination-arrow-left-enter-active":"_invited-list-pagination-arrow-left-enter-active_k00v0_39","invited-list-pagination-arrow-left-leave-active":"_invited-list-pagination-arrow-left-leave-active_k00v0_40","invited-list-pagination-arrow-right-enter-from":"_invited-list-pagination-arrow-right-enter-from_k00v0_44","invited-list-pagination-arrow-right-leave-to":"_invited-list-pagination-arrow-right-leave-to_k00v0_45","invited-list-pagination-arrow-right-enter-to":"_invited-list-pagination-arrow-right-enter-to_k00v0_48","invited-list-pagination-arrow-right-leave-from":"_invited-list-pagination-arrow-right-leave-from_k00v0_49","invited-list-pagination-arrow-right-enter-active":"_invited-list-pagination-arrow-right-enter-active_k00v0_52","invited-list-pagination-arrow-right-leave-active":"_invited-list-pagination-arrow-right-leave-active_k00v0_53","invited-list-pagination-numbers-enter-from":"_invited-list-pagination-numbers-enter-from_k00v0_57","invited-list-pagination-numbers-leave-to":"_invited-list-pagination-numbers-leave-to_k00v0_58","invited-list-pagination-numbers-enter-to":"_invited-list-pagination-numbers-enter-to_k00v0_61","invited-list-pagination-numbers-leave-from":"_invited-list-pagination-numbers-leave-from_k00v0_62","invited-list-pagination-numbers-enter-active":"_invited-list-pagination-numbers-enter-active_k00v0_65","invited-list-pagination-numbers-leave-active":"_invited-list-pagination-numbers-leave-active_k00v0_66","invited-list-loading-enter-from":"_invited-list-loading-enter-from_k00v0_70","invited-list-loading-leave-to":"_invited-list-loading-leave-to_k00v0_71","invited-list-loading-enter-to":"_invited-list-loading-enter-to_k00v0_75","invited-list-loading-leave-from":"_invited-list-loading-leave-from_k00v0_76","invited-list-loading-enter-active":"_invited-list-loading-enter-active_k00v0_80","invited-list-loading-leave-active":"_invited-list-loading-leave-active_k00v0_81"},Ch=["disabled"],kh=["disabled","onClick"],Ah=["disabled"],Sh={__name:"table",setup(d){const e=ye(!0),t=ye(!1),i=ye([]),a=ye({page:1,total:1}),n=ye(0),o=Xe("layout-scroll"),{mutate:s,onError:h}=Qt(Nc,()=>({variables:{page:a.value.page}})),r=async(g=!1)=>{if(!g&&e.value)return;g&&!e.value?e.value=!0:!g&&!t.value&&(t.value=!0);const p=await s();if(!p||!p.data||!p.data.bandUsers)return;const v=p.data.bandUsers;n.value=v.count,i.value=v.items,a.value={page:v.page.current,total:v.page.total},g?e.value=!1:t.value=!1,g||setTimeout(()=>o.bottom(),1*2)},l=()=>{if(!(e.value||t.value||a.value.page===a.value.total))return a.value.page++,r()},c=()=>{if(!(e.value||t.value||a.value.page===1))return a.value.page--,r()},f=g=>{if(!(e.value||t.value||a.value.page===g||a.value.total<g))return a.value.page=g,r()},u=$(()=>{const g=[];if(a.value.total<=3){for(let w=1;w<=a.value.total;w++)g.push(w);return g}let v=Math.max(1,a.value.page-1),b=Math.min(a.value.total,a.value.page+1);b-v<2&&(v>1?(v=a.value.page-2,b=a.value.page):(v=1,b=3));for(let w=v;w<=b;w++)g.push(w);return g});return h(()=>(e.value&&(e.value=!1),t.value&&(t.value=!1),$e("error","There was an error loading your users from band"))),rt(()=>r(!0)),(g,p)=>(z(),Z("div",{class:S({[x(je)["invited-list"]]:!0})},[e.value?(z(),Ee(ee,{key:0,name:"invited-list-loading","animation-style":x(ki),"start-animation":!0},{default:Q(()=>[L("div",{class:S({[x(je)["invited-loading"]]:!0})},[U(Di,{width:40,height:40})],2)]),_:1},8,["animation-style"])):(z(),Z(It,{key:1},[U(ee,{name:"invited-list-title","animation-style":x(ki),"start-animation":!0},{default:Q(()=>[L("div",{class:S({[x(je).title]:!0})},[p[0]||(p[0]=An(" You invited ")),L("span",{class:S({[x(je).amount]:!0})},"("+Se(n.value)+")",3)],2)]),_:1},8,["animation-style"]),U(ee,{name:"invited-list-of-users","animation-style":x(ki),"start-animation":!0},{default:Q(()=>[L("div",{class:S({[x(je)["list-of-users"]]:!0})},[t.value?(z(),Z("div",{key:0,class:S({[x(je).loading]:!0})},[U(Di,{class:S({[x(je)["some-loader"]]:!0}),width:40,height:40},null,8,["class"])],2)):Te("",!0),i.value.length?(z(!0),Z(It,{key:2},gi(i.value,(v,b)=>(z(),Ee(fh,{key:b,avatar:v.avatar,name:v.name,amount:v.amount},null,8,["avatar","name","amount"]))),128)):(z(),Z("div",{key:1,class:S({[x(je).empty]:!0})},"List is empty",2))],2)]),_:1},8,["animation-style"]),i.value.length>0&&a.value.total!==1?(z(),Z("div",{key:0,class:S({[x(je).pagination]:!0})},[U(ee,{name:"invited-list-pagination-arrow-left","animation-style":x(ki),"start-animation":!0},{default:Q(()=>[L("button",{type:"button",disabled:e.value||t.value||a.value.page===1,class:S({[x(je).button]:!0,[x(je)["button-arrow"]]:!0,[x(ft)["border-gradient"]]:!0}),onClick:c},[U(Ne,{class:S({[x(je)["styled-icon"]]:!0}),name:"pagination-left"},null,8,["class"]),L("span",{class:S({[x(je).name]:!0})},"Back",2)],10,Ch)]),_:1},8,["animation-style"]),U(ee,{name:"invited-list-pagination-numbers","animation-style":x(ki),"start-animation":!0},{default:Q(()=>[L("div",{class:S({[x(je)["pagination-numbers"]]:!0})},[(z(!0),Z(It,null,gi(u.value,(v,b)=>(z(),Z("button",{key:b,type:"button",disabled:e.value||t.value||v===a.value.page,class:S({[x(je).button]:!0,[x(ft)["border-gradient"]]:!0,[x(je).active]:v===a.value.page}),onClick:()=>f(v)},[L("span",{class:S({[x(je).amount]:!0})},Se(v),3)],10,kh))),128))],2)]),_:1},8,["animation-style"]),U(ee,{name:"invited-list-pagination-arrow-right","animation-style":x(ki),"start-animation":!0},{default:Q(()=>[L("button",{type:"button",disabled:e.value||t.value||a.value.total===a.value.page,class:S({[x(je).button]:!0,[x(je)["button-arrow"]]:!0,[x(ft)["border-gradient"]]:!0}),onClick:l},[L("span",{class:S({[x(je).name]:!0})},"Next",2),U(Ne,{class:S({[x(je)["styled-icon"]]:!0}),name:"pagination-right"},null,8,["class"])],10,Ah)]),_:1},8,["animation-style"])],2)):Te("",!0)],64))],2))}},Eh="_band_1nybf_1",Mh="_banner_1nybf_5",Th="_icon_1nybf_14",Ih="_title_1nybf_22",Lh="_features_1nybf_28",Rh="_item_1nybf_34",Bh="_info_1nybf_48",Fh="_name_1nybf_48",Ph="_description_1nybf_54",Oh="_invite_1nybf_60",tt={band:Eh,banner:Mh,icon:Th,title:Ih,features:Lh,item:Rh,"styled-icon":"_styled-icon_1nybf_44",info:Bh,name:Fh,description:Ph,invite:Oh,"invite-share":"_invite-share_1nybf_67","invite-copy":"_invite-copy_1nybf_70"},$i={"band-banner-enter-from":"_band-banner-enter-from_14e0k_1","band-banner-leave-to":"_band-banner-leave-to_14e0k_2","band-banner-enter-to":"_band-banner-enter-to_14e0k_6","band-banner-leave-from":"_band-banner-leave-from_14e0k_7","band-banner-enter-active":"_band-banner-enter-active_14e0k_11","band-banner-leave-active":"_band-banner-leave-active_14e0k_12","band-features-first-item-enter-from":"_band-features-first-item-enter-from_14e0k_16","band-features-first-item-leave-to":"_band-features-first-item-leave-to_14e0k_17","band-features-first-item-enter-to":"_band-features-first-item-enter-to_14e0k_21","band-features-first-item-leave-from":"_band-features-first-item-leave-from_14e0k_22","band-features-first-item-enter-active":"_band-features-first-item-enter-active_14e0k_26","band-features-first-item-leave-active":"_band-features-first-item-leave-active_14e0k_27","band-features-last-item-enter-from":"_band-features-last-item-enter-from_14e0k_31","band-features-last-item-leave-to":"_band-features-last-item-leave-to_14e0k_32","band-features-last-item-enter-to":"_band-features-last-item-enter-to_14e0k_36","band-features-last-item-leave-from":"_band-features-last-item-leave-from_14e0k_37","band-features-last-item-enter-active":"_band-features-last-item-enter-active_14e0k_41","band-features-last-item-leave-active":"_band-features-last-item-leave-active_14e0k_42","band-invite-share-enter-from":"_band-invite-share-enter-from_14e0k_46","band-invite-share-leave-to":"_band-invite-share-leave-to_14e0k_47","band-invite-share-enter-to":"_band-invite-share-enter-to_14e0k_51","band-invite-share-leave-from":"_band-invite-share-leave-from_14e0k_52","band-invite-share-enter-active":"_band-invite-share-enter-active_14e0k_56","band-invite-share-leave-active":"_band-invite-share-leave-active_14e0k_57","band-invite-copy-enter-from":"_band-invite-copy-enter-from_14e0k_61","band-invite-copy-leave-to":"_band-invite-copy-leave-to_14e0k_62","band-invite-copy-enter-to":"_band-invite-copy-enter-to_14e0k_66","band-invite-copy-leave-from":"_band-invite-copy-leave-from_14e0k_67","band-invite-copy-enter-active":"_band-invite-copy-enter-active_14e0k_71","band-invite-copy-leave-active":"_band-invite-copy-leave-active_14e0k_72"},Yh={__name:"main",setup(d){const e=di(),t=it(),i=$(()=>t.state.user),a=Rs(),n=ye(!0);st("band-loading",n);const{load:o,onError:s}=Sn(Yc,{},{fetchPolicy:"no-cache"}),h=()=>a.openTelegramLink(mn(i.value.band.code)),r=()=>($e("info","Invite link copied to clipboard"),navigator.clipboard.writeText(mn(i.value.band.code,!1))),l=async()=>{const c=await o();if(!c||!c.band)return;const f=c.band;await t.dispatch("user/setUserBandAvailable",f.available),n.value=!1};return s(()=>(e.push("/"),$e("error","An error occurred while loading band"))),rt(()=>l()),(c,f)=>(z(),Z("div",{class:S({[x(tt).band]:!0})},[U(ee,{name:"band-banner","animation-style":x($i),"start-animation":!0},{default:Q(()=>[L("div",{class:S({[x(tt).banner]:!0})},[L("div",{class:S({[x(tt).icon]:!0})},null,2),L("div",{class:S({[x(tt).title]:!0})},"Invite friends earn notes",2)],2)]),_:1},8,["animation-style"]),L("div",{class:S({[x(tt).features]:!0})},[U(ee,{name:"band-features-first-item","animation-style":x($i),"start-animation":!0},{default:Q(()=>[L("div",{class:S({[x(tt).item]:!0})},[U(Ne,{class:S({[x(tt)["styled-icon"]]:!0}),name:"band-features-icon"},null,8,["class"]),L("div",{class:S({[x(tt).info]:!0})},[L("div",{class:S({[x(tt).name]:!0})},"Share your invite link",2),L("div",{class:S({[x(tt).description]:!0})},"To get more rewards",2)],2)],2)]),_:1},8,["animation-style"]),U(ee,{name:"band-features-last-item","animation-style":x($i),"start-animation":!0},{default:Q(()=>[L("div",{class:S({[x(tt).item]:!0})},[U(Ne,{class:S({[x(tt)["styled-icon"]]:!0}),name:"band-features-icon"},null,8,["class"]),L("div",{class:S({[x(tt).info]:!0})},[L("div",{class:S({[x(tt).name]:!0})},"Get +1000 notes for new registration",2),L("div",{class:S({[x(tt).description]:!0})},"Plus extra receive 10% of your mate Notes ",2)],2)],2)]),_:1},8,["animation-style"])],2),U(ch),L("div",{class:S({[x(tt).invite]:!0})},[U(ee,{name:"band-invite-share","animation-style":x($i),"start-animation":!0},{default:Q(()=>[U(Jt,{class:S({[x(tt)["invite-share"]]:!0}),icon:"band-share-user",name:"Invite to band",onClick:h},null,8,["class"])]),_:1},8,["animation-style"]),U(ee,{name:"band-invite-copy","animation-style":x($i),"start-animation":!0},{default:Q(()=>[U(Jt,{class:S({[x(tt)["invite-copy"]]:!0}),icon:"copy","icon-width":24,onClick:r},null,8,["class"])]),_:1},8,["animation-style"])],2),U(Sh)],2))}},Nh="_wallet_bzp1n_1",Vh="_name_bzp1n_27",Dh="_describe_bzp1n_28",Ot={wallet:Nh,"wallet-icon":"_wallet-icon_bzp1n_8","styled-icon":"_styled-icon_bzp1n_20","coming-text":"_coming-text_bzp1n_24",name:Vh,describe:Dh,"wallet-buttons":"_wallet-buttons_bzp1n_35","button-logout":"_button-logout_bzp1n_42","button-wallet-connect":"_button-wallet-connect_bzp1n_58"},da={"wallet-big-icon-enter-from":"_wallet-big-icon-enter-from_1bh0c_1","wallet-big-icon-leave-to":"_wallet-big-icon-leave-to_1bh0c_2","wallet-big-icon-enter-to":"_wallet-big-icon-enter-to_1bh0c_6","wallet-big-icon-leave-from":"_wallet-big-icon-leave-from_1bh0c_7","wallet-big-icon-enter-active":"_wallet-big-icon-enter-active_1bh0c_11","wallet-big-icon-leave-active":"_wallet-big-icon-leave-active_1bh0c_12","wallet-coming-text-name-enter-from":"_wallet-coming-text-name-enter-from_1bh0c_16","wallet-coming-text-name-leave-to":"_wallet-coming-text-name-leave-to_1bh0c_17","wallet-coming-text-name-enter-to":"_wallet-coming-text-name-enter-to_1bh0c_21","wallet-coming-text-name-leave-from":"_wallet-coming-text-name-leave-from_1bh0c_22","wallet-coming-text-name-enter-active":"_wallet-coming-text-name-enter-active_1bh0c_26","wallet-coming-text-name-leave-active":"_wallet-coming-text-name-leave-active_1bh0c_27","wallet-coming-text-describe-enter-from":"_wallet-coming-text-describe-enter-from_1bh0c_31","wallet-coming-text-describe-leave-to":"_wallet-coming-text-describe-leave-to_1bh0c_32","wallet-coming-text-describe-enter-to":"_wallet-coming-text-describe-enter-to_1bh0c_36","wallet-coming-text-describe-leave-from":"_wallet-coming-text-describe-leave-from_1bh0c_37","wallet-coming-text-describe-enter-active":"_wallet-coming-text-describe-enter-active_1bh0c_41","wallet-coming-text-describe-leave-active":"_wallet-coming-text-describe-leave-active_1bh0c_42","wallet-buttons-enter-from":"_wallet-buttons-enter-from_1bh0c_46","wallet-buttons-leave-to":"_wallet-buttons-leave-to_1bh0c_47","wallet-buttons-enter-to":"_wallet-buttons-enter-to_1bh0c_51","wallet-buttons-leave-from":"_wallet-buttons-leave-from_1bh0c_52","wallet-buttons-enter-active":"_wallet-buttons-enter-active_1bh0c_56","wallet-buttons-leave-active":"_wallet-buttons-leave-active_1bh0c_57"},Xh={__name:"main",setup(d){const{open:e}=Is(),t=Ls(),i=yo(),a=()=>{if(!t.value)return e()},n=()=>{var o;(o=i.tonConnectUI.value)==null||o.disconnect()};return(o,s)=>(z(),Z("div",{class:S({[x(Ot).wallet]:!0})},[U(ee,{name:"wallet-big-icon","animation-style":x(da),"start-animation":!0},{default:Q(()=>[L("div",{class:S({[x(Ot)["wallet-icon"]]:!0})},[U(Ne,{class:S({[x(Ot)["styled-icon"]]:!0}),name:"gradient-turquoise-wallet"},null,8,["class"])],2)]),_:1},8,["animation-style"]),L("div",{class:S({[x(Ot)["coming-text"]]:!0})},[U(ee,{name:"wallet-coming-text-name","animation-style":x(da),"start-animation":!0},{default:Q(()=>[L("div",{class:S({[x(Ot).name]:!0})},"Wallet",2)]),_:1},8,["animation-style"]),U(ee,{name:"wallet-coming-text-describe","animation-style":x(da),"start-animation":!0},{default:Q(()=>[L("div",{class:S({[x(Ot).describe]:!0})},"Coming soon...",2)]),_:1},8,["animation-style"])],2),U(ee,{name:"wallet-buttons","animation-style":x(da),"start-animation":!0},{default:Q(()=>[L("div",{class:S({[x(Ot)["wallet-buttons"]]:!0})},[U(Jt,{class:S({[x(Ot)["button-wallet-connect"]]:!0}),icon:"wallet",name:x(t)?x(t).substring(0,18)+"...":"Connect wallet",onClick:a},null,8,["class","name"]),x(t)?(z(),Z("button",{key:0,type:"button",class:S({[x(Ot)["button-logout"]]:!0}),onClick:n},[U(Ne,{class:S({[x(Ot)["styled-icon"]]:!0}),name:"logout"},null,8,["class"])],2)):Te("",!0)],2)]),_:1},8,["animation-style"])],2))}},zh=async()=>{Ve.state.components.header.visible||await Ve.dispatch("setComponentsHeaderVisible",!0)},Uh=async()=>{if(Ve.state.components.header.visible)return await Ve.dispatch("setComponentsHeaderVisible",!1)},qh=async()=>{Ve.state.components.menu.visible||await Ve.dispatch("setComponentsMenuVisible",!0)},Gh=async()=>{if(Ve.state.components.menu.visible)return await Ve.dispatch("setComponentsMenuVisible",!1)},ir=async()=>{await zh(),await qh()},jh=async()=>{await Uh(),await Gh()},Kt=async(d=null,e=null)=>{const t=Ve.state.modal;t.closeAnimation||!t.active&&!d||(t.active?(await Ve.dispatch("modal/setModalCloseAnimation",!0),setTimeout(()=>{Ve.dispatch("modal/setModalCloseAnimation",!1),d&&d!==t.selected?(e&&Ve.dispatch("modal/setModalProps",e),Ve.dispatch("modal/setModalActive",d)):Ve.dispatch("modal/setModalActive")},200)):(e&&await Ve.dispatch("modal/setModalProps",e),await Ve.dispatch("modal/setModalActive",d)))},Ai={"animation-start-game":"_animation-start-game_mqspj_1","animation-num":"_animation-num_mqspj_13","text-num":"_text-num_mqspj_20"},Ki={"start-game-enter-from":"_start-game-enter-from_1ewya_1","start-game-leave-to":"_start-game-leave-to_1ewya_2","start-game-enter-to":"_start-game-enter-to_1ewya_5","start-game-leave-from":"_start-game-leave-from_1ewya_6","start-game-enter-active":"_start-game-enter-active_1ewya_9","start-game-leave-active":"_start-game-leave-active_1ewya_12","animation-num-enter-from":"_animation-num-enter-from_1ewya_16","animation-num-leave-to":"_animation-num-leave-to_1ewya_20","animation-num-leave-from":"_animation-num-leave-from_1ewya_21","animation-num-enter-to":"_animation-num-enter-to_1ewya_24","animation-num-enter-active":"_animation-num-enter-active_1ewya_28","animation-num-leave-active":"_animation-num-leave-active_1ewya_31"},Hh={__name:"start-game",setup(d){const e=ye(5),t=ye();return rt(()=>{e.value--,t.value=setInterval(()=>{e.value--,e.value===1&&(setTimeout(()=>{e.value--},50),clearInterval(t.value))},700)}),(i,a)=>(z(),Ee(ee,{name:"start-game","animation-style":x(Ki)},{default:Q(()=>[e.value>0?(z(),Z("div",{key:0,class:S({[x(Ai)["animation-start-game"]]:!0})},[U(ee,{name:"animation-num","animation-style":x(Ki)},{default:Q(()=>[e.value===1?(z(),Z("div",{key:0,class:S({[x(Ai)["animation-num"]]:!0,[x(Ai)["text-num"]]:!0})}," Letâ€™s rock ",2)):Te("",!0)]),_:1},8,["animation-style"]),U(ee,{name:"animation-num","animation-style":x(Ki)},{default:Q(()=>[e.value===2?(z(),Z("div",{key:0,class:S({[x(Ai)["animation-num"]]:!0})},"1",2)):Te("",!0)]),_:1},8,["animation-style"]),U(ee,{name:"animation-num","animation-style":x(Ki)},{default:Q(()=>[e.value===3?(z(),Z("div",{key:0,class:S({[x(Ai)["animation-num"]]:!0})},"2",2)):Te("",!0)]),_:1},8,["animation-style"]),U(ee,{name:"animation-num","animation-style":x(Ki)},{default:Q(()=>[e.value===4?(z(),Z("div",{key:0,class:S({[x(Ai)["animation-num"]]:!0})},"3",2)):Te("",!0)]),_:1},8,["animation-style"])],2)):Te("",!0)]),_:1},8,["animation-style"]))}},Wh="_fadePersonaMusicAlt_7dc8r_1",Za={"music-alt":"_music-alt_7dc8r_4",fadePersonaMusicAlt:Wh,"music-alt-icon":"_music-alt-icon_7dc8r_19","size-s":"_size-s_7dc8r_27","size-m":"_size-m_7dc8r_31","size-l":"_size-l_7dc8r_35","size-xl":"_size-xl_7dc8r_39"},Zh={__name:"music-alt",props:{size:String,rotate:Number,top:Number,left:Number},setup(d){const e=Bs(),t=d;return rt(()=>e.impactOccurred("medium")),(i,a)=>(z(),Z("div",{class:S({[x(Za)["music-alt"]]:!0,[x(Za)["size-"+t.size]]:!0}),style:Bt({"--drop-game-animation-note-rotate":`${t.rotate}deg`,transform:`rotate(${t.rotate}deg) translateY(0)`,top:`${t.top}%`,left:`${t.left}%`})},[L("div",{class:S({[x(Za)["music-alt-icon"]]:!0})},null,2)],6))}},$h="_button_t43m9_59",Kh="_name_t43m9_78",Qh="_animation_t43m9_143",Jh="_gameHintTap_t43m9_1",ed="_player_t43m9_188",td="_balance_t43m9_204",id="_amount_t43m9_238",Oe={"drop-game-body":"_drop-game-body_t43m9_1","drop-game-header":"_drop-game-header_t43m9_12","drop-game-header-audio-player":"_drop-game-header-audio-player_t43m9_18","progress-line":"_progress-line_t43m9_31","current-time":"_current-time_t43m9_41","total-time":"_total-time_t43m9_42","drop-game-header-main":"_drop-game-header-main_t43m9_48","drop-game-header-show-audio-player":"_drop-game-header-show-audio-player_t43m9_56",button:$h,"styled-icon":"_styled-icon_t43m9_70",name:Kh,"right-header":"_right-header_t43m9_83","button-mini":"_button-mini_t43m9_95","drop-game-alert":"_drop-game-alert_t43m9_113","drop-game-alert-content":"_drop-game-alert-content_t43m9_118","drop-game-alert-scale":"_drop-game-alert-scale_t43m9_132","drop-game-content":"_drop-game-content_t43m9_135",animation:Qh,"list-of-notes-animations":"_list-of-notes-animations_t43m9_151","animation-tap-hint":"_animation-tap-hint_t43m9_159","tap-icon":"_tap-icon_t43m9_167",gameHintTap:Jh,player:ed,"player-loaded":"_player-loaded_t43m9_200",balance:td,"balance-icon":"_balance-icon_t43m9_221",amount:id},ai={"drop-game-header-audio-player-enter-from":"_drop-game-header-audio-player-enter-from_18df1_1","drop-game-header-audio-player-leave-to":"_drop-game-header-audio-player-leave-to_18df1_2","drop-game-header-audio-player-enter-to":"_drop-game-header-audio-player-enter-to_18df1_6","drop-game-header-audio-player-leave-from":"_drop-game-header-audio-player-leave-from_18df1_7","drop-game-header-audio-player-enter-active":"_drop-game-header-audio-player-enter-active_18df1_11","drop-game-header-audio-player-leave-active":"_drop-game-header-audio-player-leave-active_18df1_12","drop-game-header-main-button-home-enter-from":"_drop-game-header-main-button-home-enter-from_18df1_16","drop-game-header-main-button-home-leave-to":"_drop-game-header-main-button-home-leave-to_18df1_17","drop-game-header-main-button-home-enter-to":"_drop-game-header-main-button-home-enter-to_18df1_21","drop-game-header-main-button-home-leave-from":"_drop-game-header-main-button-home-leave-from_18df1_22","drop-game-header-main-button-home-enter-active":"_drop-game-header-main-button-home-enter-active_18df1_26","drop-game-header-main-button-home-leave-active":"_drop-game-header-main-button-home-leave-active_18df1_27","drop-game-header-main-select-track-enter-from":"_drop-game-header-main-select-track-enter-from_18df1_31","drop-game-header-main-select-track-leave-to":"_drop-game-header-main-select-track-leave-to_18df1_32","drop-game-header-main-select-track-enter-to":"_drop-game-header-main-select-track-enter-to_18df1_36","drop-game-header-main-select-track-leave-from":"_drop-game-header-main-select-track-leave-from_18df1_37","drop-game-header-main-select-track-enter-active":"_drop-game-header-main-select-track-enter-active_18df1_41","drop-game-header-main-select-track-leave-active":"_drop-game-header-main-select-track-leave-active_18df1_42","drop-game-header-main-right-mini-enter-from":"_drop-game-header-main-right-mini-enter-from_18df1_46","drop-game-header-main-right-mini-leave-to":"_drop-game-header-main-right-mini-leave-to_18df1_47","drop-game-header-main-right-mini-enter-to":"_drop-game-header-main-right-mini-enter-to_18df1_51","drop-game-header-main-right-mini-leave-from":"_drop-game-header-main-right-mini-leave-from_18df1_52","drop-game-header-main-right-mini-enter-active":"_drop-game-header-main-right-mini-enter-active_18df1_56","drop-game-header-main-right-mini-leave-active":"_drop-game-header-main-right-mini-leave-active_18df1_57","drop-game-alert-content-enter-from":"_drop-game-alert-content-enter-from_18df1_61","drop-game-alert-content-leave-to":"_drop-game-alert-content-leave-to_18df1_62","drop-game-alert-content-enter-to":"_drop-game-alert-content-enter-to_18df1_66","drop-game-alert-content-leave-from":"_drop-game-alert-content-leave-from_18df1_67","drop-game-alert-content-enter-active":"_drop-game-alert-content-enter-active_18df1_71","drop-game-alert-content-leave-active":"_drop-game-alert-content-leave-active_18df1_72","drop-game-content-animation-tap-hint-enter-from":"_drop-game-content-animation-tap-hint-enter-from_18df1_76","drop-game-content-animation-tap-hint-leave-to":"_drop-game-content-animation-tap-hint-leave-to_18df1_77","drop-game-content-animation-tap-hint-enter-to":"_drop-game-content-animation-tap-hint-enter-to_18df1_81","drop-game-content-animation-tap-hint-leave-from":"_drop-game-content-animation-tap-hint-leave-from_18df1_82","drop-game-content-animation-tap-hint-enter-active":"_drop-game-content-animation-tap-hint-enter-active_18df1_86","drop-game-content-animation-tap-hint-leave-active":"_drop-game-content-animation-tap-hint-leave-active_18df1_87","drop-game-content-animation-player-enter-from":"_drop-game-content-animation-player-enter-from_18df1_91","drop-game-content-animation-player-leave-to":"_drop-game-content-animation-player-leave-to_18df1_92","drop-game-content-animation-player-enter-to":"_drop-game-content-animation-player-enter-to_18df1_96","drop-game-content-animation-player-leave-from":"_drop-game-content-animation-player-leave-from_18df1_97","drop-game-content-animation-player-enter-active":"_drop-game-content-animation-player-enter-active_18df1_101","drop-game-content-animation-player-leave-active":"_drop-game-content-animation-player-leave-active_18df1_102","drop-game-animation-balance-enter-from":"_drop-game-animation-balance-enter-from_18df1_106","drop-game-animation-balance-leave-to":"_drop-game-animation-balance-leave-to_18df1_107","drop-game-animation-balance-enter-to":"_drop-game-animation-balance-enter-to_18df1_111","drop-game-animation-balance-leave-from":"_drop-game-animation-balance-leave-from_18df1_112","drop-game-animation-balance-enter-active":"_drop-game-animation-balance-enter-active_18df1_116","drop-game-animation-balance-leave-active":"_drop-game-animation-balance-leave-active_18df1_117"},ar=d=>{const e=Math.floor(d/3600),t=Math.floor(d%3600/60),i=d%60;let a="";return e>0&&(a+=`${e}h `),t>0&&(a+=`${t}m `),a+=`${i}s`,a.trim()};class nr{constructor(){m(this,"entries",{});m(this,"size",0)}add(e){let t=this.entries[e];return this.entries[e]=!0,t?!1:(this.size++,!0)}addAll(e){let t=this.size;for(var i=0,a=e.length;i<a;i++)this.add(e[i]);return t!=this.size}contains(e){return this.entries[e]}clear(){this.entries={},this.size=0}}const pt=class pt{constructor(e=0,t=0,i=0,a=0){m(this,"r");m(this,"g");m(this,"b");m(this,"a");this.r=e,this.g=t,this.b=i,this.a=a}set(e,t,i,a){return this.r=e,this.g=t,this.b=i,this.a=a,this.clamp()}setFromColor(e){return this.r=e.r,this.g=e.g,this.b=e.b,this.a=e.a,this}setFromString(e){return e=e.charAt(0)=="#"?e.substr(1):e,this.r=parseInt(e.substr(0,2),16)/255,this.g=parseInt(e.substr(2,2),16)/255,this.b=parseInt(e.substr(4,2),16)/255,this.a=e.length!=8?1:parseInt(e.substr(6,2),16)/255,this}add(e,t,i,a){return this.r+=e,this.g+=t,this.b+=i,this.a+=a,this.clamp()}clamp(){return this.r<0?this.r=0:this.r>1&&(this.r=1),this.g<0?this.g=0:this.g>1&&(this.g=1),this.b<0?this.b=0:this.b>1&&(this.b=1),this.a<0?this.a=0:this.a>1&&(this.a=1),this}static rgba8888ToColor(e,t){e.r=((t&4278190080)>>>24)/255,e.g=((t&16711680)>>>16)/255,e.b=((t&65280)>>>8)/255,e.a=(t&255)/255}static rgb888ToColor(e,t){e.r=((t&16711680)>>>16)/255,e.g=((t&65280)>>>8)/255,e.b=(t&255)/255}toRgb888(){const e=t=>("0"+(t*255).toString(16)).slice(-2);return+("0x"+e(this.r)+e(this.g)+e(this.b))}static fromString(e){return new pt().setFromString(e)}};m(pt,"WHITE",new pt(1,1,1,1)),m(pt,"RED",new pt(1,0,0,1)),m(pt,"GREEN",new pt(0,1,0,1)),m(pt,"BLUE",new pt(0,0,1,1)),m(pt,"MAGENTA",new pt(1,0,1,1));let K=pt;const Je=class Je{static clamp(e,t,i){return e<t?t:e>i?i:e}static cosDeg(e){return Math.cos(e*Je.degRad)}static sinDeg(e){return Math.sin(e*Je.degRad)}static atan2Deg(e,t){return Math.atan2(e,t)*Je.degRad}static signum(e){return e>0?1:e<0?-1:0}static toInt(e){return e>0?Math.floor(e):Math.ceil(e)}static cbrt(e){let t=Math.pow(Math.abs(e),.3333333333333333);return e<0?-t:t}static randomTriangular(e,t){return Je.randomTriangularWith(e,t,(e+t)*.5)}static randomTriangularWith(e,t,i){let a=Math.random(),n=t-e;return a<=(i-e)/n?e+Math.sqrt(a*n*(i-e)):t-Math.sqrt((1-a)*n*(t-i))}static isPowerOfTwo(e){return e&&(e&e-1)===0}};m(Je,"PI",3.1415927),m(Je,"PI2",Je.PI*2),m(Je,"invPI2",1/Je.PI2),m(Je,"radiansToDegrees",180/Je.PI),m(Je,"radDeg",Je.radiansToDegrees),m(Je,"degreesToRadians",Je.PI/180),m(Je,"degRad",Je.degreesToRadians);let q=Je;const ri=class ri{static arrayCopy(e,t,i,a,n){for(let o=t,s=a;o<t+n;o++,s++)i[s]=e[o]}static arrayFill(e,t,i,a){for(let n=t;n<i;n++)e[n]=a}static setArraySize(e,t,i=0){let a=e.length;if(a==t)return e;if(e.length=t,a<t)for(let n=a;n<t;n++)e[n]=i;return e}static ensureArrayCapacity(e,t,i=0){return e.length>=t?e:ri.setArraySize(e,t,i)}static newArray(e,t){let i=new Array(e);for(let a=0;a<e;a++)i[a]=t;return i}static newFloatArray(e){if(ri.SUPPORTS_TYPED_ARRAYS)return new Float32Array(e);{let t=new Array(e);for(let i=0;i<t.length;i++)t[i]=0;return t}}static newShortArray(e){if(ri.SUPPORTS_TYPED_ARRAYS)return new Int16Array(e);{let t=new Array(e);for(let i=0;i<t.length;i++)t[i]=0;return t}}static toFloatArray(e){return ri.SUPPORTS_TYPED_ARRAYS?new Float32Array(e):e}static toSinglePrecision(e){return ri.SUPPORTS_TYPED_ARRAYS?Math.fround(e):e}static webkit602BugfixHelper(e,t){}static contains(e,t,i=!0){for(var a=0;a<e.length;a++)if(e[a]==t)return!0;return!1}static enumValue(e,t){return e[t[0].toUpperCase()+t.slice(1)]}};m(ri,"SUPPORTS_TYPED_ARRAYS",typeof Float32Array<"u");let j=ri;class xa{constructor(e){m(this,"items",new Array);m(this,"instantiator");this.instantiator=e}obtain(){return this.items.length>0?this.items.pop():this.instantiator()}free(e){e.reset&&e.reset(),this.items.push(e)}freeAll(e){for(let t=0;t<e.length;t++)this.free(e[t])}clear(){this.items.length=0}}class Dt{constructor(e=0,t=0){m(this,"x");m(this,"y");this.x=e,this.y=t}set(e,t){return this.x=e,this.y=t,this}length(){let e=this.x,t=this.y;return Math.sqrt(e*e+t*t)}normalize(){let e=this.length();return e!=0&&(this.x/=e,this.y/=e),this}}class sr{constructor(){m(this,"maxDelta",.064);m(this,"framesPerSecond",0);m(this,"delta",0);m(this,"totalTime",0);m(this,"lastTime",Date.now()/1e3);m(this,"frameCount",0);m(this,"frameTime",0)}update(){let e=Date.now()/1e3;this.delta=e-this.lastTime,this.frameTime+=this.delta,this.totalTime+=this.delta,this.delta>this.maxDelta&&(this.delta=this.maxDelta),this.lastTime=e,this.frameCount++,this.frameTime>1&&(this.framesPerSecond=this.frameCount/this.frameTime,this.frameTime=0,this.frameCount=0)}}class rr{constructor(e){m(this,"name");if(!e)throw new Error("name cannot be null.");this.name=e}}const Ia=class Ia extends rr{constructor(t){super(t);m(this,"id",Ia.nextID++);m(this,"bones",null);m(this,"vertices",[]);m(this,"worldVerticesLength",0);m(this,"timelineAttachment",this)}computeWorldVertices(t,i,a,n,o,s){a=o+(a>>1)*s;let h=t.bone.skeleton,r=t.deform,l=this.vertices,c=this.bones;if(!c){r.length>0&&(l=r);let p=t.bone,v=p.worldX,b=p.worldY,w=p.a,_=p.b,y=p.c,k=p.d;for(let C=i,A=o;A<a;C+=2,A+=s){let E=l[C],M=l[C+1];n[A]=E*w+M*_+v,n[A+1]=E*y+M*k+b}return}let f=0,u=0;for(let p=0;p<i;p+=2){let v=c[f];f+=v+1,u+=v}let g=h.bones;if(r.length==0)for(let p=o,v=u*3;p<a;p+=s){let b=0,w=0,_=c[f++];for(_+=f;f<_;f++,v+=3){let y=g[c[f]],k=l[v],C=l[v+1],A=l[v+2];b+=(k*y.a+C*y.b+y.worldX)*A,w+=(k*y.c+C*y.d+y.worldY)*A}n[p]=b,n[p+1]=w}else{let p=r;for(let v=o,b=u*3,w=u<<1;v<a;v+=s){let _=0,y=0,k=c[f++];for(k+=f;f<k;f++,b+=3,w+=2){let C=g[c[f]],A=l[b]+p[w],E=l[b+1]+p[w+1],M=l[b+2];_+=(A*C.a+E*C.b+C.worldX)*M,y+=(A*C.c+E*C.d+C.worldY)*M}n[v]=_,n[v+1]=y}}}copyTo(t){this.bones?(t.bones=new Array(this.bones.length),j.arrayCopy(this.bones,0,t.bones,0,this.bones.length)):t.bones=null,this.vertices&&(t.vertices=j.newFloatArray(this.vertices.length),j.arrayCopy(this.vertices,0,t.vertices,0,this.vertices.length)),t.worldVerticesLength=this.worldVerticesLength,t.timelineAttachment=this.timelineAttachment}};m(Ia,"nextID",0);let Rt=Ia;const Bi=class Bi{constructor(e){m(this,"id",Bi.nextID());m(this,"regions");m(this,"start",0);m(this,"digits",0);m(this,"setupIndex",0);this.regions=new Array(e)}copy(){let e=new Bi(this.regions.length);return j.arrayCopy(this.regions,0,e.regions,0,this.regions.length),e.start=this.start,e.digits=this.digits,e.setupIndex=this.setupIndex,e}apply(e,t){let i=e.sequenceIndex;i==-1&&(i=this.setupIndex),i>=this.regions.length&&(i=this.regions.length-1);let a=this.regions[i];t.region!=a&&(t.region=a,t.updateRegion())}getPath(e,t){let i=e,a=(this.start+t).toString();for(let n=this.digits-a.length;n>0;n--)i+="0";return i+=a,i}static nextID(){return Bi._nextID++}};m(Bi,"_nextID",0);let Ca=Bi;var nt;(function(d){d[d.hold=0]="hold",d[d.once=1]="once",d[d.loop=2]="loop",d[d.pingpong=3]="pingpong",d[d.onceReverse=4]="onceReverse",d[d.loopReverse=5]="loopReverse",d[d.pingpongReverse=6]="pingpongReverse"})(nt||(nt={}));const or=[nt.hold,nt.once,nt.loop,nt.pingpong,nt.onceReverse,nt.loopReverse,nt.pingpongReverse];class Fn{constructor(e,t,i){m(this,"name");m(this,"timelines",[]);m(this,"timelineIds",new nr);m(this,"duration");if(!e)throw new Error("name cannot be null.");this.name=e,this.setTimelines(t),this.duration=i}setTimelines(e){if(!e)throw new Error("timelines cannot be null.");this.timelines=e,this.timelineIds.clear();for(var t=0;t<e.length;t++)this.timelineIds.addAll(e[t].getPropertyIds())}hasTimeline(e){for(let t=0;t<e.length;t++)if(this.timelineIds.contains(e[t]))return!0;return!1}apply(e,t,i,a,n,o,s,h){if(!e)throw new Error("skeleton cannot be null.");a&&this.duration!=0&&(i%=this.duration,t>0&&(t%=this.duration));let r=this.timelines;for(let l=0,c=r.length;l<c;l++)r[l].apply(e,t,i,n,o,s,h)}}var X;(function(d){d[d.setup=0]="setup",d[d.first=1]="first",d[d.replace=2]="replace",d[d.add=3]="add"})(X||(X={}));var ct;(function(d){d[d.mixIn=0]="mixIn",d[d.mixOut=1]="mixOut"})(ct||(ct={}));const ke={rotate:0,x:1,y:2,scaleX:3,scaleY:4,shearX:5,shearY:6,inherit:7,rgb:8,alpha:9,rgb2:10,attachment:11,deform:12,event:13,drawOrder:14,ikConstraint:15,transformConstraint:16,pathConstraintPosition:17,pathConstraintSpacing:18,pathConstraintMix:19,physicsConstraintInertia:20,physicsConstraintStrength:21,physicsConstraintDamping:22,physicsConstraintMass:23,physicsConstraintWind:24,physicsConstraintGravity:25,physicsConstraintMix:26,physicsConstraintReset:27,sequence:28};class ze{constructor(e,t){m(this,"propertyIds");m(this,"frames");this.propertyIds=t,this.frames=j.newFloatArray(e*this.getFrameEntries())}getPropertyIds(){return this.propertyIds}getFrameEntries(){return 1}getFrameCount(){return this.frames.length/this.getFrameEntries()}getDuration(){return this.frames[this.frames.length-this.getFrameEntries()]}static search1(e,t){let i=e.length;for(let a=1;a<i;a++)if(e[a]>t)return a-1;return i-1}static search(e,t,i){let a=e.length;for(let n=i;n<a;n+=i)if(e[n]>t)return n-i;return a-i}}class zt extends ze{constructor(t,i,a){super(t,a);m(this,"curves");this.curves=j.newFloatArray(t+i*18),this.curves[t-1]=1}setLinear(t){this.curves[t]=0}setStepped(t){this.curves[t]=1}shrink(t){let i=this.getFrameCount()+t*18;if(this.curves.length>i){let a=j.newFloatArray(i);j.arrayCopy(this.curves,0,a,0,i),this.curves=a}}setBezier(t,i,a,n,o,s,h,r,l,c,f){let u=this.curves,g=this.getFrameCount()+t*18;a==0&&(u[i]=2+g);let p=(n-s*2+r)*.03,v=(o-h*2+l)*.03,b=((s-r)*3-n+c)*.006,w=((h-l)*3-o+f)*.006,_=p*2+b,y=v*2+w,k=(s-n)*.3+p+b*.16666667,C=(h-o)*.3+v+w*.16666667,A=n+k,E=o+C;for(let M=g+18;g<M;g+=2)u[g]=A,u[g+1]=E,k+=_,C+=y,_+=b,y+=w,A+=k,E+=C}getBezierValue(t,i,a,n){let o=this.curves;if(o[n]>t){let l=this.frames[i],c=this.frames[i+a];return c+(t-l)/(o[n]-l)*(o[n+1]-c)}let s=n+18;for(n+=2;n<s;n+=2)if(o[n]>=t){let l=o[n-2],c=o[n-1];return c+(t-l)/(o[n]-l)*(o[n+1]-c)}i+=this.getFrameEntries();let h=o[s-2],r=o[s-1];return r+(t-h)/(this.frames[i]-h)*(this.frames[i+a]-r)}}class Pt extends zt{constructor(e,t,i){super(e,t,[i])}getFrameEntries(){return 2}setFrame(e,t,i){e<<=1,this.frames[e]=t,this.frames[e+1]=i}getCurveValue(e){let t=this.frames,i=t.length-2;for(let n=2;n<=i;n+=2)if(t[n]>e){i=n-2;break}let a=this.curves[i>>1];switch(a){case 0:let n=t[i],o=t[i+1];return o+(e-n)/(t[i+2]-n)*(t[i+2+1]-o);case 1:return t[i+1]}return this.getBezierValue(e,i,1,a-2)}getRelativeValue(e,t,i,a,n){if(e<this.frames[0]){switch(i){case X.setup:return n;case X.first:return a+(n-a)*t}return a}let o=this.getCurveValue(e);switch(i){case X.setup:return n+o*t;case X.first:case X.replace:o+=n-a}return a+o*t}getAbsoluteValue(e,t,i,a,n){if(e<this.frames[0]){switch(i){case X.setup:return n;case X.first:return a+(n-a)*t}return a}let o=this.getCurveValue(e);return i==X.setup?n+(o-n)*t:a+(o-a)*t}getAbsoluteValue2(e,t,i,a,n,o){if(e<this.frames[0]){switch(i){case X.setup:return n;case X.first:return a+(n-a)*t}return a}return i==X.setup?n+(o-n)*t:a+(o-a)*t}getScaleValue(e,t,i,a,n,o){const s=this.frames;if(e<s[0]){switch(i){case X.setup:return o;case X.first:return n+(o-n)*t}return n}let h=this.getCurveValue(e)*o;if(t==1)return i==X.add?n+h-o:h;if(a==ct.mixOut)switch(i){case X.setup:return o+(Math.abs(h)*q.signum(o)-o)*t;case X.first:case X.replace:return n+(Math.abs(h)*q.signum(n)-n)*t}else{let r=0;switch(i){case X.setup:return r=Math.abs(o)*q.signum(h),r+(h-r)*t;case X.first:case X.replace:return r=Math.abs(n)*q.signum(h),r+(h-r)*t}}return n+(h-o)*t}}class Pn extends zt{constructor(e,t,i,a){super(e,t,[i,a])}getFrameEntries(){return 3}setFrame(e,t,i,a){e*=3,this.frames[e]=t,this.frames[e+1]=i,this.frames[e+2]=a}}class ka extends Pt{constructor(t,i,a){super(t,i,ke.rotate+"|"+a);m(this,"boneIndex",0);this.boneIndex=a}apply(t,i,a,n,o,s,h){let r=t.bones[this.boneIndex];r.active&&(r.rotation=this.getRelativeValue(a,o,s,r.rotation,r.data.rotation))}}class lr extends Pn{constructor(t,i,a){super(t,i,ke.x+"|"+a,ke.y+"|"+a);m(this,"boneIndex",0);this.boneIndex=a}apply(t,i,a,n,o,s,h){let r=t.bones[this.boneIndex];if(!r.active)return;let l=this.frames;if(a<l[0]){switch(s){case X.setup:r.x=r.data.x,r.y=r.data.y;return;case X.first:r.x+=(r.data.x-r.x)*o,r.y+=(r.data.y-r.y)*o}return}let c=0,f=0,u=ze.search(l,a,3),g=this.curves[u/3];switch(g){case 0:let p=l[u];c=l[u+1],f=l[u+2];let v=(a-p)/(l[u+3]-p);c+=(l[u+3+1]-c)*v,f+=(l[u+3+2]-f)*v;break;case 1:c=l[u+1],f=l[u+2];break;default:c=this.getBezierValue(a,u,1,g-2),f=this.getBezierValue(a,u,2,g+18-2)}switch(s){case X.setup:r.x=r.data.x+c*o,r.y=r.data.y+f*o;break;case X.first:case X.replace:r.x+=(r.data.x+c-r.x)*o,r.y+=(r.data.y+f-r.y)*o;break;case X.add:r.x+=c*o,r.y+=f*o}}}class cr extends Pt{constructor(t,i,a){super(t,i,ke.x+"|"+a);m(this,"boneIndex",0);this.boneIndex=a}apply(t,i,a,n,o,s,h){let r=t.bones[this.boneIndex];r.active&&(r.x=this.getRelativeValue(a,o,s,r.x,r.data.x))}}class hr extends Pt{constructor(t,i,a){super(t,i,ke.y+"|"+a);m(this,"boneIndex",0);this.boneIndex=a}apply(t,i,a,n,o,s,h){let r=t.bones[this.boneIndex];r.active&&(r.y=this.getRelativeValue(a,o,s,r.y,r.data.y))}}class dr extends Pn{constructor(t,i,a){super(t,i,ke.scaleX+"|"+a,ke.scaleY+"|"+a);m(this,"boneIndex",0);this.boneIndex=a}apply(t,i,a,n,o,s,h){let r=t.bones[this.boneIndex];if(!r.active)return;let l=this.frames;if(a<l[0]){switch(s){case X.setup:r.scaleX=r.data.scaleX,r.scaleY=r.data.scaleY;return;case X.first:r.scaleX+=(r.data.scaleX-r.scaleX)*o,r.scaleY+=(r.data.scaleY-r.scaleY)*o}return}let c,f,u=ze.search(l,a,3),g=this.curves[u/3];switch(g){case 0:let p=l[u];c=l[u+1],f=l[u+2];let v=(a-p)/(l[u+3]-p);c+=(l[u+3+1]-c)*v,f+=(l[u+3+2]-f)*v;break;case 1:c=l[u+1],f=l[u+2];break;default:c=this.getBezierValue(a,u,1,g-2),f=this.getBezierValue(a,u,2,g+18-2)}if(c*=r.data.scaleX,f*=r.data.scaleY,o==1)s==X.add?(r.scaleX+=c-r.data.scaleX,r.scaleY+=f-r.data.scaleY):(r.scaleX=c,r.scaleY=f);else{let p=0,v=0;if(h==ct.mixOut)switch(s){case X.setup:p=r.data.scaleX,v=r.data.scaleY,r.scaleX=p+(Math.abs(c)*q.signum(p)-p)*o,r.scaleY=v+(Math.abs(f)*q.signum(v)-v)*o;break;case X.first:case X.replace:p=r.scaleX,v=r.scaleY,r.scaleX=p+(Math.abs(c)*q.signum(p)-p)*o,r.scaleY=v+(Math.abs(f)*q.signum(v)-v)*o;break;case X.add:r.scaleX+=(c-r.data.scaleX)*o,r.scaleY+=(f-r.data.scaleY)*o}else switch(s){case X.setup:p=Math.abs(r.data.scaleX)*q.signum(c),v=Math.abs(r.data.scaleY)*q.signum(f),r.scaleX=p+(c-p)*o,r.scaleY=v+(f-v)*o;break;case X.first:case X.replace:p=Math.abs(r.scaleX)*q.signum(c),v=Math.abs(r.scaleY)*q.signum(f),r.scaleX=p+(c-p)*o,r.scaleY=v+(f-v)*o;break;case X.add:r.scaleX+=(c-r.data.scaleX)*o,r.scaleY+=(f-r.data.scaleY)*o}}}}class ur extends Pt{constructor(t,i,a){super(t,i,ke.scaleX+"|"+a);m(this,"boneIndex",0);this.boneIndex=a}apply(t,i,a,n,o,s,h){let r=t.bones[this.boneIndex];r.active&&(r.scaleX=this.getScaleValue(a,o,s,h,r.scaleX,r.data.scaleX))}}class mr extends Pt{constructor(t,i,a){super(t,i,ke.scaleY+"|"+a);m(this,"boneIndex",0);this.boneIndex=a}apply(t,i,a,n,o,s,h){let r=t.bones[this.boneIndex];r.active&&(r.scaleY=this.getScaleValue(a,o,s,h,r.scaleY,r.data.scaleY))}}class fr extends Pn{constructor(t,i,a){super(t,i,ke.shearX+"|"+a,ke.shearY+"|"+a);m(this,"boneIndex",0);this.boneIndex=a}apply(t,i,a,n,o,s,h){let r=t.bones[this.boneIndex];if(!r.active)return;let l=this.frames;if(a<l[0]){switch(s){case X.setup:r.shearX=r.data.shearX,r.shearY=r.data.shearY;return;case X.first:r.shearX+=(r.data.shearX-r.shearX)*o,r.shearY+=(r.data.shearY-r.shearY)*o}return}let c=0,f=0,u=ze.search(l,a,3),g=this.curves[u/3];switch(g){case 0:let p=l[u];c=l[u+1],f=l[u+2];let v=(a-p)/(l[u+3]-p);c+=(l[u+3+1]-c)*v,f+=(l[u+3+2]-f)*v;break;case 1:c=l[u+1],f=l[u+2];break;default:c=this.getBezierValue(a,u,1,g-2),f=this.getBezierValue(a,u,2,g+18-2)}switch(s){case X.setup:r.shearX=r.data.shearX+c*o,r.shearY=r.data.shearY+f*o;break;case X.first:case X.replace:r.shearX+=(r.data.shearX+c-r.shearX)*o,r.shearY+=(r.data.shearY+f-r.shearY)*o;break;case X.add:r.shearX+=c*o,r.shearY+=f*o}}}class gr extends Pt{constructor(t,i,a){super(t,i,ke.shearX+"|"+a);m(this,"boneIndex",0);this.boneIndex=a}apply(t,i,a,n,o,s,h){let r=t.bones[this.boneIndex];r.active&&(r.shearX=this.getRelativeValue(a,o,s,r.shearX,r.data.shearX))}}class pr extends Pt{constructor(t,i,a){super(t,i,ke.shearY+"|"+a);m(this,"boneIndex",0);this.boneIndex=a}apply(t,i,a,n,o,s,h){let r=t.bones[this.boneIndex];r.active&&(r.shearY=this.getRelativeValue(a,o,s,r.shearY,r.data.shearY))}}class vr extends ze{constructor(t,i){super(t,[ke.inherit+"|"+i]);m(this,"boneIndex",0);this.boneIndex=i}getFrameEntries(){return 2}setFrame(t,i,a){t*=2,this.frames[t]=i,this.frames[t+1]=a}apply(t,i,a,n,o,s,h){let r=t.bones[this.boneIndex];if(!r.active)return;if(h==ct.mixOut){s==X.setup&&(r.inherit=r.data.inherit);return}let l=this.frames;if(a<l[0]){(s==X.setup||s==X.first)&&(r.inherit=r.data.inherit);return}r.inherit=this.frames[ze.search(l,a,2)+1]}}class _r extends zt{constructor(t,i,a){super(t,i,[ke.rgb+"|"+a,ke.alpha+"|"+a]);m(this,"slotIndex",0);this.slotIndex=a}getFrameEntries(){return 5}setFrame(t,i,a,n,o,s){t*=5,this.frames[t]=i,this.frames[t+1]=a,this.frames[t+2]=n,this.frames[t+3]=o,this.frames[t+4]=s}apply(t,i,a,n,o,s,h){let r=t.slots[this.slotIndex];if(!r.bone.active)return;let l=this.frames,c=r.color;if(a<l[0]){let w=r.data.color;switch(s){case X.setup:c.setFromColor(w);return;case X.first:c.add((w.r-c.r)*o,(w.g-c.g)*o,(w.b-c.b)*o,(w.a-c.a)*o)}return}let f=0,u=0,g=0,p=0,v=ze.search(l,a,5),b=this.curves[v/5];switch(b){case 0:let w=l[v];f=l[v+1],u=l[v+2],g=l[v+3],p=l[v+4];let _=(a-w)/(l[v+5]-w);f+=(l[v+5+1]-f)*_,u+=(l[v+5+2]-u)*_,g+=(l[v+5+3]-g)*_,p+=(l[v+5+4]-p)*_;break;case 1:f=l[v+1],u=l[v+2],g=l[v+3],p=l[v+4];break;default:f=this.getBezierValue(a,v,1,b-2),u=this.getBezierValue(a,v,2,b+18-2),g=this.getBezierValue(a,v,3,b+18*2-2),p=this.getBezierValue(a,v,4,b+18*3-2)}o==1?c.set(f,u,g,p):(s==X.setup&&c.setFromColor(r.data.color),c.add((f-c.r)*o,(u-c.g)*o,(g-c.b)*o,(p-c.a)*o))}}class br extends zt{constructor(t,i,a){super(t,i,[ke.rgb+"|"+a]);m(this,"slotIndex",0);this.slotIndex=a}getFrameEntries(){return 4}setFrame(t,i,a,n,o){t<<=2,this.frames[t]=i,this.frames[t+1]=a,this.frames[t+2]=n,this.frames[t+3]=o}apply(t,i,a,n,o,s,h){let r=t.slots[this.slotIndex];if(!r.bone.active)return;let l=this.frames,c=r.color;if(a<l[0]){let b=r.data.color;switch(s){case X.setup:c.r=b.r,c.g=b.g,c.b=b.b;return;case X.first:c.r+=(b.r-c.r)*o,c.g+=(b.g-c.g)*o,c.b+=(b.b-c.b)*o}return}let f=0,u=0,g=0,p=ze.search(l,a,4),v=this.curves[p>>2];switch(v){case 0:let b=l[p];f=l[p+1],u=l[p+2],g=l[p+3];let w=(a-b)/(l[p+4]-b);f+=(l[p+4+1]-f)*w,u+=(l[p+4+2]-u)*w,g+=(l[p+4+3]-g)*w;break;case 1:f=l[p+1],u=l[p+2],g=l[p+3];break;default:f=this.getBezierValue(a,p,1,v-2),u=this.getBezierValue(a,p,2,v+18-2),g=this.getBezierValue(a,p,3,v+18*2-2)}if(o==1)c.r=f,c.g=u,c.b=g;else{if(s==X.setup){let b=r.data.color;c.r=b.r,c.g=b.g,c.b=b.b}c.r+=(f-c.r)*o,c.g+=(u-c.g)*o,c.b+=(g-c.b)*o}}}class yr extends Pt{constructor(t,i,a){super(t,i,ke.alpha+"|"+a);m(this,"slotIndex",0);this.slotIndex=a}apply(t,i,a,n,o,s,h){let r=t.slots[this.slotIndex];if(!r.bone.active)return;let l=r.color;if(a<this.frames[0]){let f=r.data.color;switch(s){case X.setup:l.a=f.a;return;case X.first:l.a+=(f.a-l.a)*o}return}let c=this.getCurveValue(a);o==1?l.a=c:(s==X.setup&&(l.a=r.data.color.a),l.a+=(c-l.a)*o)}}class wr extends zt{constructor(t,i,a){super(t,i,[ke.rgb+"|"+a,ke.alpha+"|"+a,ke.rgb2+"|"+a]);m(this,"slotIndex",0);this.slotIndex=a}getFrameEntries(){return 8}setFrame(t,i,a,n,o,s,h,r,l){t<<=3,this.frames[t]=i,this.frames[t+1]=a,this.frames[t+2]=n,this.frames[t+3]=o,this.frames[t+4]=s,this.frames[t+5]=h,this.frames[t+6]=r,this.frames[t+7]=l}apply(t,i,a,n,o,s,h){let r=t.slots[this.slotIndex];if(!r.bone.active)return;let l=this.frames,c=r.color,f=r.darkColor;if(a<l[0]){let C=r.data.color,A=r.data.darkColor;switch(s){case X.setup:c.setFromColor(C),f.r=A.r,f.g=A.g,f.b=A.b;return;case X.first:c.add((C.r-c.r)*o,(C.g-c.g)*o,(C.b-c.b)*o,(C.a-c.a)*o),f.r+=(A.r-f.r)*o,f.g+=(A.g-f.g)*o,f.b+=(A.b-f.b)*o}return}let u=0,g=0,p=0,v=0,b=0,w=0,_=0,y=ze.search(l,a,8),k=this.curves[y>>3];switch(k){case 0:let C=l[y];u=l[y+1],g=l[y+2],p=l[y+3],v=l[y+4],b=l[y+5],w=l[y+6],_=l[y+7];let A=(a-C)/(l[y+8]-C);u+=(l[y+8+1]-u)*A,g+=(l[y+8+2]-g)*A,p+=(l[y+8+3]-p)*A,v+=(l[y+8+4]-v)*A,b+=(l[y+8+5]-b)*A,w+=(l[y+8+6]-w)*A,_+=(l[y+8+7]-_)*A;break;case 1:u=l[y+1],g=l[y+2],p=l[y+3],v=l[y+4],b=l[y+5],w=l[y+6],_=l[y+7];break;default:u=this.getBezierValue(a,y,1,k-2),g=this.getBezierValue(a,y,2,k+18-2),p=this.getBezierValue(a,y,3,k+18*2-2),v=this.getBezierValue(a,y,4,k+18*3-2),b=this.getBezierValue(a,y,5,k+18*4-2),w=this.getBezierValue(a,y,6,k+18*5-2),_=this.getBezierValue(a,y,7,k+18*6-2)}if(o==1)c.set(u,g,p,v),f.r=b,f.g=w,f.b=_;else{if(s==X.setup){c.setFromColor(r.data.color);let C=r.data.darkColor;f.r=C.r,f.g=C.g,f.b=C.b}c.add((u-c.r)*o,(g-c.g)*o,(p-c.b)*o,(v-c.a)*o),f.r+=(b-f.r)*o,f.g+=(w-f.g)*o,f.b+=(_-f.b)*o}}}class xr extends zt{constructor(t,i,a){super(t,i,[ke.rgb+"|"+a,ke.rgb2+"|"+a]);m(this,"slotIndex",0);this.slotIndex=a}getFrameEntries(){return 7}setFrame(t,i,a,n,o,s,h,r){t*=7,this.frames[t]=i,this.frames[t+1]=a,this.frames[t+2]=n,this.frames[t+3]=o,this.frames[t+4]=s,this.frames[t+5]=h,this.frames[t+6]=r}apply(t,i,a,n,o,s,h){let r=t.slots[this.slotIndex];if(!r.bone.active)return;let l=this.frames,c=r.color,f=r.darkColor;if(a<l[0]){let k=r.data.color,C=r.data.darkColor;switch(s){case X.setup:c.r=k.r,c.g=k.g,c.b=k.b,f.r=C.r,f.g=C.g,f.b=C.b;return;case X.first:c.r+=(k.r-c.r)*o,c.g+=(k.g-c.g)*o,c.b+=(k.b-c.b)*o,f.r+=(C.r-f.r)*o,f.g+=(C.g-f.g)*o,f.b+=(C.b-f.b)*o}return}let u=0,g=0,p=0,v=0,b=0,w=0,_=ze.search(l,a,7),y=this.curves[_/7];switch(y){case 0:let k=l[_];u=l[_+1],g=l[_+2],p=l[_+3],v=l[_+4],b=l[_+5],w=l[_+6];let C=(a-k)/(l[_+7]-k);u+=(l[_+7+1]-u)*C,g+=(l[_+7+2]-g)*C,p+=(l[_+7+3]-p)*C,v+=(l[_+7+4]-v)*C,b+=(l[_+7+5]-b)*C,w+=(l[_+7+6]-w)*C;break;case 1:u=l[_+1],g=l[_+2],p=l[_+3],v=l[_+4],b=l[_+5],w=l[_+6];break;default:u=this.getBezierValue(a,_,1,y-2),g=this.getBezierValue(a,_,2,y+18-2),p=this.getBezierValue(a,_,3,y+18*2-2),v=this.getBezierValue(a,_,4,y+18*3-2),b=this.getBezierValue(a,_,5,y+18*4-2),w=this.getBezierValue(a,_,6,y+18*5-2)}if(o==1)c.r=u,c.g=g,c.b=p,f.r=v,f.g=b,f.b=w;else{if(s==X.setup){let k=r.data.color,C=r.data.darkColor;c.r=k.r,c.g=k.g,c.b=k.b,f.r=C.r,f.g=C.g,f.b=C.b}c.r+=(u-c.r)*o,c.g+=(g-c.g)*o,c.b+=(p-c.b)*o,f.r+=(v-f.r)*o,f.g+=(b-f.g)*o,f.b+=(w-f.b)*o}}}class Ii extends ze{constructor(t,i){super(t,[ke.attachment+"|"+i]);m(this,"slotIndex",0);m(this,"attachmentNames");this.slotIndex=i,this.attachmentNames=new Array(t)}getFrameCount(){return this.frames.length}setFrame(t,i,a){this.frames[t]=i,this.attachmentNames[t]=a}apply(t,i,a,n,o,s,h){let r=t.slots[this.slotIndex];if(r.bone.active){if(h==ct.mixOut){s==X.setup&&this.setAttachment(t,r,r.data.attachmentName);return}if(a<this.frames[0]){(s==X.setup||s==X.first)&&this.setAttachment(t,r,r.data.attachmentName);return}this.setAttachment(t,r,this.attachmentNames[ze.search1(this.frames,a)])}}setAttachment(t,i,a){i.setAttachment(a?t.getAttachment(this.slotIndex,a):null)}}class Cr extends zt{constructor(t,i,a,n){super(t,i,[ke.deform+"|"+a+"|"+n.id]);m(this,"slotIndex",0);m(this,"attachment");m(this,"vertices");this.slotIndex=a,this.attachment=n,this.vertices=new Array(t)}getFrameCount(){return this.frames.length}setFrame(t,i,a){this.frames[t]=i,this.vertices[t]=a}setBezier(t,i,a,n,o,s,h,r,l,c,f){let u=this.curves,g=this.getFrameCount()+t*18;a==0&&(u[i]=2+g);let p=(n-s*2+r)*.03,v=l*.03-h*.06,b=((s-r)*3-n+c)*.006,w=(h-l+.33333333)*.018,_=p*2+b,y=v*2+w,k=(s-n)*.3+p+b*.16666667,C=h*.3+v+w*.16666667,A=n+k,E=C;for(let M=g+18;g<M;g+=2)u[g]=A,u[g+1]=E,k+=_,C+=y,_+=b,y+=w,A+=k,E+=C}getCurvePercent(t,i){let a=this.curves,n=a[i];switch(n){case 0:let r=this.frames[i];return(t-r)/(this.frames[i+this.getFrameEntries()]-r);case 1:return 0}if(n-=2,a[n]>t){let r=this.frames[i];return a[n+1]*(t-r)/(a[n]-r)}let o=n+18;for(n+=2;n<o;n+=2)if(a[n]>=t){let r=a[n-2],l=a[n-1];return l+(t-r)/(a[n]-r)*(a[n+1]-l)}let s=a[o-2],h=a[o-1];return h+(1-h)*(t-s)/(this.frames[i+this.getFrameEntries()]-s)}apply(t,i,a,n,o,s,h){let r=t.slots[this.slotIndex];if(!r.bone.active)return;let l=r.getAttachment();if(!l||!(l instanceof Rt)||l.timelineAttachment!=this.attachment)return;let c=r.deform;c.length==0&&(s=X.setup);let f=this.vertices,u=f[0].length,g=this.frames;if(a<g[0]){switch(s){case X.setup:c.length=0;return;case X.first:if(o==1){c.length=0;return}c.length=u;let y=l;if(y.bones){o=1-o;for(var p=0;p<u;p++)c[p]*=o}else{let k=y.vertices;for(var p=0;p<u;p++)c[p]+=(k[p]-c[p])*o}}return}if(c.length=u,a>=g[g.length-1]){let y=f[g.length-1];if(o==1)if(s==X.add){let k=l;if(k.bones)for(let C=0;C<u;C++)c[C]+=y[C];else{let C=k.vertices;for(let A=0;A<u;A++)c[A]+=y[A]-C[A]}}else j.arrayCopy(y,0,c,0,u);else switch(s){case X.setup:{let C=l;if(C.bones)for(let A=0;A<u;A++)c[A]=y[A]*o;else{let A=C.vertices;for(let E=0;E<u;E++){let M=A[E];c[E]=M+(y[E]-M)*o}}break}case X.first:case X.replace:for(let C=0;C<u;C++)c[C]+=(y[C]-c[C])*o;break;case X.add:let k=l;if(k.bones)for(let C=0;C<u;C++)c[C]+=y[C]*o;else{let C=k.vertices;for(let A=0;A<u;A++)c[A]+=(y[A]-C[A])*o}}return}let v=ze.search1(g,a),b=this.getCurvePercent(a,v),w=f[v],_=f[v+1];if(o==1)if(s==X.add){let y=l;if(y.bones)for(let k=0;k<u;k++){let C=w[k];c[k]+=C+(_[k]-C)*b}else{let k=y.vertices;for(let C=0;C<u;C++){let A=w[C];c[C]+=A+(_[C]-A)*b-k[C]}}}else for(let y=0;y<u;y++){let k=w[y];c[y]=k+(_[y]-k)*b}else switch(s){case X.setup:{let k=l;if(k.bones)for(let C=0;C<u;C++){let A=w[C];c[C]=(A+(_[C]-A)*b)*o}else{let C=k.vertices;for(let A=0;A<u;A++){let E=w[A],M=C[A];c[A]=M+(E+(_[A]-E)*b-M)*o}}break}case X.first:case X.replace:for(let k=0;k<u;k++){let C=w[k];c[k]+=(C+(_[k]-C)*b-c[k])*o}break;case X.add:let y=l;if(y.bones)for(let k=0;k<u;k++){let C=w[k];c[k]+=(C+(_[k]-C)*b)*o}else{let k=y.vertices;for(let C=0;C<u;C++){let A=w[C];c[C]+=(A+(_[C]-A)*b-k[C])*o}}}}}const La=class La extends ze{constructor(t){super(t,La.propertyIds);m(this,"events");this.events=new Array(t)}getFrameCount(){return this.frames.length}setFrame(t,i){this.frames[t]=i.time,this.events[t]=i}apply(t,i,a,n,o,s,h){if(!n)return;let r=this.frames,l=this.frames.length;if(i>a)this.apply(t,i,Number.MAX_VALUE,n,o,s,h),i=-1;else if(i>=r[l-1])return;if(a<r[0])return;let c=0;if(i<r[0])c=0;else{c=ze.search1(r,i)+1;let f=r[c];for(;c>0&&r[c-1]==f;)c--}for(;c<l&&a>=r[c];c++)n.push(this.events[c])}};m(La,"propertyIds",[""+ke.event]);let na=La;const Ra=class Ra extends ze{constructor(t){super(t,Ra.propertyIds);m(this,"drawOrders");this.drawOrders=new Array(t)}getFrameCount(){return this.frames.length}setFrame(t,i,a){this.frames[t]=i,this.drawOrders[t]=a}apply(t,i,a,n,o,s,h){if(h==ct.mixOut){s==X.setup&&j.arrayCopy(t.slots,0,t.drawOrder,0,t.slots.length);return}if(a<this.frames[0]){(s==X.setup||s==X.first)&&j.arrayCopy(t.slots,0,t.drawOrder,0,t.slots.length);return}let r=ze.search1(this.frames,a),l=this.drawOrders[r];if(!l)j.arrayCopy(t.slots,0,t.drawOrder,0,t.slots.length);else{let c=t.drawOrder,f=t.slots;for(let u=0,g=l.length;u<g;u++)c[u]=f[l[u]]}}};m(Ra,"propertyIds",[""+ke.drawOrder]);let mi=Ra;class kr extends zt{constructor(t,i,a){super(t,i,[ke.ikConstraint+"|"+a]);m(this,"constraintIndex",0);this.constraintIndex=a}getFrameEntries(){return 6}setFrame(t,i,a,n,o,s,h){t*=6,this.frames[t]=i,this.frames[t+1]=a,this.frames[t+2]=n,this.frames[t+3]=o,this.frames[t+4]=s?1:0,this.frames[t+5]=h?1:0}apply(t,i,a,n,o,s,h){let r=t.ikConstraints[this.constraintIndex];if(!r.active)return;let l=this.frames;if(a<l[0]){switch(s){case X.setup:r.mix=r.data.mix,r.softness=r.data.softness,r.bendDirection=r.data.bendDirection,r.compress=r.data.compress,r.stretch=r.data.stretch;return;case X.first:r.mix+=(r.data.mix-r.mix)*o,r.softness+=(r.data.softness-r.softness)*o,r.bendDirection=r.data.bendDirection,r.compress=r.data.compress,r.stretch=r.data.stretch}return}let c=0,f=0,u=ze.search(l,a,6),g=this.curves[u/6];switch(g){case 0:let p=l[u];c=l[u+1],f=l[u+2];let v=(a-p)/(l[u+6]-p);c+=(l[u+6+1]-c)*v,f+=(l[u+6+2]-f)*v;break;case 1:c=l[u+1],f=l[u+2];break;default:c=this.getBezierValue(a,u,1,g-2),f=this.getBezierValue(a,u,2,g+18-2)}s==X.setup?(r.mix=r.data.mix+(c-r.data.mix)*o,r.softness=r.data.softness+(f-r.data.softness)*o,h==ct.mixOut?(r.bendDirection=r.data.bendDirection,r.compress=r.data.compress,r.stretch=r.data.stretch):(r.bendDirection=l[u+3],r.compress=l[u+4]!=0,r.stretch=l[u+5]!=0)):(r.mix+=(c-r.mix)*o,r.softness+=(f-r.softness)*o,h==ct.mixIn&&(r.bendDirection=l[u+3],r.compress=l[u+4]!=0,r.stretch=l[u+5]!=0))}}class Ar extends zt{constructor(t,i,a){super(t,i,[ke.transformConstraint+"|"+a]);m(this,"constraintIndex",0);this.constraintIndex=a}getFrameEntries(){return 7}setFrame(t,i,a,n,o,s,h,r){let l=this.frames;t*=7,l[t]=i,l[t+1]=a,l[t+2]=n,l[t+3]=o,l[t+4]=s,l[t+5]=h,l[t+6]=r}apply(t,i,a,n,o,s,h){let r=t.transformConstraints[this.constraintIndex];if(!r.active)return;let l=this.frames;if(a<l[0]){let _=r.data;switch(s){case X.setup:r.mixRotate=_.mixRotate,r.mixX=_.mixX,r.mixY=_.mixY,r.mixScaleX=_.mixScaleX,r.mixScaleY=_.mixScaleY,r.mixShearY=_.mixShearY;return;case X.first:r.mixRotate+=(_.mixRotate-r.mixRotate)*o,r.mixX+=(_.mixX-r.mixX)*o,r.mixY+=(_.mixY-r.mixY)*o,r.mixScaleX+=(_.mixScaleX-r.mixScaleX)*o,r.mixScaleY+=(_.mixScaleY-r.mixScaleY)*o,r.mixShearY+=(_.mixShearY-r.mixShearY)*o}return}let c,f,u,g,p,v,b=ze.search(l,a,7),w=this.curves[b/7];switch(w){case 0:let _=l[b];c=l[b+1],f=l[b+2],u=l[b+3],g=l[b+4],p=l[b+5],v=l[b+6];let y=(a-_)/(l[b+7]-_);c+=(l[b+7+1]-c)*y,f+=(l[b+7+2]-f)*y,u+=(l[b+7+3]-u)*y,g+=(l[b+7+4]-g)*y,p+=(l[b+7+5]-p)*y,v+=(l[b+7+6]-v)*y;break;case 1:c=l[b+1],f=l[b+2],u=l[b+3],g=l[b+4],p=l[b+5],v=l[b+6];break;default:c=this.getBezierValue(a,b,1,w-2),f=this.getBezierValue(a,b,2,w+18-2),u=this.getBezierValue(a,b,3,w+18*2-2),g=this.getBezierValue(a,b,4,w+18*3-2),p=this.getBezierValue(a,b,5,w+18*4-2),v=this.getBezierValue(a,b,6,w+18*5-2)}if(s==X.setup){let _=r.data;r.mixRotate=_.mixRotate+(c-_.mixRotate)*o,r.mixX=_.mixX+(f-_.mixX)*o,r.mixY=_.mixY+(u-_.mixY)*o,r.mixScaleX=_.mixScaleX+(g-_.mixScaleX)*o,r.mixScaleY=_.mixScaleY+(p-_.mixScaleY)*o,r.mixShearY=_.mixShearY+(v-_.mixShearY)*o}else r.mixRotate+=(c-r.mixRotate)*o,r.mixX+=(f-r.mixX)*o,r.mixY+=(u-r.mixY)*o,r.mixScaleX+=(g-r.mixScaleX)*o,r.mixScaleY+=(p-r.mixScaleY)*o,r.mixShearY+=(v-r.mixShearY)*o}}class Sr extends Pt{constructor(t,i,a){super(t,i,ke.pathConstraintPosition+"|"+a);m(this,"constraintIndex",0);this.constraintIndex=a}apply(t,i,a,n,o,s,h){let r=t.pathConstraints[this.constraintIndex];r.active&&(r.position=this.getAbsoluteValue(a,o,s,r.position,r.data.position))}}class Er extends Pt{constructor(t,i,a){super(t,i,ke.pathConstraintSpacing+"|"+a);m(this,"constraintIndex",0);this.constraintIndex=a}apply(t,i,a,n,o,s,h){let r=t.pathConstraints[this.constraintIndex];r.active&&(r.spacing=this.getAbsoluteValue(a,o,s,r.spacing,r.data.spacing))}}class Mr extends zt{constructor(t,i,a){super(t,i,[ke.pathConstraintMix+"|"+a]);m(this,"constraintIndex",0);this.constraintIndex=a}getFrameEntries(){return 4}setFrame(t,i,a,n,o){let s=this.frames;t<<=2,s[t]=i,s[t+1]=a,s[t+2]=n,s[t+3]=o}apply(t,i,a,n,o,s,h){let r=t.pathConstraints[this.constraintIndex];if(!r.active)return;let l=this.frames;if(a<l[0]){switch(s){case X.setup:r.mixRotate=r.data.mixRotate,r.mixX=r.data.mixX,r.mixY=r.data.mixY;return;case X.first:r.mixRotate+=(r.data.mixRotate-r.mixRotate)*o,r.mixX+=(r.data.mixX-r.mixX)*o,r.mixY+=(r.data.mixY-r.mixY)*o}return}let c,f,u,g=ze.search(l,a,4),p=this.curves[g>>2];switch(p){case 0:let v=l[g];c=l[g+1],f=l[g+2],u=l[g+3];let b=(a-v)/(l[g+4]-v);c+=(l[g+4+1]-c)*b,f+=(l[g+4+2]-f)*b,u+=(l[g+4+3]-u)*b;break;case 1:c=l[g+1],f=l[g+2],u=l[g+3];break;default:c=this.getBezierValue(a,g,1,p-2),f=this.getBezierValue(a,g,2,p+18-2),u=this.getBezierValue(a,g,3,p+18*2-2)}if(s==X.setup){let v=r.data;r.mixRotate=v.mixRotate+(c-v.mixRotate)*o,r.mixX=v.mixX+(f-v.mixX)*o,r.mixY=v.mixY+(u-v.mixY)*o}else r.mixRotate+=(c-r.mixRotate)*o,r.mixX+=(f-r.mixX)*o,r.mixY+=(u-r.mixY)*o}}class _i extends Pt{constructor(t,i,a,n){super(t,i,n+"|"+a);m(this,"constraintIndex",0);this.constraintIndex=a}apply(t,i,a,n,o,s,h){let r;if(this.constraintIndex==-1){const l=a>=this.frames[0]?this.getCurveValue(a):0;for(const c of t.physicsConstraints)c.active&&this.global(c.data)&&this.set(c,this.getAbsoluteValue2(a,o,s,this.get(c),this.setup(c),l))}else r=t.physicsConstraints[this.constraintIndex],r.active&&this.set(r,this.getAbsoluteValue(a,o,s,this.get(r),this.setup(r)))}}class Tr extends _i{constructor(e,t,i){super(e,t,i,ke.physicsConstraintInertia)}setup(e){return e.data.inertia}get(e){return e.inertia}set(e,t){e.inertia=t}global(e){return e.inertiaGlobal}}class Ir extends _i{constructor(e,t,i){super(e,t,i,ke.physicsConstraintStrength)}setup(e){return e.data.strength}get(e){return e.strength}set(e,t){e.strength=t}global(e){return e.strengthGlobal}}class Lr extends _i{constructor(e,t,i){super(e,t,i,ke.physicsConstraintDamping)}setup(e){return e.data.damping}get(e){return e.damping}set(e,t){e.damping=t}global(e){return e.dampingGlobal}}class Rr extends _i{constructor(e,t,i){super(e,t,i,ke.physicsConstraintMass)}setup(e){return 1/e.data.massInverse}get(e){return 1/e.massInverse}set(e,t){e.massInverse=1/t}global(e){return e.massGlobal}}class Br extends _i{constructor(e,t,i){super(e,t,i,ke.physicsConstraintWind)}setup(e){return e.data.wind}get(e){return e.wind}set(e,t){e.wind=t}global(e){return e.windGlobal}}class Fr extends _i{constructor(e,t,i){super(e,t,i,ke.physicsConstraintGravity)}setup(e){return e.data.gravity}get(e){return e.gravity}set(e,t){e.gravity=t}global(e){return e.gravityGlobal}}class Pr extends _i{constructor(e,t,i){super(e,t,i,ke.physicsConstraintMix)}setup(e){return e.data.mix}get(e){return e.mix}set(e,t){e.mix=t}global(e){return e.mixGlobal}}const Ba=class Ba extends ze{constructor(t,i){super(t,Ba.propertyIds);m(this,"constraintIndex");this.constraintIndex=i}getFrameCount(){return this.frames.length}setFrame(t,i){this.frames[t]=i}apply(t,i,a,n,o,s,h){let r;if(this.constraintIndex!=-1&&(r=t.physicsConstraints[this.constraintIndex],!r.active))return;const l=this.frames;if(i>a)this.apply(t,i,Number.MAX_VALUE,[],o,s,h),i=-1;else if(i>=l[l.length-1])return;if(!(a<l[0])&&(i<l[0]||a>=l[ze.search1(l,i)+1]))if(r!=null)r.reset();else for(const c of t.physicsConstraints)c.active&&c.reset()}};m(Ba,"propertyIds",[ke.physicsConstraintReset.toString()]);let Aa=Ba;const wt=class wt extends ze{constructor(t,i,a){super(t,[ke.sequence+"|"+i+"|"+a.sequence.id]);m(this,"slotIndex");m(this,"attachment");this.slotIndex=i,this.attachment=a}getFrameEntries(){return wt.ENTRIES}getSlotIndex(){return this.slotIndex}getAttachment(){return this.attachment}setFrame(t,i,a,n,o){let s=this.frames;t*=wt.ENTRIES,s[t]=i,s[t+wt.MODE]=a|n<<4,s[t+wt.DELAY]=o}apply(t,i,a,n,o,s,h){let r=t.slots[this.slotIndex];if(!r.bone.active)return;let l=r.attachment,c=this.attachment;if(l!=c&&(!(l instanceof Rt)||l.timelineAttachment!=c))return;let f=this.frames;if(a<f[0]){(s==X.setup||s==X.first)&&(r.sequenceIndex=-1);return}let u=ze.search(f,a,wt.ENTRIES),g=f[u],p=f[u+wt.MODE],v=f[u+wt.DELAY];if(!this.attachment.sequence)return;let b=p>>4,w=this.attachment.sequence.regions.length,_=or[p&15];if(_!=nt.hold)switch(b+=(a-g)/v+1e-5|0,_){case nt.once:b=Math.min(w-1,b);break;case nt.loop:b%=w;break;case nt.pingpong:{let y=(w<<1)-2;b=y==0?0:b%y,b>=w&&(b=y-b);break}case nt.onceReverse:b=Math.max(w-1-b,0);break;case nt.loopReverse:b=w-1-b%w;break;case nt.pingpongReverse:{let y=(w<<1)-2;b=y==0?0:(b+w-1)%y,b>=w&&(b=y-b)}}r.sequenceIndex=b}};m(wt,"ENTRIES",3),m(wt,"MODE",1),m(wt,"DELAY",2);let Sa=wt;const Fi=class Fi{constructor(e){m(this,"data");m(this,"tracks",new Array);m(this,"timeScale",1);m(this,"unkeyedState",0);m(this,"events",new Array);m(this,"listeners",new Array);m(this,"queue",new nd(this));m(this,"propertyIDs",new nr);m(this,"animationsChanged",!1);m(this,"trackEntryPool",new xa(()=>new ad));this.data=e}static emptyAnimation(){return Fi._emptyAnimation}update(e){e*=this.timeScale;let t=this.tracks;for(let i=0,a=t.length;i<a;i++){let n=t[i];if(!n)continue;n.animationLast=n.nextAnimationLast,n.trackLast=n.nextTrackLast;let o=e*n.timeScale;if(n.delay>0){if(n.delay-=o,n.delay>0)continue;o=-n.delay,n.delay=0}let s=n.next;if(s){let h=n.trackLast-s.delay;if(h>=0){for(s.delay=0,s.trackTime+=n.timeScale==0?0:(h/n.timeScale+e)*s.timeScale,n.trackTime+=o,this.setCurrent(i,s,!0);s.mixingFrom;)s.mixTime+=e,s=s.mixingFrom;continue}}else if(n.trackLast>=n.trackEnd&&!n.mixingFrom){t[i]=null,this.queue.end(n),this.clearNext(n);continue}if(n.mixingFrom&&this.updateMixingFrom(n,e)){let h=n.mixingFrom;for(n.mixingFrom=null,h&&(h.mixingTo=null);h;)this.queue.end(h),h=h.mixingFrom}n.trackTime+=o}this.queue.drain()}updateMixingFrom(e,t){let i=e.mixingFrom;if(!i)return!0;let a=this.updateMixingFrom(i,t);return i.animationLast=i.nextAnimationLast,i.trackLast=i.nextTrackLast,e.mixTime>0&&e.mixTime>=e.mixDuration?((i.totalAlpha==0||e.mixDuration==0)&&(e.mixingFrom=i.mixingFrom,i.mixingFrom&&(i.mixingFrom.mixingTo=e),e.interruptAlpha=i.interruptAlpha,this.queue.end(i)),a):(i.trackTime+=t*i.timeScale,e.mixTime+=t,!1)}apply(e){if(!e)throw new Error("skeleton cannot be null.");this.animationsChanged&&this._animationsChanged();let t=this.events,i=this.tracks,a=!1;for(let f=0,u=i.length;f<u;f++){let g=i[f];if(!g||g.delay>0)continue;a=!0;let p=f==0?X.first:g.mixBlend,v=g.alpha;g.mixingFrom?v*=this.applyMixingFrom(g,e,p):g.trackTime>=g.trackEnd&&!g.next&&(v=0);let b=v>=g.alphaAttachmentThreshold,w=g.animationLast,_=g.getAnimationTime(),y=_,k=t;g.reverse&&(y=g.animation.duration-y,k=null);let C=g.animation.timelines,A=C.length;if(f==0&&v==1||p==X.add){f==0&&(b=!0);for(let E=0;E<A;E++){var n=C[E];n instanceof Ii?this.applyAttachmentTimeline(n,e,y,p,b):n.apply(e,w,y,k,v,p,ct.mixIn)}}else{let E=g.timelineMode,M=g.shortestRotation,B=!M&&g.timelinesRotation.length!=A<<1;B&&(g.timelinesRotation.length=A<<1);for(let F=0;F<A;F++){let Y=C[F],N=E[F]==$a?p:X.setup;!M&&Y instanceof ka?this.applyRotateTimeline(Y,e,y,v,N,g.timelinesRotation,F<<1,B):Y instanceof Ii?this.applyAttachmentTimeline(Y,e,y,p,b):Y.apply(e,w,y,k,v,N,ct.mixIn)}}this.queueEvents(g,_),t.length=0,g.nextAnimationLast=_,g.nextTrackLast=g.trackTime}for(var o=this.unkeyedState+os,s=e.slots,h=0,r=e.slots.length;h<r;h++){var l=s[h];if(l.attachmentState==o){var c=l.data.attachmentName;l.setAttachment(c?e.getAttachment(l.data.index,c):null)}}return this.unkeyedState+=2,this.queue.drain(),a}applyMixingFrom(e,t,i){let a=e.mixingFrom;a.mixingFrom&&this.applyMixingFrom(a,t,i);let n=0;e.mixDuration==0?(n=1,i==X.first&&(i=X.setup)):(n=e.mixTime/e.mixDuration,n>1&&(n=1),i!=X.first&&(i=a.mixBlend));let o=n<a.mixAttachmentThreshold,s=n<a.mixDrawOrderThreshold,h=a.animation.timelines,r=h.length,l=a.alpha*e.interruptAlpha,c=l*(1-n),f=a.animationLast,u=a.getAnimationTime(),g=u,p=null;if(a.reverse?g=a.animation.duration-g:n<a.eventThreshold&&(p=this.events),i==X.add)for(let v=0;v<r;v++)h[v].apply(t,f,g,p,c,i,ct.mixOut);else{let v=a.timelineMode,b=a.timelineHoldMix,w=a.shortestRotation,_=!w&&a.timelinesRotation.length!=r<<1;_&&(a.timelinesRotation.length=r<<1),a.totalAlpha=0;for(let y=0;y<r;y++){let k=h[y],C=ct.mixOut,A,E=0;switch(v[y]){case $a:if(!s&&k instanceof mi)continue;A=i,E=c;break;case ss:A=X.setup,E=c;break;case rs:A=i,E=l;break;case Ka:A=X.setup,E=l;break;default:A=X.setup;let M=b[y];E=l*Math.max(0,1-M.mixTime/M.mixDuration);break}a.totalAlpha+=E,!w&&k instanceof ka?this.applyRotateTimeline(k,t,g,E,A,a.timelinesRotation,y<<1,_):k instanceof Ii?this.applyAttachmentTimeline(k,t,g,A,o&&E>=a.alphaAttachmentThreshold):(s&&k instanceof mi&&A==X.setup&&(C=ct.mixIn),k.apply(t,f,g,p,E,A,C))}}return e.mixDuration>0&&this.queueEvents(a,u),this.events.length=0,a.nextAnimationLast=u,a.nextTrackLast=a.trackTime,n}applyAttachmentTimeline(e,t,i,a,n){var o=t.slots[e.slotIndex];o.bone.active&&(i<e.frames[0]?(a==X.setup||a==X.first)&&this.setAttachment(t,o,o.data.attachmentName,n):this.setAttachment(t,o,e.attachmentNames[ze.search1(e.frames,i)],n),o.attachmentState<=this.unkeyedState&&(o.attachmentState=this.unkeyedState+os))}setAttachment(e,t,i,a){t.setAttachment(i?e.getAttachment(t.data.index,i):null),a&&(t.attachmentState=this.unkeyedState+rd)}applyRotateTimeline(e,t,i,a,n,o,s,h){if(h&&(o[s]=0),a==1){e.apply(t,0,i,null,1,n,ct.mixIn);return}let r=t.bones[e.boneIndex];if(!r.active)return;let l=e.frames,c=0,f=0;if(i<l[0])switch(n){case X.setup:r.rotation=r.data.rotation;default:return;case X.first:c=r.rotation,f=r.data.rotation}else c=n==X.setup?r.data.rotation:r.rotation,f=r.data.rotation+e.getCurveValue(i);let u=0,g=f-c;if(g-=Math.ceil(g/360-.5)*360,g==0)u=o[s];else{let p=0,v=0;h?(p=0,v=g):(p=o[s],v=o[s+1]);let b=p-p%360;u=g+b;let w=g>=0,_=p>=0;Math.abs(v)<=90&&q.signum(v)!=q.signum(g)&&(Math.abs(p-b)>180?(u+=360*q.signum(p),_=w):b!=0?u-=360*q.signum(p):_=w),_!=w&&(u+=360*q.signum(p)),o[s]=u}o[s+1]=g,r.rotation=c+u*a}queueEvents(e,t){let i=e.animationStart,a=e.animationEnd,n=a-i,o=e.trackLast%n,s=this.events,h=0,r=s.length;for(;h<r;h++){let c=s[h];if(c.time<o)break;c.time>a||this.queue.event(e,c)}let l=!1;if(e.loop)if(n==0)l=!0;else{const c=Math.floor(e.trackTime/n);l=c>0&&c>Math.floor(e.trackLast/n)}else l=t>=a&&e.animationLast<a;for(l&&this.queue.complete(e);h<r;h++){let c=s[h];c.time<i||this.queue.event(e,c)}}clearTracks(){let e=this.queue.drainDisabled;this.queue.drainDisabled=!0;for(let t=0,i=this.tracks.length;t<i;t++)this.clearTrack(t);this.tracks.length=0,this.queue.drainDisabled=e,this.queue.drain()}clearTrack(e){if(e>=this.tracks.length)return;let t=this.tracks[e];if(!t)return;this.queue.end(t),this.clearNext(t);let i=t;for(;;){let a=i.mixingFrom;if(!a)break;this.queue.end(a),i.mixingFrom=null,i.mixingTo=null,i=a}this.tracks[t.trackIndex]=null,this.queue.drain()}setCurrent(e,t,i){let a=this.expandToIndex(e);this.tracks[e]=t,t.previous=null,a&&(i&&this.queue.interrupt(a),t.mixingFrom=a,a.mixingTo=t,t.mixTime=0,a.mixingFrom&&a.mixDuration>0&&(t.interruptAlpha*=Math.min(1,a.mixTime/a.mixDuration)),a.timelinesRotation.length=0),this.queue.start(t)}setAnimation(e,t,i=!1){let a=this.data.skeletonData.findAnimation(t);if(!a)throw new Error("Animation not found: "+t);return this.setAnimationWith(e,a,i)}setAnimationWith(e,t,i=!1){if(!t)throw new Error("animation cannot be null.");let a=!0,n=this.expandToIndex(e);n&&(n.nextTrackLast==-1?(this.tracks[e]=n.mixingFrom,this.queue.interrupt(n),this.queue.end(n),this.clearNext(n),n=n.mixingFrom,a=!1):this.clearNext(n));let o=this.trackEntry(e,t,i,n);return this.setCurrent(e,o,a),this.queue.drain(),o}addAnimation(e,t,i=!1,a=0){let n=this.data.skeletonData.findAnimation(t);if(!n)throw new Error("Animation not found: "+t);return this.addAnimationWith(e,n,i,a)}addAnimationWith(e,t,i=!1,a=0){if(!t)throw new Error("animation cannot be null.");let n=this.expandToIndex(e);if(n)for(;n.next;)n=n.next;let o=this.trackEntry(e,t,i,n);return n?(n.next=o,o.previous=n,a<=0&&(a+=n.getTrackComplete()-o.mixDuration)):(this.setCurrent(e,o,!0),this.queue.drain()),o.delay=a,o}setEmptyAnimation(e,t=0){let i=this.setAnimationWith(e,Fi.emptyAnimation(),!1);return i.mixDuration=t,i.trackEnd=t,i}addEmptyAnimation(e,t=0,i=0){let a=this.addAnimationWith(e,Fi.emptyAnimation(),!1,i);return i<=0&&(a.delay+=a.mixDuration-t),a.mixDuration=t,a.trackEnd=t,a}setEmptyAnimations(e=0){let t=this.queue.drainDisabled;this.queue.drainDisabled=!0;for(let i=0,a=this.tracks.length;i<a;i++){let n=this.tracks[i];n&&this.setEmptyAnimation(n.trackIndex,e)}this.queue.drainDisabled=t,this.queue.drain()}expandToIndex(e){return e<this.tracks.length?this.tracks[e]:(j.ensureArrayCapacity(this.tracks,e+1,null),this.tracks.length=e+1,null)}trackEntry(e,t,i,a){let n=this.trackEntryPool.obtain();return n.reset(),n.trackIndex=e,n.animation=t,n.loop=i,n.holdPrevious=!1,n.reverse=!1,n.shortestRotation=!1,n.eventThreshold=0,n.alphaAttachmentThreshold=0,n.mixAttachmentThreshold=0,n.mixDrawOrderThreshold=0,n.animationStart=0,n.animationEnd=t.duration,n.animationLast=-1,n.nextAnimationLast=-1,n.delay=0,n.trackTime=0,n.trackLast=-1,n.nextTrackLast=-1,n.trackEnd=Number.MAX_VALUE,n.timeScale=1,n.alpha=1,n.mixTime=0,n.mixDuration=a?this.data.getMix(a.animation,t):0,n.interruptAlpha=1,n.totalAlpha=0,n.mixBlend=X.replace,n}clearNext(e){let t=e.next;for(;t;)this.queue.dispose(t),t=t.next;e.next=null}_animationsChanged(){this.animationsChanged=!1,this.propertyIDs.clear();let e=this.tracks;for(let t=0,i=e.length;t<i;t++){let a=e[t];if(a){for(;a.mixingFrom;)a=a.mixingFrom;do(!a.mixingTo||a.mixBlend!=X.add)&&this.computeHold(a),a=a.mixingTo;while(a)}}}computeHold(e){let t=e.mixingTo,i=e.animation.timelines,a=e.animation.timelines.length,n=e.timelineMode;n.length=a;let o=e.timelineHoldMix;o.length=0;let s=this.propertyIDs;if(t&&t.holdPrevious){for(let h=0;h<a;h++)n[h]=s.addAll(i[h].getPropertyIds())?Ka:rs;return}e:for(let h=0;h<a;h++){let r=i[h],l=r.getPropertyIds();if(!s.addAll(l))n[h]=$a;else if(!t||r instanceof Ii||r instanceof mi||r instanceof na||!t.animation.hasTimeline(l))n[h]=ss;else{for(let c=t.mixingTo;c;c=c.mixingTo)if(!c.animation.hasTimeline(l)){if(e.mixDuration>0){n[h]=sd,o[h]=c;continue e}break}n[h]=Ka}}}getCurrent(e){return e>=this.tracks.length?null:this.tracks[e]}addListener(e){if(!e)throw new Error("listener cannot be null.");this.listeners.push(e)}removeListener(e){let t=this.listeners.indexOf(e);t>=0&&this.listeners.splice(t,1)}clearListeners(){this.listeners.length=0}clearListenerNotifications(){this.queue.clear()}};m(Fi,"_emptyAnimation",new Fn("<empty>",[],0));let fn=Fi;class ad{constructor(){m(this,"animation",null);m(this,"previous",null);m(this,"next",null);m(this,"mixingFrom",null);m(this,"mixingTo",null);m(this,"listener",null);m(this,"trackIndex",0);m(this,"loop",!1);m(this,"holdPrevious",!1);m(this,"reverse",!1);m(this,"shortestRotation",!1);m(this,"eventThreshold",0);m(this,"mixAttachmentThreshold",0);m(this,"alphaAttachmentThreshold",0);m(this,"mixDrawOrderThreshold",0);m(this,"animationStart",0);m(this,"animationEnd",0);m(this,"animationLast",0);m(this,"nextAnimationLast",0);m(this,"delay",0);m(this,"trackTime",0);m(this,"trackLast",0);m(this,"nextTrackLast",0);m(this,"trackEnd",0);m(this,"timeScale",0);m(this,"alpha",0);m(this,"mixTime",0);m(this,"_mixDuration",0);m(this,"interruptAlpha",0);m(this,"totalAlpha",0);m(this,"mixBlend",X.replace);m(this,"timelineMode",new Array);m(this,"timelineHoldMix",new Array);m(this,"timelinesRotation",new Array)}get mixDuration(){return this._mixDuration}set mixDuration(e){this._mixDuration=e}setMixDurationWithDelay(e,t){this._mixDuration=e,this.previous!=null&&t<=0&&(t+=this.previous.getTrackComplete()-e),this.delay=t}reset(){this.next=null,this.previous=null,this.mixingFrom=null,this.mixingTo=null,this.animation=null,this.listener=null,this.timelineMode.length=0,this.timelineHoldMix.length=0,this.timelinesRotation.length=0}getAnimationTime(){if(this.loop){let e=this.animationEnd-this.animationStart;return e==0?this.animationStart:this.trackTime%e+this.animationStart}return Math.min(this.trackTime+this.animationStart,this.animationEnd)}setAnimationLast(e){this.animationLast=e,this.nextAnimationLast=e}isComplete(){return this.trackTime>=this.animationEnd-this.animationStart}resetRotationDirections(){this.timelinesRotation.length=0}getTrackComplete(){let e=this.animationEnd-this.animationStart;if(e!=0){if(this.loop)return e*(1+(this.trackTime/e|0));if(this.trackTime<e)return e}return this.trackTime}wasApplied(){return this.nextTrackLast!=-1}isNextReady(){return this.next!=null&&this.nextTrackLast-this.next.delay>=0}}class nd{constructor(e){m(this,"objects",[]);m(this,"drainDisabled",!1);m(this,"animState");this.animState=e}start(e){this.objects.push(ut.start),this.objects.push(e),this.animState.animationsChanged=!0}interrupt(e){this.objects.push(ut.interrupt),this.objects.push(e)}end(e){this.objects.push(ut.end),this.objects.push(e),this.animState.animationsChanged=!0}dispose(e){this.objects.push(ut.dispose),this.objects.push(e)}complete(e){this.objects.push(ut.complete),this.objects.push(e)}event(e,t){this.objects.push(ut.event),this.objects.push(e),this.objects.push(t)}drain(){if(this.drainDisabled)return;this.drainDisabled=!0;let e=this.objects,t=this.animState.listeners;for(let i=0;i<e.length;i+=2){let a=e[i],n=e[i+1];switch(a){case ut.start:n.listener&&n.listener.start&&n.listener.start(n);for(let s=0;s<t.length;s++){let h=t[s];h.start&&h.start(n)}break;case ut.interrupt:n.listener&&n.listener.interrupt&&n.listener.interrupt(n);for(let s=0;s<t.length;s++){let h=t[s];h.interrupt&&h.interrupt(n)}break;case ut.end:n.listener&&n.listener.end&&n.listener.end(n);for(let s=0;s<t.length;s++){let h=t[s];h.end&&h.end(n)}case ut.dispose:n.listener&&n.listener.dispose&&n.listener.dispose(n);for(let s=0;s<t.length;s++){let h=t[s];h.dispose&&h.dispose(n)}this.animState.trackEntryPool.free(n);break;case ut.complete:n.listener&&n.listener.complete&&n.listener.complete(n);for(let s=0;s<t.length;s++){let h=t[s];h.complete&&h.complete(n)}break;case ut.event:let o=e[i+++2];n.listener&&n.listener.event&&n.listener.event(n,o);for(let s=0;s<t.length;s++){let h=t[s];h.event&&h.event(n,o)}break}}this.clear(),this.drainDisabled=!1}clear(){this.objects.length=0}}var ut;(function(d){d[d.start=0]="start",d[d.interrupt=1]="interrupt",d[d.end=2]="end",d[d.dispose=3]="dispose",d[d.complete=4]="complete",d[d.event=5]="event"})(ut||(ut={}));const $a=0,ss=1,rs=2,Ka=3,sd=4,os=1,rd=2;class od{constructor(e){m(this,"skeletonData");m(this,"animationToMixTime",{});m(this,"defaultMix",0);if(!e)throw new Error("skeletonData cannot be null.");this.skeletonData=e}setMix(e,t,i){let a=this.skeletonData.findAnimation(e);if(!a)throw new Error("Animation not found: "+e);let n=this.skeletonData.findAnimation(t);if(!n)throw new Error("Animation not found: "+t);this.setMixWith(a,n,i)}setMixWith(e,t,i){if(!e)throw new Error("from cannot be null.");if(!t)throw new Error("to cannot be null.");let a=e.name+"."+t.name;this.animationToMixTime[a]=i}getMix(e,t){let i=e.name+"."+t.name,a=this.animationToMixTime[i];return a===void 0?this.defaultMix:a}}class Va extends Rt{constructor(t){super(t);m(this,"color",new K(1,1,1,1))}copy(){let t=new Va(this.name);return this.copyTo(t),t.color.setFromColor(this.color),t}}class ji extends Rt{constructor(t){super(t);m(this,"endSlot",null);m(this,"color",new K(.2275,.2275,.8078,1))}copy(){let t=new ji(this.name);return this.copyTo(t),t.endSlot=this.endSlot,t.color.setFromColor(this.color),t}}class ld{constructor(e){m(this,"_image");this._image=e}getImage(){return this._image}}var Ze;(function(d){d[d.Nearest=9728]="Nearest",d[d.Linear=9729]="Linear",d[d.MipMap=9987]="MipMap",d[d.MipMapNearestNearest=9984]="MipMapNearestNearest",d[d.MipMapLinearNearest=9985]="MipMapLinearNearest",d[d.MipMapNearestLinear=9986]="MipMapNearestLinear",d[d.MipMapLinearLinear=9987]="MipMapLinearLinear"})(Ze||(Ze={}));var Xi;(function(d){d[d.MirroredRepeat=33648]="MirroredRepeat",d[d.ClampToEdge=33071]="ClampToEdge",d[d.Repeat=10497]="Repeat"})(Xi||(Xi={}));class cd{constructor(){m(this,"texture");m(this,"u",0);m(this,"v",0);m(this,"u2",0);m(this,"v2",0);m(this,"width",0);m(this,"height",0);m(this,"degrees",0);m(this,"offsetX",0);m(this,"offsetY",0);m(this,"originalWidth",0);m(this,"originalHeight",0)}}class hd{constructor(e){m(this,"pages",new Array);m(this,"regions",new Array);let t=new dd(e),i=new Array(4),a={};a.size=l=>{l.width=parseInt(i[1]),l.height=parseInt(i[2])},a.format=()=>{},a.filter=l=>{l.minFilter=j.enumValue(Ze,i[1]),l.magFilter=j.enumValue(Ze,i[2])},a.repeat=l=>{i[1].indexOf("x")!=-1&&(l.uWrap=Xi.Repeat),i[1].indexOf("y")!=-1&&(l.vWrap=Xi.Repeat)},a.pma=l=>{l.pma=i[1]=="true"};var n={};n.xy=l=>{l.x=parseInt(i[1]),l.y=parseInt(i[2])},n.size=l=>{l.width=parseInt(i[1]),l.height=parseInt(i[2])},n.bounds=l=>{l.x=parseInt(i[1]),l.y=parseInt(i[2]),l.width=parseInt(i[3]),l.height=parseInt(i[4])},n.offset=l=>{l.offsetX=parseInt(i[1]),l.offsetY=parseInt(i[2])},n.orig=l=>{l.originalWidth=parseInt(i[1]),l.originalHeight=parseInt(i[2])},n.offsets=l=>{l.offsetX=parseInt(i[1]),l.offsetY=parseInt(i[2]),l.originalWidth=parseInt(i[3]),l.originalHeight=parseInt(i[4])},n.rotate=l=>{let c=i[1];c=="true"?l.degrees=90:c!="false"&&(l.degrees=parseInt(c))},n.index=l=>{l.index=parseInt(i[1])};let o=t.readLine();for(;o&&o.trim().length==0;)o=t.readLine();for(;!(!o||o.trim().length==0||t.readEntry(i,o)==0);)o=t.readLine();let s=null,h=null,r=null;for(;o!==null;)if(o.trim().length==0)s=null,o=t.readLine();else if(s){let l=new Or(s,o);for(;;){let c=t.readEntry(i,o=t.readLine());if(c==0)break;let f=n[i[0]];if(f)f(l);else{h||(h=[]),r||(r=[]),h.push(i[0]);let u=[];for(let g=0;g<c;g++)u.push(parseInt(i[g+1]));r.push(u)}}l.originalWidth==0&&l.originalHeight==0&&(l.originalWidth=l.width,l.originalHeight=l.height),h&&h.length>0&&r&&r.length>0&&(l.names=h,l.values=r,h=null,r=null),l.u=l.x/s.width,l.v=l.y/s.height,l.degrees==90?(l.u2=(l.x+l.height)/s.width,l.v2=(l.y+l.width)/s.height):(l.u2=(l.x+l.width)/s.width,l.v2=(l.y+l.height)/s.height),this.regions.push(l)}else{for(s=new ud(o.trim());t.readEntry(i,o=t.readLine())!=0;){let l=a[i[0]];l&&l(s)}this.pages.push(s)}}findRegion(e){for(let t=0;t<this.regions.length;t++)if(this.regions[t].name==e)return this.regions[t];return null}setTextures(e,t=""){for(let i of this.pages)i.setTexture(e.get(t+i.name))}dispose(){var e;for(let t=0;t<this.pages.length;t++)(e=this.pages[t].texture)==null||e.dispose()}}class dd{constructor(e){m(this,"lines");m(this,"index",0);this.lines=e.split(/\r\n|\r|\n/)}readLine(){return this.index>=this.lines.length?null:this.lines[this.index++]}readEntry(e,t){if(!t||(t=t.trim(),t.length==0))return 0;let i=t.indexOf(":");if(i==-1)return 0;e[0]=t.substr(0,i).trim();for(let a=1,n=i+1;;a++){let o=t.indexOf(",",n);if(o==-1)return e[a]=t.substr(n).trim(),a;if(e[a]=t.substr(n,o-n).trim(),n=o+1,a==4)return 4}}}class ud{constructor(e){m(this,"name");m(this,"minFilter",Ze.Nearest);m(this,"magFilter",Ze.Nearest);m(this,"uWrap",Xi.ClampToEdge);m(this,"vWrap",Xi.ClampToEdge);m(this,"texture",null);m(this,"width",0);m(this,"height",0);m(this,"pma",!1);m(this,"regions",new Array);this.name=e}setTexture(e){this.texture=e,e.setFilters(this.minFilter,this.magFilter),e.setWraps(this.uWrap,this.vWrap);for(let t of this.regions)t.texture=e}}class Or extends cd{constructor(t,i){super();m(this,"page");m(this,"name");m(this,"x",0);m(this,"y",0);m(this,"offsetX",0);m(this,"offsetY",0);m(this,"originalWidth",0);m(this,"originalHeight",0);m(this,"index",0);m(this,"degrees",0);m(this,"names",null);m(this,"values",null);this.page=t,this.name=i,t.regions.push(this)}}class hi extends Rt{constructor(t,i){super(t);m(this,"region",null);m(this,"path");m(this,"regionUVs",[]);m(this,"uvs",[]);m(this,"triangles",[]);m(this,"color",new K(1,1,1,1));m(this,"width",0);m(this,"height",0);m(this,"hullLength",0);m(this,"edges",[]);m(this,"parentMesh",null);m(this,"sequence",null);m(this,"tempColor",new K(0,0,0,0));this.path=i}updateRegion(){if(!this.region)throw new Error("Region not set.");let t=this.regionUVs;(!this.uvs||this.uvs.length!=t.length)&&(this.uvs=j.newFloatArray(t.length));let i=this.uvs,a=this.uvs.length,n=this.region.u,o=this.region.v,s=0,h=0;if(this.region instanceof Or){let r=this.region,l=r.page,c=l.width,f=l.height;switch(r.degrees){case 90:n-=(r.originalHeight-r.offsetY-r.height)/c,o-=(r.originalWidth-r.offsetX-r.width)/f,s=r.originalHeight/c,h=r.originalWidth/f;for(let u=0;u<a;u+=2)i[u]=n+t[u+1]*s,i[u+1]=o+(1-t[u])*h;return;case 180:n-=(r.originalWidth-r.offsetX-r.width)/c,o-=r.offsetY/f,s=r.originalWidth/c,h=r.originalHeight/f;for(let u=0;u<a;u+=2)i[u]=n+(1-t[u])*s,i[u+1]=o+(1-t[u+1])*h;return;case 270:n-=r.offsetY/c,o-=r.offsetX/f,s=r.originalHeight/c,h=r.originalWidth/f;for(let u=0;u<a;u+=2)i[u]=n+(1-t[u+1])*s,i[u+1]=o+t[u]*h;return}n-=r.offsetX/c,o-=(r.originalHeight-r.offsetY-r.height)/f,s=r.originalWidth/c,h=r.originalHeight/f}else this.region?(s=this.region.u2-n,h=this.region.v2-o):(n=o=0,s=h=1);for(let r=0;r<a;r+=2)i[r]=n+t[r]*s,i[r+1]=o+t[r+1]*h}getParentMesh(){return this.parentMesh}setParentMesh(t){this.parentMesh=t,t&&(this.bones=t.bones,this.vertices=t.vertices,this.worldVerticesLength=t.worldVerticesLength,this.regionUVs=t.regionUVs,this.triangles=t.triangles,this.hullLength=t.hullLength,this.worldVerticesLength=t.worldVerticesLength)}copy(){if(this.parentMesh)return this.newLinkedMesh();let t=new hi(this.name,this.path);return t.region=this.region,t.color.setFromColor(this.color),this.copyTo(t),t.regionUVs=new Array(this.regionUVs.length),j.arrayCopy(this.regionUVs,0,t.regionUVs,0,this.regionUVs.length),t.uvs=new Array(this.uvs.length),j.arrayCopy(this.uvs,0,t.uvs,0,this.uvs.length),t.triangles=new Array(this.triangles.length),j.arrayCopy(this.triangles,0,t.triangles,0,this.triangles.length),t.hullLength=this.hullLength,t.sequence=this.sequence!=null?this.sequence.copy():null,this.edges&&(t.edges=new Array(this.edges.length),j.arrayCopy(this.edges,0,t.edges,0,this.edges.length)),t.width=this.width,t.height=this.height,t}computeWorldVertices(t,i,a,n,o,s){this.sequence!=null&&this.sequence.apply(t,this),super.computeWorldVertices(t,i,a,n,o,s)}newLinkedMesh(){let t=new hi(this.name,this.path);return t.region=this.region,t.color.setFromColor(this.color),t.timelineAttachment=this.timelineAttachment,t.setParentMesh(this.parentMesh?this.parentMesh:this),t.region!=null&&t.updateRegion(),t}}class pi extends Rt{constructor(t){super(t);m(this,"lengths",[]);m(this,"closed",!1);m(this,"constantSpeed",!1);m(this,"color",new K(1,1,1,1))}copy(){let t=new pi(this.name);return this.copyTo(t),t.lengths=new Array(this.lengths.length),j.arrayCopy(this.lengths,0,t.lengths,0,this.lengths.length),t.closed=closed,t.constantSpeed=this.constantSpeed,t.color.setFromColor(this.color),t}}class On extends Rt{constructor(t){super(t);m(this,"x",0);m(this,"y",0);m(this,"rotation",0);m(this,"color",new K(.38,.94,0,1))}computeWorldPosition(t,i){return i.x=this.x*t.a+this.y*t.b+t.worldX,i.y=this.x*t.c+this.y*t.d+t.worldY,i}computeWorldRotation(t){const i=this.rotation*q.degRad,a=Math.cos(i),n=Math.sin(i),o=a*t.a+n*t.b,s=a*t.c+n*t.d;return q.atan2Deg(s,o)}copy(){let t=new On(this.name);return t.x=this.x,t.y=this.y,t.rotation=this.rotation,t.color.setFromColor(this.color),t}}const Be=class Be extends rr{constructor(t,i){super(t);m(this,"x",0);m(this,"y",0);m(this,"scaleX",1);m(this,"scaleY",1);m(this,"rotation",0);m(this,"width",0);m(this,"height",0);m(this,"color",new K(1,1,1,1));m(this,"path");m(this,"region",null);m(this,"sequence",null);m(this,"offset",j.newFloatArray(8));m(this,"uvs",j.newFloatArray(8));m(this,"tempColor",new K(1,1,1,1));this.path=i}updateRegion(){if(!this.region)throw new Error("Region not set.");let t=this.region,i=this.uvs;if(t==null){i[0]=0,i[1]=0,i[2]=0,i[3]=1,i[4]=1,i[5]=1,i[6]=1,i[7]=0;return}let a=this.width/this.region.originalWidth*this.scaleX,n=this.height/this.region.originalHeight*this.scaleY,o=-this.width/2*this.scaleX+this.region.offsetX*a,s=-this.height/2*this.scaleY+this.region.offsetY*n,h=o+this.region.width*a,r=s+this.region.height*n,l=this.rotation*q.degRad,c=Math.cos(l),f=Math.sin(l),u=this.x,g=this.y,p=o*c+u,v=o*f,b=s*c+g,w=s*f,_=h*c+u,y=h*f,k=r*c+g,C=r*f,A=this.offset;A[0]=p-w,A[1]=b+v,A[2]=p-C,A[3]=k+v,A[4]=_-C,A[5]=k+y,A[6]=_-w,A[7]=b+y,t.degrees==90?(i[0]=t.u2,i[1]=t.v2,i[2]=t.u,i[3]=t.v2,i[4]=t.u,i[5]=t.v,i[6]=t.u2,i[7]=t.v):(i[0]=t.u,i[1]=t.v2,i[2]=t.u,i[3]=t.v,i[4]=t.u2,i[5]=t.v,i[6]=t.u2,i[7]=t.v2)}computeWorldVertices(t,i,a,n){this.sequence!=null&&this.sequence.apply(t,this);let o=t.bone,s=this.offset,h=o.worldX,r=o.worldY,l=o.a,c=o.b,f=o.c,u=o.d,g=0,p=0;g=s[0],p=s[1],i[a]=g*l+p*c+h,i[a+1]=g*f+p*u+r,a+=n,g=s[2],p=s[3],i[a]=g*l+p*c+h,i[a+1]=g*f+p*u+r,a+=n,g=s[4],p=s[5],i[a]=g*l+p*c+h,i[a+1]=g*f+p*u+r,a+=n,g=s[6],p=s[7],i[a]=g*l+p*c+h,i[a+1]=g*f+p*u+r}copy(){let t=new Be(this.name,this.path);return t.region=this.region,t.x=this.x,t.y=this.y,t.scaleX=this.scaleX,t.scaleY=this.scaleY,t.rotation=this.rotation,t.width=this.width,t.height=this.height,j.arrayCopy(this.uvs,0,t.uvs,0,8),j.arrayCopy(this.offset,0,t.offset,0,8),t.color.setFromColor(this.color),t.sequence=this.sequence!=null?this.sequence.copy():null,t}};m(Be,"X1",0),m(Be,"Y1",1),m(Be,"C1R",2),m(Be,"C1G",3),m(Be,"C1B",4),m(Be,"C1A",5),m(Be,"U1",6),m(Be,"V1",7),m(Be,"X2",8),m(Be,"Y2",9),m(Be,"C2R",10),m(Be,"C2G",11),m(Be,"C2B",12),m(Be,"C2A",13),m(Be,"U2",14),m(Be,"V2",15),m(Be,"X3",16),m(Be,"Y3",17),m(Be,"C3R",18),m(Be,"C3G",19),m(Be,"C3B",20),m(Be,"C3A",21),m(Be,"U3",22),m(Be,"V3",23),m(Be,"X4",24),m(Be,"Y4",25),m(Be,"C4R",26),m(Be,"C4G",27),m(Be,"C4B",28),m(Be,"C4A",29),m(Be,"U4",30),m(Be,"V4",31);let zi=Be;class md{constructor(e){m(this,"atlas");this.atlas=e}loadSequence(e,t,i){let a=i.regions;for(let n=0,o=a.length;n<o;n++){let s=i.getPath(t,n),h=this.atlas.findRegion(s);if(h==null)throw new Error("Region not found in atlas: "+s+" (sequence: "+e+")");a[n]=h}}newRegionAttachment(e,t,i,a){let n=new zi(t,i);if(a!=null)this.loadSequence(t,i,a);else{let o=this.atlas.findRegion(i);if(!o)throw new Error("Region not found in atlas: "+i+" (region attachment: "+t+")");n.region=o}return n}newMeshAttachment(e,t,i,a){let n=new hi(t,i);if(a!=null)this.loadSequence(t,i,a);else{let o=this.atlas.findRegion(i);if(!o)throw new Error("Region not found in atlas: "+i+" (mesh attachment: "+t+")");n.region=o}return n}newBoundingBoxAttachment(e,t){return new Va(t)}newPathAttachment(e,t){return new pi(t)}newPointAttachment(e,t){return new On(t)}newClippingAttachment(e,t){return new ji(t)}}class Yr{constructor(e,t,i){m(this,"index",0);m(this,"name");m(this,"parent",null);m(this,"length",0);m(this,"x",0);m(this,"y",0);m(this,"rotation",0);m(this,"scaleX",1);m(this,"scaleY",1);m(this,"shearX",0);m(this,"shearY",0);m(this,"inherit",Ge.Normal);m(this,"skinRequired",!1);m(this,"color",new K);m(this,"icon");m(this,"visible",!1);if(e<0)throw new Error("index must be >= 0.");if(!t)throw new Error("name cannot be null.");this.index=e,this.name=t,this.parent=i}}var Ge;(function(d){d[d.Normal=0]="Normal",d[d.OnlyTranslation=1]="OnlyTranslation",d[d.NoRotationOrReflection=2]="NoRotationOrReflection",d[d.NoScale=3]="NoScale",d[d.NoScaleOrReflection=4]="NoScaleOrReflection"})(Ge||(Ge={}));class ls{constructor(e,t,i){m(this,"data");m(this,"skeleton");m(this,"parent",null);m(this,"children",new Array);m(this,"x",0);m(this,"y",0);m(this,"rotation",0);m(this,"scaleX",0);m(this,"scaleY",0);m(this,"shearX",0);m(this,"shearY",0);m(this,"ax",0);m(this,"ay",0);m(this,"arotation",0);m(this,"ascaleX",0);m(this,"ascaleY",0);m(this,"ashearX",0);m(this,"ashearY",0);m(this,"a",0);m(this,"b",0);m(this,"c",0);m(this,"d",0);m(this,"worldY",0);m(this,"worldX",0);m(this,"inherit",Ge.Normal);m(this,"sorted",!1);m(this,"active",!1);if(!e)throw new Error("data cannot be null.");if(!t)throw new Error("skeleton cannot be null.");this.data=e,this.skeleton=t,this.parent=i,this.setToSetupPose()}isActive(){return this.active}update(e){this.updateWorldTransformWith(this.ax,this.ay,this.arotation,this.ascaleX,this.ascaleY,this.ashearX,this.ashearY)}updateWorldTransform(){this.updateWorldTransformWith(this.x,this.y,this.rotation,this.scaleX,this.scaleY,this.shearX,this.shearY)}updateWorldTransformWith(e,t,i,a,n,o,s){this.ax=e,this.ay=t,this.arotation=i,this.ascaleX=a,this.ascaleY=n,this.ashearX=o,this.ashearY=s;let h=this.parent;if(!h){let u=this.skeleton;const g=u.scaleX,p=u.scaleY,v=(i+o)*q.degRad,b=(i+90+s)*q.degRad;this.a=Math.cos(v)*a*g,this.b=Math.cos(b)*n*g,this.c=Math.sin(v)*a*p,this.d=Math.sin(b)*n*p,this.worldX=e*g+u.x,this.worldY=t*p+u.y;return}let r=h.a,l=h.b,c=h.c,f=h.d;switch(this.worldX=r*e+l*t+h.worldX,this.worldY=c*e+f*t+h.worldY,this.inherit){case Ge.Normal:{const u=(i+o)*q.degRad,g=(i+90+s)*q.degRad,p=Math.cos(u)*a,v=Math.cos(g)*n,b=Math.sin(u)*a,w=Math.sin(g)*n;this.a=r*p+l*b,this.b=r*v+l*w,this.c=c*p+f*b,this.d=c*v+f*w;return}case Ge.OnlyTranslation:{const u=(i+o)*q.degRad,g=(i+90+s)*q.degRad;this.a=Math.cos(u)*a,this.b=Math.cos(g)*n,this.c=Math.sin(u)*a,this.d=Math.sin(g)*n;break}case Ge.NoRotationOrReflection:{let u=1/this.skeleton.scaleX,g=1/this.skeleton.scaleY;r*=u,c*=g;let p=r*r+c*c,v=0;p>1e-4?(p=Math.abs(r*f*g-l*u*c)/p,l=c*p,f=r*p,v=Math.atan2(c,r)*q.radDeg):(r=0,c=0,v=90-Math.atan2(f,l)*q.radDeg);const b=(i+o-v)*q.degRad,w=(i+s-v+90)*q.degRad,_=Math.cos(b)*a,y=Math.cos(w)*n,k=Math.sin(b)*a,C=Math.sin(w)*n;this.a=r*_-l*k,this.b=r*y-l*C,this.c=c*_+f*k,this.d=c*y+f*C;break}case Ge.NoScale:case Ge.NoScaleOrReflection:{i*=q.degRad;const u=Math.cos(i),g=Math.sin(i);let p=(r*u+l*g)/this.skeleton.scaleX,v=(c*u+f*g)/this.skeleton.scaleY,b=Math.sqrt(p*p+v*v);b>1e-5&&(b=1/b),p*=b,v*=b,b=Math.sqrt(p*p+v*v),this.inherit==Ge.NoScale&&r*f-l*c<0!=(this.skeleton.scaleX<0!=this.skeleton.scaleY<0)&&(b=-b),i=Math.PI/2+Math.atan2(v,p);const w=Math.cos(i)*b,_=Math.sin(i)*b;o*=q.degRad,s=(90+s)*q.degRad;const y=Math.cos(o)*a,k=Math.cos(s)*n,C=Math.sin(o)*a,A=Math.sin(s)*n;this.a=p*y+w*C,this.b=p*k+w*A,this.c=v*y+_*C,this.d=v*k+_*A;break}}this.a*=this.skeleton.scaleX,this.b*=this.skeleton.scaleX,this.c*=this.skeleton.scaleY,this.d*=this.skeleton.scaleY}setToSetupPose(){let e=this.data;this.x=e.x,this.y=e.y,this.rotation=e.rotation,this.scaleX=e.scaleX,this.scaleY=e.scaleY,this.shearX=e.shearX,this.shearY=e.shearY,this.inherit=e.inherit}updateAppliedTransform(){let e=this.parent;if(!e){this.ax=this.worldX-this.skeleton.x,this.ay=this.worldY-this.skeleton.y,this.arotation=Math.atan2(this.c,this.a)*q.radDeg,this.ascaleX=Math.sqrt(this.a*this.a+this.c*this.c),this.ascaleY=Math.sqrt(this.b*this.b+this.d*this.d),this.ashearX=0,this.ashearY=Math.atan2(this.a*this.b+this.c*this.d,this.a*this.d-this.b*this.c)*q.radDeg;return}let t=e.a,i=e.b,a=e.c,n=e.d,o=1/(t*n-i*a),s=n*o,h=i*o,r=a*o,l=t*o,c=this.worldX-e.worldX,f=this.worldY-e.worldY;this.ax=c*s-f*h,this.ay=f*l-c*r;let u,g,p,v;if(this.inherit==Ge.OnlyTranslation)u=this.a,g=this.b,p=this.c,v=this.d;else{switch(this.inherit){case Ge.NoRotationOrReflection:{let k=Math.abs(t*n-i*a)/(t*t+a*a);i=-a*this.skeleton.scaleX*k/this.skeleton.scaleY,n=t*this.skeleton.scaleY*k/this.skeleton.scaleX,o=1/(t*n-i*a),s=n*o,h=i*o;break}case Ge.NoScale:case Ge.NoScaleOrReflection:let b=q.cosDeg(this.rotation),w=q.sinDeg(this.rotation);t=(t*b+i*w)/this.skeleton.scaleX,a=(a*b+n*w)/this.skeleton.scaleY;let _=Math.sqrt(t*t+a*a);_>1e-5&&(_=1/_),t*=_,a*=_,_=Math.sqrt(t*t+a*a),this.inherit==Ge.NoScale&&o<0!=(this.skeleton.scaleX<0!=this.skeleton.scaleY<0)&&(_=-_);let y=q.PI/2+Math.atan2(a,t);i=Math.cos(y)*_,n=Math.sin(y)*_,o=1/(t*n-i*a),s=n*o,h=i*o,r=a*o,l=t*o}u=s*this.a-h*this.c,g=s*this.b-h*this.d,p=l*this.c-r*this.a,v=l*this.d-r*this.b}if(this.ashearX=0,this.ascaleX=Math.sqrt(u*u+p*p),this.ascaleX>1e-4){let b=u*v-g*p;this.ascaleY=b/this.ascaleX,this.ashearY=-Math.atan2(u*g+p*v,b)*q.radDeg,this.arotation=Math.atan2(p,u)*q.radDeg}else this.ascaleX=0,this.ascaleY=Math.sqrt(g*g+v*v),this.ashearY=0,this.arotation=90-Math.atan2(v,g)*q.radDeg}getWorldRotationX(){return Math.atan2(this.c,this.a)*q.radDeg}getWorldRotationY(){return Math.atan2(this.d,this.b)*q.radDeg}getWorldScaleX(){return Math.sqrt(this.a*this.a+this.c*this.c)}getWorldScaleY(){return Math.sqrt(this.b*this.b+this.d*this.d)}worldToLocal(e){let t=1/(this.a*this.d-this.b*this.c),i=e.x-this.worldX,a=e.y-this.worldY;return e.x=i*this.d*t-a*this.b*t,e.y=a*this.a*t-i*this.c*t,e}localToWorld(e){let t=e.x,i=e.y;return e.x=t*this.a+i*this.b+this.worldX,e.y=t*this.c+i*this.d+this.worldY,e}worldToParent(e){if(e==null)throw new Error("world cannot be null.");return this.parent==null?e:this.parent.worldToLocal(e)}parentToWorld(e){if(e==null)throw new Error("world cannot be null.");return this.parent==null?e:this.parent.localToWorld(e)}worldToLocalRotation(e){let t=q.sinDeg(e),i=q.cosDeg(e);return Math.atan2(this.a*t-this.c*i,this.d*i-this.b*t)*q.radDeg+this.rotation-this.shearX}localToWorldRotation(e){e-=this.rotation-this.shearX;let t=q.sinDeg(e),i=q.cosDeg(e);return Math.atan2(i*this.c+t*this.d,i*this.a+t*this.b)*q.radDeg}rotateWorld(e){e*=q.degRad;const t=Math.sin(e),i=Math.cos(e),a=this.a,n=this.b;this.a=i*a-t*this.c,this.b=i*n-t*this.d,this.c=t*a+i*this.c,this.d=t*n+i*this.d}}class Da{constructor(e,t,i){m(this,"name");m(this,"order");m(this,"skinRequired");this.name=e,this.order=t,this.skinRequired=i}}class fd{constructor(e,t="",i=new Nr){m(this,"pathPrefix","");m(this,"textureLoader");m(this,"downloader");m(this,"assets",{});m(this,"errors",{});m(this,"toLoad",0);m(this,"loaded",0);this.textureLoader=e,this.pathPrefix=t,this.downloader=i}start(e){return this.toLoad++,this.pathPrefix+e}success(e,t,i){this.toLoad--,this.loaded++,this.assets[t]=i,e&&e(t,i)}error(e,t,i){this.toLoad--,this.loaded++,this.errors[t]=i,e&&e(t,i)}loadAll(){return new Promise((t,i)=>{let a=()=>{if(this.isLoadingComplete()){this.hasErrors()?i(this.errors):t(this);return}requestAnimationFrame(a)};requestAnimationFrame(a)})}setRawDataURI(e,t){this.downloader.rawDataUris[this.pathPrefix+e]=t}loadBinary(e,t=()=>{},i=()=>{}){e=this.start(e),this.downloader.downloadBinary(e,a=>{this.success(t,e,a)},(a,n)=>{this.error(i,e,`Couldn't load binary ${e}: status ${a}, ${n}`)})}loadText(e,t=()=>{},i=()=>{}){e=this.start(e),this.downloader.downloadText(e,a=>{this.success(t,e,a)},(a,n)=>{this.error(i,e,`Couldn't load text ${e}: status ${a}, ${n}`)})}loadJson(e,t=()=>{},i=()=>{}){e=this.start(e),this.downloader.downloadJson(e,a=>{this.success(t,e,a)},(a,n)=>{this.error(i,e,`Couldn't load JSON ${e}: status ${a}, ${n}`)})}loadTexture(e,t=()=>{},i=()=>{}){if(e=this.start(e),!!!(typeof window<"u"&&typeof navigator<"u"&&window.document))fetch(e,{mode:"cors"}).then(o=>o.ok?o.blob():(this.error(i,e,`Couldn't load image: ${e}`),null)).then(o=>o?createImageBitmap(o,{premultiplyAlpha:"none",colorSpaceConversion:"none"}):null).then(o=>{o&&this.success(t,e,this.textureLoader(o))});else{let o=new Image;o.crossOrigin="anonymous",o.onload=()=>{this.success(t,e,this.textureLoader(o))},o.onerror=()=>{this.error(i,e,`Couldn't load image: ${e}`)},this.downloader.rawDataUris[e]&&(e=this.downloader.rawDataUris[e]),o.src=e}}loadTextureAtlas(e,t=()=>{},i=()=>{},a){let n=e.lastIndexOf("/"),o=n>=0?e.substring(0,n+1):"";e=this.start(e),this.downloader.downloadText(e,s=>{try{let h=new hd(s),r=h.pages.length,l=!1;for(let c of h.pages)this.loadTexture(a?a[c.name]:o+c.name,(f,u)=>{l||(c.setTexture(u),--r==0&&this.success(t,e,h))},(f,u)=>{l||this.error(i,e,`Couldn't load texture atlas ${e} page image: ${f}`),l=!0})}catch(h){this.error(i,e,`Couldn't parse texture atlas ${e}: ${h.message}`)}},(s,h)=>{this.error(i,e,`Couldn't load texture atlas ${e}: status ${s}, ${h}`)})}get(e){return this.assets[this.pathPrefix+e]}require(e){e=this.pathPrefix+e;let t=this.assets[e];if(t)return t;let i=this.errors[e];throw Error("Asset not found: "+e+(i?`
`+i:""))}remove(e){e=this.pathPrefix+e;let t=this.assets[e];return t.dispose&&t.dispose(),delete this.assets[e],t}removeAll(){for(let e in this.assets){let t=this.assets[e];t.dispose&&t.dispose()}this.assets={}}isLoadingComplete(){return this.toLoad==0}getToLoad(){return this.toLoad}getLoaded(){return this.loaded}dispose(){this.removeAll()}hasErrors(){return Object.keys(this.errors).length>0}getErrors(){return this.errors}}class Nr{constructor(){m(this,"callbacks",{});m(this,"rawDataUris",{})}dataUriToString(e){if(!e.startsWith("data:"))throw new Error("Not a data URI.");let t=e.indexOf("base64,");return t!=-1?(t+=7,atob(e.substr(t))):e.substr(e.indexOf(",")+1)}base64ToUint8Array(e){for(var t=window.atob(e),i=t.length,a=new Uint8Array(i),n=0;n<i;n++)a[n]=t.charCodeAt(n);return a}dataUriToUint8Array(e){if(!e.startsWith("data:"))throw new Error("Not a data URI.");let t=e.indexOf("base64,");if(t==-1)throw new Error("Not a binary data URI.");return t+=7,this.base64ToUint8Array(e.substr(t))}downloadText(e,t,i){if(this.start(e,t,i))return;if(this.rawDataUris[e]){try{let o=this.rawDataUris[e];this.finish(e,200,this.dataUriToString(o))}catch(o){this.finish(e,400,JSON.stringify(o))}return}let a=new XMLHttpRequest;a.overrideMimeType("text/html"),a.open("GET",e,!0);let n=()=>{this.finish(e,a.status,a.responseText)};a.onload=n,a.onerror=n,a.send()}downloadJson(e,t,i){this.downloadText(e,a=>{t(JSON.parse(a))},i)}downloadBinary(e,t,i){if(this.start(e,t,i))return;if(this.rawDataUris[e]){try{let o=this.rawDataUris[e];this.finish(e,200,this.dataUriToUint8Array(o))}catch(o){this.finish(e,400,JSON.stringify(o))}return}let a=new XMLHttpRequest;a.open("GET",e,!0),a.responseType="arraybuffer";let n=()=>{this.finish(e,a.status,a.response)};a.onload=()=>{a.status==200||a.status==0?this.finish(e,200,new Uint8Array(a.response)):n()},a.onerror=n,a.send()}start(e,t,i){let a=this.callbacks[e];try{if(a)return!0;this.callbacks[e]=a=[]}finally{a.push(t,i)}}finish(e,t,i){let a=this.callbacks[e];delete this.callbacks[e];let n=t==200||t==0?[i]:[t,i];for(let o=n.length-1,s=a.length;o<s;o+=2)a[o].apply(null,n)}}class Vr{constructor(e,t){m(this,"data");m(this,"intValue",0);m(this,"floatValue",0);m(this,"stringValue",null);m(this,"time",0);m(this,"volume",0);m(this,"balance",0);if(!t)throw new Error("data cannot be null.");this.time=e,this.data=t}}class Dr{constructor(e){m(this,"name");m(this,"intValue",0);m(this,"floatValue",0);m(this,"stringValue",null);m(this,"audioPath",null);m(this,"volume",0);m(this,"balance",0);this.name=e}}class gd{constructor(e,t){m(this,"data");m(this,"bones");m(this,"target");m(this,"bendDirection",0);m(this,"compress",!1);m(this,"stretch",!1);m(this,"mix",1);m(this,"softness",0);m(this,"active",!1);if(!e)throw new Error("data cannot be null.");if(!t)throw new Error("skeleton cannot be null.");this.data=e,this.bones=new Array;for(let a=0;a<e.bones.length;a++){let n=t.findBone(e.bones[a].name);if(!n)throw new Error(`Couldn't find bone ${e.bones[a].name}`);this.bones.push(n)}let i=t.findBone(e.target.name);if(!i)throw new Error(`Couldn't find bone ${e.target.name}`);this.target=i,this.mix=e.mix,this.softness=e.softness,this.bendDirection=e.bendDirection,this.compress=e.compress,this.stretch=e.stretch}isActive(){return this.active}setToSetupPose(){const e=this.data;this.mix=e.mix,this.softness=e.softness,this.bendDirection=e.bendDirection,this.compress=e.compress,this.stretch=e.stretch}update(e){if(this.mix==0)return;let t=this.target,i=this.bones;switch(i.length){case 1:this.apply1(i[0],t.worldX,t.worldY,this.compress,this.stretch,this.data.uniform,this.mix);break;case 2:this.apply2(i[0],i[1],t.worldX,t.worldY,this.bendDirection,this.stretch,this.data.uniform,this.softness,this.mix);break}}apply1(e,t,i,a,n,o,s){let h=e.parent;if(!h)throw new Error("IK bone must have parent.");let r=h.a,l=h.b,c=h.c,f=h.d,u=-e.ashearX-e.arotation,g=0,p=0;switch(e.inherit){case Ge.OnlyTranslation:g=(t-e.worldX)*q.signum(e.skeleton.scaleX),p=(i-e.worldY)*q.signum(e.skeleton.scaleY);break;case Ge.NoRotationOrReflection:let w=Math.abs(r*f-l*c)/Math.max(1e-4,r*r+c*c),_=r/e.skeleton.scaleX,y=c/e.skeleton.scaleY;l=-y*w*e.skeleton.scaleX,f=_*w*e.skeleton.scaleY,u+=Math.atan2(y,_)*q.radDeg;default:let k=t-h.worldX,C=i-h.worldY,A=r*f-l*c;Math.abs(A)<=1e-4?(g=0,p=0):(g=(k*f-C*l)/A-e.ax,p=(C*r-k*c)/A-e.ay)}u+=Math.atan2(p,g)*q.radDeg,e.ascaleX<0&&(u+=180),u>180?u-=360:u<-180&&(u+=360);let v=e.ascaleX,b=e.ascaleY;if(a||n){switch(e.inherit){case Ge.NoScale:case Ge.NoScaleOrReflection:g=t-e.worldX,p=i-e.worldY}const w=e.data.length*v;if(w>1e-4){const _=g*g+p*p;if(a&&_<w*w||n&&_>w*w){const y=(Math.sqrt(_)/w-1)*s+1;v*=y,o&&(b*=y)}}}e.updateWorldTransformWith(e.ax,e.ay,e.arotation+u*s,v,b,e.ashearX,e.ashearY)}apply2(e,t,i,a,n,o,s,h,r){if(e.inherit!=Ge.Normal||t.inherit!=Ge.Normal)return;let l=e.ax,c=e.ay,f=e.ascaleX,u=e.ascaleY,g=f,p=u,v=t.ascaleX,b=0,w=0,_=0;f<0?(f=-f,b=180,_=-1):(b=0,_=1),u<0&&(u=-u,_=-_),v<0?(v=-v,w=180):w=0;let y=t.ax,k=0,C=0,A=0,E=e.a,M=e.b,B=e.c,F=e.d,Y=Math.abs(f-u)<=1e-4;!Y||o?(k=0,C=E*y+e.worldX,A=B*y+e.worldY):(k=t.ay,C=E*y+M*k+e.worldX,A=B*y+F*k+e.worldY);let N=e.parent;if(!N)throw new Error("IK parent must itself have a parent.");E=N.a,M=N.b,B=N.c,F=N.d;let I=E*F-M*B,O=C-N.worldX,D=A-N.worldY;I=Math.abs(I)<=1e-4?0:1/I;let te=(O*F-D*M)*I-l,be=(D*E-O*B)*I-c,le=Math.sqrt(te*te+be*be),Ae=t.data.length*v,Le,Ye;if(le<1e-4){this.apply1(e,i,a,!1,o,!1,r),t.updateWorldTransformWith(y,k,0,t.ascaleX,t.ascaleY,t.ashearX,t.ashearY);return}O=i-N.worldX,D=a-N.worldY;let J=(O*F-D*M)*I-l,we=(D*E-O*B)*I-c,Ce=J*J+we*we;if(h!=0){h*=f*(v+1)*.5;let H=Math.sqrt(Ce),G=H-le-Ae*f+h;if(G>0){let W=Math.min(1,G/(h*2))-1;W=(G-h*(1-W*W))/H,J-=W*J,we-=W*we,Ce=J*J+we*we}}e:if(Y){Ae*=f;let H=(Ce-le*le-Ae*Ae)/(2*le*Ae);H<-1?(H=-1,Ye=Math.PI*n):H>1?(H=1,Ye=0,o&&(E=(Math.sqrt(Ce)/(le+Ae)-1)*r+1,g*=E,s&&(p*=E))):Ye=Math.acos(H)*n,E=le+Ae*H,M=Ae*Math.sin(Ye),Le=Math.atan2(we*E-J*M,J*E+we*M)}else{E=f*Ae,M=u*Ae;let H=E*E,G=M*M,W=Math.atan2(we,J);B=G*le*le+H*Ce-H*G;let Re=-2*G*le,De=G-H;if(F=Re*Re-4*De*B,F>=0){let yi=Math.sqrt(F);Re<0&&(yi=-yi),yi=-(Re+yi)*.5;let Hi=yi/De,Vn=B/yi,ha=Math.abs(Hi)<Math.abs(Vn)?Hi:Vn;if(Hi=Ce-ha*ha,Hi>=0){D=Math.sqrt(Hi)*n,Le=W-Math.atan2(D,ha),Ye=Math.atan2(D/u,(ha-le)/f);break e}}let Me=q.PI,xe=le-E,qe=xe*xe,ei=0,at=0,ca=le+E,za=ca*ca,Nn=0;B=-E*le/(H-G),B>=-1&&B<=1&&(B=Math.acos(B),O=E*Math.cos(B)+le,D=M*Math.sin(B),F=O*O+D*D,F<qe&&(Me=B,qe=F,xe=O,ei=D),F>za&&(at=B,za=F,ca=O,Nn=D)),Ce<=(qe+za)*.5?(Le=W-Math.atan2(ei*n,xe),Ye=Me*n):(Le=W-Math.atan2(Nn*n,ca),Ye=at*n)}let Ke=Math.atan2(k,y)*_,V=e.arotation;Le=(Le-Ke)*q.radDeg+b-V,Le>180?Le-=360:Le<-180&&(Le+=360),e.updateWorldTransformWith(l,c,V+Le*r,g,p,0,0),V=t.arotation,Ye=((Ye+Ke)*q.radDeg-t.ashearX)*_+w-V,Ye>180?Ye-=360:Ye<-180&&(Ye+=360),t.updateWorldTransformWith(y,k,V+Ye*r,t.ascaleX,t.ascaleY,t.ashearX,t.ashearY)}}class Xr extends Da{constructor(t){super(t,0,!1);m(this,"bones",new Array);m(this,"_target",null);m(this,"bendDirection",0);m(this,"compress",!1);m(this,"stretch",!1);m(this,"uniform",!1);m(this,"mix",0);m(this,"softness",0)}set target(t){this._target=t}get target(){if(this._target)return this._target;throw new Error("BoneData not set.")}}class zr extends Da{constructor(t){super(t,0,!1);m(this,"bones",new Array);m(this,"_target",null);m(this,"positionMode",Xt.Fixed);m(this,"spacingMode",et.Fixed);m(this,"rotateMode",fi.Chain);m(this,"offsetRotation",0);m(this,"position",0);m(this,"spacing",0);m(this,"mixRotate",0);m(this,"mixX",0);m(this,"mixY",0)}set target(t){this._target=t}get target(){if(this._target)return this._target;throw new Error("SlotData not set.")}}var Xt;(function(d){d[d.Fixed=0]="Fixed",d[d.Percent=1]="Percent"})(Xt||(Xt={}));var et;(function(d){d[d.Length=0]="Length",d[d.Fixed=1]="Fixed",d[d.Percent=2]="Percent",d[d.Proportional=3]="Proportional"})(et||(et={}));var fi;(function(d){d[d.Tangent=0]="Tangent",d[d.Chain=1]="Chain",d[d.ChainScale=2]="ChainScale"})(fi||(fi={}));const vt=class vt{constructor(e,t){m(this,"data");m(this,"bones");m(this,"target");m(this,"position",0);m(this,"spacing",0);m(this,"mixRotate",0);m(this,"mixX",0);m(this,"mixY",0);m(this,"spaces",new Array);m(this,"positions",new Array);m(this,"world",new Array);m(this,"curves",new Array);m(this,"lengths",new Array);m(this,"segments",new Array);m(this,"active",!1);if(!e)throw new Error("data cannot be null.");if(!t)throw new Error("skeleton cannot be null.");this.data=e,this.bones=new Array;for(let a=0,n=e.bones.length;a<n;a++){let o=t.findBone(e.bones[a].name);if(!o)throw new Error(`Couldn't find bone ${e.bones[a].name}.`);this.bones.push(o)}let i=t.findSlot(e.target.name);if(!i)throw new Error(`Couldn't find target bone ${e.target.name}`);this.target=i,this.position=e.position,this.spacing=e.spacing,this.mixRotate=e.mixRotate,this.mixX=e.mixX,this.mixY=e.mixY}isActive(){return this.active}setToSetupPose(){const e=this.data;this.position=e.position,this.spacing=e.spacing,this.mixRotate=e.mixRotate,this.mixX=e.mixX,this.mixY=e.mixY}update(e){let t=this.target.getAttachment();if(!(t instanceof pi))return;let i=this.mixRotate,a=this.mixX,n=this.mixY;if(i==0&&a==0&&n==0)return;let o=this.data,s=o.rotateMode==fi.Tangent,h=o.rotateMode==fi.ChainScale,r=this.bones,l=r.length,c=s?l:l+1,f=j.setArraySize(this.spaces,c),u=h?this.lengths=j.setArraySize(this.lengths,l):[],g=this.spacing;switch(o.spacingMode){case et.Percent:if(h)for(let C=0,A=c-1;C<A;C++){let E=r[C],M=E.data.length,B=M*E.a,F=M*E.c;u[C]=Math.sqrt(B*B+F*F)}j.arrayFill(f,1,c,g);break;case et.Proportional:let y=0;for(let C=0,A=c-1;C<A;){let E=r[C],M=E.data.length;if(M<vt.epsilon)h&&(u[C]=0),f[++C]=g;else{let B=M*E.a,F=M*E.c,Y=Math.sqrt(B*B+F*F);h&&(u[C]=Y),f[++C]=Y,y+=Y}}if(y>0){y=c/y*g;for(let C=1;C<c;C++)f[C]*=y}break;default:let k=o.spacingMode==et.Length;for(let C=0,A=c-1;C<A;){let E=r[C],M=E.data.length;if(M<vt.epsilon)h&&(u[C]=0),f[++C]=g;else{let B=M*E.a,F=M*E.c,Y=Math.sqrt(B*B+F*F);h&&(u[C]=Y),f[++C]=(k?M+g:g)*Y/M}}}let p=this.computeWorldPositions(t,c,s),v=p[0],b=p[1],w=o.offsetRotation,_=!1;if(w==0)_=o.rotateMode==fi.Chain;else{_=!1;let y=this.target.bone;w*=y.a*y.d-y.b*y.c>0?q.degRad:-q.degRad}for(let y=0,k=3;y<l;y++,k+=3){let C=r[y];C.worldX+=(v-C.worldX)*a,C.worldY+=(b-C.worldY)*n;let A=p[k],E=p[k+1],M=A-v,B=E-b;if(h){let F=u[y];if(F!=0){let Y=(Math.sqrt(M*M+B*B)/F-1)*i+1;C.a*=Y,C.c*=Y}}if(v=A,b=E,i>0){let F=C.a,Y=C.b,N=C.c,I=C.d,O=0,D=0,te=0;if(s?O=p[k-1]:f[y+1]==0?O=p[k+2]:O=Math.atan2(B,M),O-=Math.atan2(N,F),_){D=Math.cos(O),te=Math.sin(O);let be=C.data.length;v+=(be*(D*F-te*N)-M)*i,b+=(be*(te*F+D*N)-B)*i}else O+=w;O>q.PI?O-=q.PI2:O<-q.PI&&(O+=q.PI2),O*=i,D=Math.cos(O),te=Math.sin(O),C.a=D*F-te*N,C.b=D*Y-te*I,C.c=te*F+D*N,C.d=te*Y+D*I}C.updateAppliedTransform()}}computeWorldPositions(e,t,i){let a=this.target,n=this.position,o=this.spaces,s=j.setArraySize(this.positions,t*3+2),h=this.world,r=e.closed,l=e.worldVerticesLength,c=l/6,f=vt.NONE;if(!e.constantSpeed){let be=e.lengths;c-=r?1:2;let le=be[c];this.data.positionMode==Xt.Percent&&(n*=le);let Ae;switch(this.data.spacingMode){case et.Percent:Ae=le;break;case et.Proportional:Ae=le/t;break;default:Ae=1}h=j.setArraySize(this.world,8);for(let Le=0,Ye=0,J=0;Le<t;Le++,Ye+=3){let we=o[Le]*Ae;n+=we;let Ce=n;if(r)Ce%=le,Ce<0&&(Ce+=le),J=0;else if(Ce<0){f!=vt.BEFORE&&(f=vt.BEFORE,e.computeWorldVertices(a,2,4,h,0,2)),this.addBeforePosition(Ce,h,0,s,Ye);continue}else if(Ce>le){f!=vt.AFTER&&(f=vt.AFTER,e.computeWorldVertices(a,l-6,4,h,0,2)),this.addAfterPosition(Ce-le,h,0,s,Ye);continue}for(;;J++){let Ke=be[J];if(!(Ce>Ke)){if(J==0)Ce/=Ke;else{let V=be[J-1];Ce=(Ce-V)/(Ke-V)}break}}J!=f&&(f=J,r&&J==c?(e.computeWorldVertices(a,l-4,4,h,0,2),e.computeWorldVertices(a,0,4,h,4,2)):e.computeWorldVertices(a,J*6+2,8,h,0,2)),this.addCurvePosition(Ce,h[0],h[1],h[2],h[3],h[4],h[5],h[6],h[7],s,Ye,i||Le>0&&we==0)}return s}r?(l+=2,h=j.setArraySize(this.world,l),e.computeWorldVertices(a,2,l-4,h,0,2),e.computeWorldVertices(a,0,2,h,l-4,2),h[l-2]=h[0],h[l-1]=h[1]):(c--,l-=4,h=j.setArraySize(this.world,l),e.computeWorldVertices(a,2,l,h,0,2));let u=j.setArraySize(this.curves,c),g=0,p=h[0],v=h[1],b=0,w=0,_=0,y=0,k=0,C=0,A=0,E=0,M=0,B=0,F=0,Y=0,N=0,I=0;for(let be=0,le=2;be<c;be++,le+=6)b=h[le],w=h[le+1],_=h[le+2],y=h[le+3],k=h[le+4],C=h[le+5],A=(p-b*2+_)*.1875,E=(v-w*2+y)*.1875,M=((b-_)*3-p+k)*.09375,B=((w-y)*3-v+C)*.09375,F=A*2+M,Y=E*2+B,N=(b-p)*.75+A+M*.16666667,I=(w-v)*.75+E+B*.16666667,g+=Math.sqrt(N*N+I*I),N+=F,I+=Y,F+=M,Y+=B,g+=Math.sqrt(N*N+I*I),N+=F,I+=Y,g+=Math.sqrt(N*N+I*I),N+=F+M,I+=Y+B,g+=Math.sqrt(N*N+I*I),u[be]=g,p=k,v=C;this.data.positionMode==Xt.Percent&&(n*=g);let O;switch(this.data.spacingMode){case et.Percent:O=g;break;case et.Proportional:O=g/t;break;default:O=1}let D=this.segments,te=0;for(let be=0,le=0,Ae=0,Le=0;be<t;be++,le+=3){let Ye=o[be]*O;n+=Ye;let J=n;if(r)J%=g,J<0&&(J+=g),Ae=0;else if(J<0){this.addBeforePosition(J,h,0,s,le);continue}else if(J>g){this.addAfterPosition(J-g,h,l-4,s,le);continue}for(;;Ae++){let we=u[Ae];if(!(J>we)){if(Ae==0)J/=we;else{let Ce=u[Ae-1];J=(J-Ce)/(we-Ce)}break}}if(Ae!=f){f=Ae;let we=Ae*6;for(p=h[we],v=h[we+1],b=h[we+2],w=h[we+3],_=h[we+4],y=h[we+5],k=h[we+6],C=h[we+7],A=(p-b*2+_)*.03,E=(v-w*2+y)*.03,M=((b-_)*3-p+k)*.006,B=((w-y)*3-v+C)*.006,F=A*2+M,Y=E*2+B,N=(b-p)*.3+A+M*.16666667,I=(w-v)*.3+E+B*.16666667,te=Math.sqrt(N*N+I*I),D[0]=te,we=1;we<8;we++)N+=F,I+=Y,F+=M,Y+=B,te+=Math.sqrt(N*N+I*I),D[we]=te;N+=F,I+=Y,te+=Math.sqrt(N*N+I*I),D[8]=te,N+=F+M,I+=Y+B,te+=Math.sqrt(N*N+I*I),D[9]=te,Le=0}for(J*=te;;Le++){let we=D[Le];if(!(J>we)){if(Le==0)J/=we;else{let Ce=D[Le-1];J=Le+(J-Ce)/(we-Ce)}break}}this.addCurvePosition(J*.1,p,v,b,w,_,y,k,C,s,le,i||be>0&&Ye==0)}return s}addBeforePosition(e,t,i,a,n){let o=t[i],s=t[i+1],h=t[i+2]-o,r=t[i+3]-s,l=Math.atan2(r,h);a[n]=o+e*Math.cos(l),a[n+1]=s+e*Math.sin(l),a[n+2]=l}addAfterPosition(e,t,i,a,n){let o=t[i+2],s=t[i+3],h=o-t[i],r=s-t[i+1],l=Math.atan2(r,h);a[n]=o+e*Math.cos(l),a[n+1]=s+e*Math.sin(l),a[n+2]=l}addCurvePosition(e,t,i,a,n,o,s,h,r,l,c,f){if(e==0||isNaN(e)){l[c]=t,l[c+1]=i,l[c+2]=Math.atan2(n-i,a-t);return}let u=e*e,g=u*e,p=1-e,v=p*p,b=v*p,w=p*e,_=w*3,y=p*_,k=_*e,C=t*b+a*y+o*k+h*g,A=i*b+n*y+s*k+r*g;l[c]=C,l[c+1]=A,f&&(e<.001?l[c+2]=Math.atan2(n-i,a-t):l[c+2]=Math.atan2(A-(i*v+n*w*2+s*u),C-(t*v+a*w*2+o*u)))}};m(vt,"NONE",-1),m(vt,"BEFORE",-2),m(vt,"AFTER",-3),m(vt,"epsilon",1e-5);let gn=vt;class pd{constructor(e,t){m(this,"data");m(this,"_bone",null);m(this,"inertia",0);m(this,"strength",0);m(this,"damping",0);m(this,"massInverse",0);m(this,"wind",0);m(this,"gravity",0);m(this,"mix",0);m(this,"_reset",!0);m(this,"ux",0);m(this,"uy",0);m(this,"cx",0);m(this,"cy",0);m(this,"tx",0);m(this,"ty",0);m(this,"xOffset",0);m(this,"xVelocity",0);m(this,"yOffset",0);m(this,"yVelocity",0);m(this,"rotateOffset",0);m(this,"rotateVelocity",0);m(this,"scaleOffset",0);m(this,"scaleVelocity",0);m(this,"active",!1);m(this,"skeleton");m(this,"remaining",0);m(this,"lastTime",0);this.data=e,this.skeleton=t,this.bone=t.bones[e.bone.index],this.inertia=e.inertia,this.strength=e.strength,this.damping=e.damping,this.massInverse=e.massInverse,this.wind=e.wind,this.gravity=e.gravity,this.mix=e.mix}set bone(e){this._bone=e}get bone(){if(this._bone)return this._bone;throw new Error("Bone not set.")}reset(){this.remaining=0,this.lastTime=this.skeleton.time,this._reset=!0,this.xOffset=0,this.xVelocity=0,this.yOffset=0,this.yVelocity=0,this.rotateOffset=0,this.rotateVelocity=0,this.scaleOffset=0,this.scaleVelocity=0}setToSetupPose(){const e=this.data;this.inertia=e.inertia,this.strength=e.strength,this.damping=e.damping,this.massInverse=e.massInverse,this.wind=e.wind,this.gravity=e.gravity,this.mix=e.mix}isActive(){return this.active}update(e){const t=this.mix;if(t==0)return;const i=this.data.x>0,a=this.data.y>0,n=this.data.rotate>0||this.data.shearX>0,o=this.data.scaleX>0,s=this.bone,h=s.data.length;switch(e){case Mt.none:return;case Mt.reset:this.reset();case Mt.update:const r=this.skeleton,l=Math.max(this.skeleton.time-this.lastTime,0);this.remaining+=l,this.lastTime=r.time;const c=s.worldX,f=s.worldY;if(this._reset)this._reset=!1,this.ux=c,this.uy=f;else{let u=this.remaining,g=this.inertia,p=this.data.step,v=this.skeleton.data.referenceScale,b=-1,w=this.data.limit*l,_=w*Math.abs(r.scaleY);if(w*=Math.abs(r.scaleX),i||a){if(i){const y=(this.ux-c)*g;this.xOffset+=y>w?w:y<-w?-w:y,this.ux=c}if(a){const y=(this.uy-f)*g;this.yOffset+=y>_?_:y<-_?-_:y,this.uy=f}if(u>=p){b=Math.pow(this.damping,60*p);const y=this.massInverse*p,k=this.strength,C=this.wind*v,A=this.gravity*v;do i&&(this.xVelocity+=(C-this.xOffset*k)*y,this.xOffset+=this.xVelocity*p,this.xVelocity*=b),a&&(this.yVelocity-=(A+this.yOffset*k)*y,this.yOffset+=this.yVelocity*p,this.yVelocity*=b),u-=p;while(u>=p)}i&&(s.worldX+=this.xOffset*t*this.data.x),a&&(s.worldY+=this.yOffset*t*this.data.y)}if(n||o){let y=Math.atan2(s.c,s.a),k=0,C=0,A=0,E=this.cx-s.worldX,M=this.cy-s.worldY;if(E>w?E=w:E<-w&&(E=-w),M>_?M=_:M<-_&&(M=-_),n){A=(this.data.rotate+this.data.shearX)*t;let B=Math.atan2(M+this.ty,E+this.tx)-y-this.rotateOffset*A;this.rotateOffset+=(B-Math.ceil(B*q.invPI2-.5)*q.PI2)*g,B=this.rotateOffset*A+y,k=Math.cos(B),C=Math.sin(B),o&&(B=h*s.getWorldScaleX(),B>0&&(this.scaleOffset+=(E*k+M*C)*g/B))}else{k=Math.cos(y),C=Math.sin(y);const B=h*s.getWorldScaleX();B>0&&(this.scaleOffset+=(E*k+M*C)*g/B)}if(u=this.remaining,u>=p){b==-1&&(b=Math.pow(this.damping,60*p));const B=this.massInverse*p,F=this.strength,Y=this.wind,N=this.gravity,I=h/v;for(;;)if(u-=p,o&&(this.scaleVelocity+=(Y*k-N*C-this.scaleOffset*F)*B,this.scaleOffset+=this.scaleVelocity*p,this.scaleVelocity*=b),n){if(this.rotateVelocity-=((Y*C+N*k)*I+this.rotateOffset*F)*B,this.rotateOffset+=this.rotateVelocity*p,this.rotateVelocity*=b,u<p)break;const O=this.rotateOffset*A+y;k=Math.cos(O),C=Math.sin(O)}else if(u<p)break}}this.remaining=u}this.cx=s.worldX,this.cy=s.worldY;break;case Mt.pose:i&&(s.worldX+=this.xOffset*t*this.data.x),a&&(s.worldY+=this.yOffset*t*this.data.y)}if(n){let r=this.rotateOffset*t,l=0,c=0,f=0;if(this.data.shearX>0){let u=0;this.data.rotate>0&&(u=r*this.data.rotate,l=Math.sin(u),c=Math.cos(u),f=s.b,s.b=c*f-l*s.d,s.d=l*f+c*s.d),u+=r*this.data.shearX,l=Math.sin(u),c=Math.cos(u),f=s.a,s.a=c*f-l*s.c,s.c=l*f+c*s.c}else r*=this.data.rotate,l=Math.sin(r),c=Math.cos(r),f=s.a,s.a=c*f-l*s.c,s.c=l*f+c*s.c,f=s.b,s.b=c*f-l*s.d,s.d=l*f+c*s.d}if(o){const r=1+this.scaleOffset*t*this.data.scaleX;s.a*=r,s.c*=r}e!=Mt.pose&&(this.tx=h*s.a,this.ty=h*s.c),s.updateAppliedTransform()}translate(e,t){this.ux-=e,this.uy-=t,this.cx-=e,this.cy-=t}rotate(e,t,i){const a=i*q.degRad,n=Math.cos(a),o=Math.sin(a),s=this.cx-e,h=this.cy-t;this.translate(s*n-h*o-s,s*o+h*n-h)}}class vd{constructor(e,t){m(this,"data");m(this,"bone");m(this,"color");m(this,"darkColor",null);m(this,"attachment",null);m(this,"attachmentState",0);m(this,"sequenceIndex",-1);m(this,"deform",new Array);if(!e)throw new Error("data cannot be null.");if(!t)throw new Error("bone cannot be null.");this.data=e,this.bone=t,this.color=new K,this.darkColor=e.darkColor?new K:null,this.setToSetupPose()}getSkeleton(){return this.bone.skeleton}getAttachment(){return this.attachment}setAttachment(e){this.attachment!=e&&((!(e instanceof Rt)||!(this.attachment instanceof Rt)||e.timelineAttachment!=this.attachment.timelineAttachment)&&(this.deform.length=0),this.attachment=e,this.sequenceIndex=-1)}setToSetupPose(){this.color.setFromColor(this.data.color),this.darkColor&&this.darkColor.setFromColor(this.data.darkColor),this.data.attachmentName?(this.attachment=null,this.setAttachment(this.bone.skeleton.getAttachment(this.data.index,this.data.attachmentName))):this.attachment=null}}class _d{constructor(e,t){m(this,"data");m(this,"bones");m(this,"target");m(this,"mixRotate",0);m(this,"mixX",0);m(this,"mixY",0);m(this,"mixScaleX",0);m(this,"mixScaleY",0);m(this,"mixShearY",0);m(this,"temp",new Dt);m(this,"active",!1);if(!e)throw new Error("data cannot be null.");if(!t)throw new Error("skeleton cannot be null.");this.data=e,this.bones=new Array;for(let a=0;a<e.bones.length;a++){let n=t.findBone(e.bones[a].name);if(!n)throw new Error(`Couldn't find bone ${e.bones[a].name}.`);this.bones.push(n)}let i=t.findBone(e.target.name);if(!i)throw new Error(`Couldn't find target bone ${e.target.name}.`);this.target=i,this.mixRotate=e.mixRotate,this.mixX=e.mixX,this.mixY=e.mixY,this.mixScaleX=e.mixScaleX,this.mixScaleY=e.mixScaleY,this.mixShearY=e.mixShearY}isActive(){return this.active}setToSetupPose(){const e=this.data;this.mixRotate=e.mixRotate,this.mixX=e.mixX,this.mixY=e.mixY,this.mixScaleX=e.mixScaleX,this.mixScaleY=e.mixScaleY,this.mixShearY=e.mixShearY}update(e){this.mixRotate==0&&this.mixX==0&&this.mixY==0&&this.mixScaleX==0&&this.mixScaleY==0&&this.mixShearY==0||(this.data.local?this.data.relative?this.applyRelativeLocal():this.applyAbsoluteLocal():this.data.relative?this.applyRelativeWorld():this.applyAbsoluteWorld())}applyAbsoluteWorld(){let e=this.mixRotate,t=this.mixX,i=this.mixY,a=this.mixScaleX,n=this.mixScaleY,o=this.mixShearY,s=t!=0||i!=0,h=this.target,r=h.a,l=h.b,c=h.c,f=h.d,u=r*f-l*c>0?q.degRad:-q.degRad,g=this.data.offsetRotation*u,p=this.data.offsetShearY*u,v=this.bones;for(let b=0,w=v.length;b<w;b++){let _=v[b];if(e!=0){let y=_.a,k=_.b,C=_.c,A=_.d,E=Math.atan2(c,r)-Math.atan2(C,y)+g;E>q.PI?E-=q.PI2:E<-q.PI&&(E+=q.PI2),E*=e;let M=Math.cos(E),B=Math.sin(E);_.a=M*y-B*C,_.b=M*k-B*A,_.c=B*y+M*C,_.d=B*k+M*A}if(s){let y=this.temp;h.localToWorld(y.set(this.data.offsetX,this.data.offsetY)),_.worldX+=(y.x-_.worldX)*t,_.worldY+=(y.y-_.worldY)*i}if(a!=0){let y=Math.sqrt(_.a*_.a+_.c*_.c);y!=0&&(y=(y+(Math.sqrt(r*r+c*c)-y+this.data.offsetScaleX)*a)/y),_.a*=y,_.c*=y}if(n!=0){let y=Math.sqrt(_.b*_.b+_.d*_.d);y!=0&&(y=(y+(Math.sqrt(l*l+f*f)-y+this.data.offsetScaleY)*n)/y),_.b*=y,_.d*=y}if(o>0){let y=_.b,k=_.d,C=Math.atan2(k,y),A=Math.atan2(f,l)-Math.atan2(c,r)-(C-Math.atan2(_.c,_.a));A>q.PI?A-=q.PI2:A<-q.PI&&(A+=q.PI2),A=C+(A+p)*o;let E=Math.sqrt(y*y+k*k);_.b=Math.cos(A)*E,_.d=Math.sin(A)*E}_.updateAppliedTransform()}}applyRelativeWorld(){let e=this.mixRotate,t=this.mixX,i=this.mixY,a=this.mixScaleX,n=this.mixScaleY,o=this.mixShearY,s=t!=0||i!=0,h=this.target,r=h.a,l=h.b,c=h.c,f=h.d,u=r*f-l*c>0?q.degRad:-q.degRad,g=this.data.offsetRotation*u,p=this.data.offsetShearY*u,v=this.bones;for(let b=0,w=v.length;b<w;b++){let _=v[b];if(e!=0){let y=_.a,k=_.b,C=_.c,A=_.d,E=Math.atan2(c,r)+g;E>q.PI?E-=q.PI2:E<-q.PI&&(E+=q.PI2),E*=e;let M=Math.cos(E),B=Math.sin(E);_.a=M*y-B*C,_.b=M*k-B*A,_.c=B*y+M*C,_.d=B*k+M*A}if(s){let y=this.temp;h.localToWorld(y.set(this.data.offsetX,this.data.offsetY)),_.worldX+=y.x*t,_.worldY+=y.y*i}if(a!=0){let y=(Math.sqrt(r*r+c*c)-1+this.data.offsetScaleX)*a+1;_.a*=y,_.c*=y}if(n!=0){let y=(Math.sqrt(l*l+f*f)-1+this.data.offsetScaleY)*n+1;_.b*=y,_.d*=y}if(o>0){let y=Math.atan2(f,l)-Math.atan2(c,r);y>q.PI?y-=q.PI2:y<-q.PI&&(y+=q.PI2);let k=_.b,C=_.d;y=Math.atan2(C,k)+(y-q.PI/2+p)*o;let A=Math.sqrt(k*k+C*C);_.b=Math.cos(y)*A,_.d=Math.sin(y)*A}_.updateAppliedTransform()}}applyAbsoluteLocal(){let e=this.mixRotate,t=this.mixX,i=this.mixY,a=this.mixScaleX,n=this.mixScaleY,o=this.mixShearY,s=this.target,h=this.bones;for(let r=0,l=h.length;r<l;r++){let c=h[r],f=c.arotation;e!=0&&(f+=(s.arotation-f+this.data.offsetRotation)*e);let u=c.ax,g=c.ay;u+=(s.ax-u+this.data.offsetX)*t,g+=(s.ay-g+this.data.offsetY)*i;let p=c.ascaleX,v=c.ascaleY;a!=0&&p!=0&&(p=(p+(s.ascaleX-p+this.data.offsetScaleX)*a)/p),n!=0&&v!=0&&(v=(v+(s.ascaleY-v+this.data.offsetScaleY)*n)/v);let b=c.ashearY;o!=0&&(b+=(s.ashearY-b+this.data.offsetShearY)*o),c.updateWorldTransformWith(u,g,f,p,v,c.ashearX,b)}}applyRelativeLocal(){let e=this.mixRotate,t=this.mixX,i=this.mixY,a=this.mixScaleX,n=this.mixScaleY,o=this.mixShearY,s=this.target,h=this.bones;for(let r=0,l=h.length;r<l;r++){let c=h[r],f=c.arotation+(s.arotation+this.data.offsetRotation)*e,u=c.ax+(s.ax+this.data.offsetX)*t,g=c.ay+(s.ay+this.data.offsetY)*i,p=c.ascaleX*((s.ascaleX-1+this.data.offsetScaleX)*a+1),v=c.ascaleY*((s.ascaleY-1+this.data.offsetScaleY)*n+1),b=c.ashearY+(s.ashearY+this.data.offsetShearY)*o;c.updateWorldTransformWith(u,g,f,p,v,c.ashearX,b)}}}const Pi=class Pi{constructor(e){m(this,"data");m(this,"bones");m(this,"slots");m(this,"drawOrder");m(this,"ikConstraints");m(this,"transformConstraints");m(this,"pathConstraints");m(this,"physicsConstraints");m(this,"_updateCache",new Array);m(this,"skin",null);m(this,"color");m(this,"scaleX",1);m(this,"_scaleY",1);m(this,"x",0);m(this,"y",0);m(this,"time",0);if(!e)throw new Error("data cannot be null.");this.data=e,this.bones=new Array;for(let t=0;t<e.bones.length;t++){let i=e.bones[t],a;if(!i.parent)a=new ls(i,this,null);else{let n=this.bones[i.parent.index];a=new ls(i,this,n),n.children.push(a)}this.bones.push(a)}this.slots=new Array,this.drawOrder=new Array;for(let t=0;t<e.slots.length;t++){let i=e.slots[t],a=this.bones[i.boneData.index],n=new vd(i,a);this.slots.push(n),this.drawOrder.push(n)}this.ikConstraints=new Array;for(let t=0;t<e.ikConstraints.length;t++){let i=e.ikConstraints[t];this.ikConstraints.push(new gd(i,this))}this.transformConstraints=new Array;for(let t=0;t<e.transformConstraints.length;t++){let i=e.transformConstraints[t];this.transformConstraints.push(new _d(i,this))}this.pathConstraints=new Array;for(let t=0;t<e.pathConstraints.length;t++){let i=e.pathConstraints[t];this.pathConstraints.push(new gn(i,this))}this.physicsConstraints=new Array;for(let t=0;t<e.physicsConstraints.length;t++){let i=e.physicsConstraints[t];this.physicsConstraints.push(new pd(i,this))}this.color=new K(1,1,1,1),this.updateCache()}get scaleY(){return Pi.yDown?-this._scaleY:this._scaleY}set scaleY(e){this._scaleY=e}updateCache(){let e=this._updateCache;e.length=0;let t=this.bones;for(let f=0,u=t.length;f<u;f++){let g=t[f];g.sorted=g.data.skinRequired,g.active=!g.sorted}if(this.skin){let f=this.skin.bones;for(let u=0,g=this.skin.bones.length;u<g;u++){let p=this.bones[f[u].index];do p.sorted=!1,p.active=!0,p=p.parent;while(p)}}let i=this.ikConstraints,a=this.transformConstraints,n=this.pathConstraints,o=this.physicsConstraints,s=i.length,h=a.length,r=n.length,l=this.physicsConstraints.length,c=s+h+r+l;e:for(let f=0;f<c;f++){for(let u=0;u<s;u++){let g=i[u];if(g.data.order==f){this.sortIkConstraint(g);continue e}}for(let u=0;u<h;u++){let g=a[u];if(g.data.order==f){this.sortTransformConstraint(g);continue e}}for(let u=0;u<r;u++){let g=n[u];if(g.data.order==f){this.sortPathConstraint(g);continue e}}for(let u=0;u<l;u++){const g=o[u];if(g.data.order==f){this.sortPhysicsConstraint(g);continue e}}}for(let f=0,u=t.length;f<u;f++)this.sortBone(t[f])}sortIkConstraint(e){if(e.active=e.target.isActive()&&(!e.data.skinRequired||this.skin&&j.contains(this.skin.constraints,e.data,!0)),!e.active)return;let t=e.target;this.sortBone(t);let i=e.bones,a=i[0];if(this.sortBone(a),i.length==1)this._updateCache.push(e),this.sortReset(a.children);else{let n=i[i.length-1];this.sortBone(n),this._updateCache.push(e),this.sortReset(a.children),n.sorted=!0}}sortPathConstraint(e){if(e.active=e.target.bone.isActive()&&(!e.data.skinRequired||this.skin&&j.contains(this.skin.constraints,e.data,!0)),!e.active)return;let t=e.target,i=t.data.index,a=t.bone;this.skin&&this.sortPathConstraintAttachment(this.skin,i,a),this.data.defaultSkin&&this.data.defaultSkin!=this.skin&&this.sortPathConstraintAttachment(this.data.defaultSkin,i,a);for(let h=0,r=this.data.skins.length;h<r;h++)this.sortPathConstraintAttachment(this.data.skins[h],i,a);let n=t.getAttachment();n instanceof pi&&this.sortPathConstraintAttachmentWith(n,a);let o=e.bones,s=o.length;for(let h=0;h<s;h++)this.sortBone(o[h]);this._updateCache.push(e);for(let h=0;h<s;h++)this.sortReset(o[h].children);for(let h=0;h<s;h++)o[h].sorted=!0}sortTransformConstraint(e){if(e.active=e.target.isActive()&&(!e.data.skinRequired||this.skin&&j.contains(this.skin.constraints,e.data,!0)),!e.active)return;this.sortBone(e.target);let t=e.bones,i=t.length;if(e.data.local)for(let a=0;a<i;a++){let n=t[a];this.sortBone(n.parent),this.sortBone(n)}else for(let a=0;a<i;a++)this.sortBone(t[a]);this._updateCache.push(e);for(let a=0;a<i;a++)this.sortReset(t[a].children);for(let a=0;a<i;a++)t[a].sorted=!0}sortPathConstraintAttachment(e,t,i){let a=e.attachments[t];if(a)for(let n in a)this.sortPathConstraintAttachmentWith(a[n],i)}sortPathConstraintAttachmentWith(e,t){if(!(e instanceof pi))return;let i=e.bones;if(!i)this.sortBone(t);else{let a=this.bones;for(let n=0,o=i.length;n<o;){let s=i[n++];for(s+=n;n<s;)this.sortBone(a[i[n++]])}}}sortPhysicsConstraint(e){const t=e.bone;e.active=t.active&&(!e.data.skinRequired||this.skin!=null&&j.contains(this.skin.constraints,e.data,!0)),e.active&&(this.sortBone(t),this._updateCache.push(e),this.sortReset(t.children),t.sorted=!0)}sortBone(e){if(!e||e.sorted)return;let t=e.parent;t&&this.sortBone(t),e.sorted=!0,this._updateCache.push(e)}sortReset(e){for(let t=0,i=e.length;t<i;t++){let a=e[t];a.active&&(a.sorted&&this.sortReset(a.children),a.sorted=!1)}}updateWorldTransform(e){if(e==null)throw new Error("physics is undefined");let t=this.bones;for(let a=0,n=t.length;a<n;a++){let o=t[a];o.ax=o.x,o.ay=o.y,o.arotation=o.rotation,o.ascaleX=o.scaleX,o.ascaleY=o.scaleY,o.ashearX=o.shearX,o.ashearY=o.shearY}let i=this._updateCache;for(let a=0,n=i.length;a<n;a++)i[a].update(e)}updateWorldTransformWith(e,t){let i=this.getRootBone();if(!i)throw new Error("Root bone must not be null.");let a=t.a,n=t.b,o=t.c,s=t.d;i.worldX=a*this.x+n*this.y+t.worldX,i.worldY=o*this.x+s*this.y+t.worldY;const h=(i.rotation+i.shearX)*q.degRad,r=(i.rotation+90+i.shearY)*q.degRad,l=Math.cos(h)*i.scaleX,c=Math.cos(r)*i.scaleY,f=Math.sin(h)*i.scaleX,u=Math.sin(r)*i.scaleY;i.a=(a*l+n*f)*this.scaleX,i.b=(a*c+n*u)*this.scaleX,i.c=(o*l+s*f)*this.scaleY,i.d=(o*c+s*u)*this.scaleY;let g=this._updateCache;for(let p=0,v=g.length;p<v;p++){let b=g[p];b!=i&&b.update(e)}}setToSetupPose(){this.setBonesToSetupPose(),this.setSlotsToSetupPose()}setBonesToSetupPose(){for(const e of this.bones)e.setToSetupPose();for(const e of this.ikConstraints)e.setToSetupPose();for(const e of this.transformConstraints)e.setToSetupPose();for(const e of this.pathConstraints)e.setToSetupPose();for(const e of this.physicsConstraints)e.setToSetupPose()}setSlotsToSetupPose(){let e=this.slots;j.arrayCopy(e,0,this.drawOrder,0,e.length);for(let t=0,i=e.length;t<i;t++)e[t].setToSetupPose()}getRootBone(){return this.bones.length==0?null:this.bones[0]}findBone(e){if(!e)throw new Error("boneName cannot be null.");let t=this.bones;for(let i=0,a=t.length;i<a;i++){let n=t[i];if(n.data.name==e)return n}return null}findSlot(e){if(!e)throw new Error("slotName cannot be null.");let t=this.slots;for(let i=0,a=t.length;i<a;i++){let n=t[i];if(n.data.name==e)return n}return null}setSkinByName(e){let t=this.data.findSkin(e);if(!t)throw new Error("Skin not found: "+e);this.setSkin(t)}setSkin(e){if(e!=this.skin){if(e)if(this.skin)e.attachAll(this,this.skin);else{let t=this.slots;for(let i=0,a=t.length;i<a;i++){let n=t[i],o=n.data.attachmentName;if(o){let s=e.getAttachment(i,o);s&&n.setAttachment(s)}}}this.skin=e,this.updateCache()}}getAttachmentByName(e,t){let i=this.data.findSlot(e);if(!i)throw new Error(`Can't find slot with name ${e}`);return this.getAttachment(i.index,t)}getAttachment(e,t){if(!t)throw new Error("attachmentName cannot be null.");if(this.skin){let i=this.skin.getAttachment(e,t);if(i)return i}return this.data.defaultSkin?this.data.defaultSkin.getAttachment(e,t):null}setAttachment(e,t){if(!e)throw new Error("slotName cannot be null.");let i=this.slots;for(let a=0,n=i.length;a<n;a++){let o=i[a];if(o.data.name==e){let s=null;if(t&&(s=this.getAttachment(a,t),!s))throw new Error("Attachment not found: "+t+", for slot: "+e);o.setAttachment(s);return}}throw new Error("Slot not found: "+e)}findIkConstraint(e){if(!e)throw new Error("constraintName cannot be null.");return this.ikConstraints.find(t=>t.data.name==e)??null}findTransformConstraint(e){if(!e)throw new Error("constraintName cannot be null.");return this.transformConstraints.find(t=>t.data.name==e)??null}findPathConstraint(e){if(!e)throw new Error("constraintName cannot be null.");return this.pathConstraints.find(t=>t.data.name==e)??null}findPhysicsConstraint(e){if(e==null)throw new Error("constraintName cannot be null.");return this.physicsConstraints.find(t=>t.data.name==e)??null}getBoundsRect(){let e=new Dt,t=new Dt;return this.getBounds(e,t),{x:e.x,y:e.y,width:t.x,height:t.y}}getBounds(e,t,i=new Array(2),a=null){if(!e)throw new Error("offset cannot be null.");if(!t)throw new Error("size cannot be null.");let n=this.drawOrder,o=Number.POSITIVE_INFINITY,s=Number.POSITIVE_INFINITY,h=Number.NEGATIVE_INFINITY,r=Number.NEGATIVE_INFINITY;for(let l=0,c=n.length;l<c;l++){let f=n[l];if(!f.bone.active)continue;let u=0,g=null,p=null,v=f.getAttachment();if(v instanceof zi)u=8,g=j.setArraySize(i,u,0),v.computeWorldVertices(f,g,0,2),p=Pi.quadTriangles;else if(v instanceof hi){let b=v;u=b.worldVerticesLength,g=j.setArraySize(i,u,0),b.computeWorldVertices(f,0,u,g,0,2),p=b.triangles}else if(v instanceof ji&&a!=null){a.clipStart(f,v);continue}if(g&&p){a!=null&&a.isClipping()&&(a.clipTriangles(g,p,p.length),g=a.clippedVertices,u=a.clippedVertices.length);for(let b=0,w=g.length;b<w;b+=2){let _=g[b],y=g[b+1];o=Math.min(o,_),s=Math.min(s,y),h=Math.max(h,_),r=Math.max(r,y)}}a!=null&&a.clipEndWithSlot(f)}a!=null&&a.clipEnd(),e.set(o,s),t.set(h-o,r-s)}update(e){this.time+=e}physicsTranslate(e,t){const i=this.physicsConstraints;for(let a=0,n=i.length;a<n;a++)i[a].translate(e,t)}physicsRotate(e,t,i){const a=this.physicsConstraints;for(let n=0,o=a.length;n<o;n++)a[n].rotate(e,t,i)}};m(Pi,"quadTriangles",[0,1,2,2,3,0]),m(Pi,"yDown",!1);let pn=Pi;var Mt;(function(d){d[d.none=0]="none",d[d.reset=1]="reset",d[d.update=2]="update",d[d.pose=3]="pose"})(Mt||(Mt={}));class Ur extends Da{constructor(t){super(t,0,!1);m(this,"_bone",null);m(this,"x",0);m(this,"y",0);m(this,"rotate",0);m(this,"scaleX",0);m(this,"shearX",0);m(this,"limit",0);m(this,"step",0);m(this,"inertia",0);m(this,"strength",0);m(this,"damping",0);m(this,"massInverse",0);m(this,"wind",0);m(this,"gravity",0);m(this,"mix",0);m(this,"inertiaGlobal",!1);m(this,"strengthGlobal",!1);m(this,"dampingGlobal",!1);m(this,"massGlobal",!1);m(this,"windGlobal",!1);m(this,"gravityGlobal",!1);m(this,"mixGlobal",!1)}set bone(t){this._bone=t}get bone(){if(this._bone)return this._bone;throw new Error("BoneData not set.")}}class qr{constructor(){m(this,"name",null);m(this,"bones",new Array);m(this,"slots",new Array);m(this,"skins",new Array);m(this,"defaultSkin",null);m(this,"events",new Array);m(this,"animations",new Array);m(this,"ikConstraints",new Array);m(this,"transformConstraints",new Array);m(this,"pathConstraints",new Array);m(this,"physicsConstraints",new Array);m(this,"x",0);m(this,"y",0);m(this,"width",0);m(this,"height",0);m(this,"referenceScale",100);m(this,"version",null);m(this,"hash",null);m(this,"fps",0);m(this,"imagesPath",null);m(this,"audioPath",null)}findBone(e){if(!e)throw new Error("boneName cannot be null.");let t=this.bones;for(let i=0,a=t.length;i<a;i++){let n=t[i];if(n.name==e)return n}return null}findSlot(e){if(!e)throw new Error("slotName cannot be null.");let t=this.slots;for(let i=0,a=t.length;i<a;i++){let n=t[i];if(n.name==e)return n}return null}findSkin(e){if(!e)throw new Error("skinName cannot be null.");let t=this.skins;for(let i=0,a=t.length;i<a;i++){let n=t[i];if(n.name==e)return n}return null}findEvent(e){if(!e)throw new Error("eventDataName cannot be null.");let t=this.events;for(let i=0,a=t.length;i<a;i++){let n=t[i];if(n.name==e)return n}return null}findAnimation(e){if(!e)throw new Error("animationName cannot be null.");let t=this.animations;for(let i=0,a=t.length;i<a;i++){let n=t[i];if(n.name==e)return n}return null}findIkConstraint(e){if(!e)throw new Error("constraintName cannot be null.");const t=this.ikConstraints;for(let i=0,a=t.length;i<a;i++){const n=t[i];if(n.name==e)return n}return null}findTransformConstraint(e){if(!e)throw new Error("constraintName cannot be null.");const t=this.transformConstraints;for(let i=0,a=t.length;i<a;i++){const n=t[i];if(n.name==e)return n}return null}findPathConstraint(e){if(!e)throw new Error("constraintName cannot be null.");const t=this.pathConstraints;for(let i=0,a=t.length;i<a;i++){const n=t[i];if(n.name==e)return n}return null}findPhysicsConstraint(e){if(!e)throw new Error("constraintName cannot be null.");const t=this.physicsConstraints;for(let i=0,a=t.length;i<a;i++){const n=t[i];if(n.name==e)return n}return null}}class cs{constructor(e=0,t,i){m(this,"slotIndex");m(this,"name");m(this,"attachment");this.slotIndex=e,this.name=t,this.attachment=i}}class vn{constructor(e){m(this,"name");m(this,"attachments",new Array);m(this,"bones",Array());m(this,"constraints",new Array);m(this,"color",new K(.99607843,.61960787,.30980393,1));if(!e)throw new Error("name cannot be null.");this.name=e}setAttachment(e,t,i){if(!i)throw new Error("attachment cannot be null.");let a=this.attachments;e>=a.length&&(a.length=e+1),a[e]||(a[e]={}),a[e][t]=i}addSkin(e){for(let a=0;a<e.bones.length;a++){let n=e.bones[a],o=!1;for(let s=0;s<this.bones.length;s++)if(this.bones[s]==n){o=!0;break}o||this.bones.push(n)}for(let a=0;a<e.constraints.length;a++){let n=e.constraints[a],o=!1;for(let s=0;s<this.constraints.length;s++)if(this.constraints[s]==n){o=!0;break}o||this.constraints.push(n)}let t=e.getAttachments();for(let a=0;a<t.length;a++){var i=t[a];this.setAttachment(i.slotIndex,i.name,i.attachment)}}copySkin(e){for(let a=0;a<e.bones.length;a++){let n=e.bones[a],o=!1;for(let s=0;s<this.bones.length;s++)if(this.bones[s]==n){o=!0;break}o||this.bones.push(n)}for(let a=0;a<e.constraints.length;a++){let n=e.constraints[a],o=!1;for(let s=0;s<this.constraints.length;s++)if(this.constraints[s]==n){o=!0;break}o||this.constraints.push(n)}let t=e.getAttachments();for(let a=0;a<t.length;a++){var i=t[a];i.attachment&&(i.attachment instanceof hi?(i.attachment=i.attachment.newLinkedMesh(),this.setAttachment(i.slotIndex,i.name,i.attachment)):(i.attachment=i.attachment.copy(),this.setAttachment(i.slotIndex,i.name,i.attachment)))}}getAttachment(e,t){let i=this.attachments[e];return i?i[t]:null}removeAttachment(e,t){let i=this.attachments[e];i&&delete i[t]}getAttachments(){let e=new Array;for(var t=0;t<this.attachments.length;t++){let i=this.attachments[t];if(i)for(let a in i){let n=i[a];n&&e.push(new cs(t,a,n))}}return e}getAttachmentsForSlot(e,t){let i=this.attachments[e];if(i)for(let a in i){let n=i[a];n&&t.push(new cs(e,a,n))}}clear(){this.attachments.length=0,this.bones.length=0,this.constraints.length=0}attachAll(e,t){let i=0;for(let a=0;a<e.slots.length;a++){let n=e.slots[a],o=n.getAttachment();if(o&&i<t.attachments.length){let s=t.attachments[i];for(let h in s){let r=s[h];if(o==r){let l=this.getAttachment(i,h);l&&n.setAttachment(l);break}}}i++}}}class Gr{constructor(e,t,i){m(this,"index",0);m(this,"name");m(this,"boneData");m(this,"color",new K(1,1,1,1));m(this,"darkColor",null);m(this,"attachmentName",null);m(this,"blendMode",sa.Normal);m(this,"visible",!0);if(e<0)throw new Error("index must be >= 0.");if(!t)throw new Error("name cannot be null.");if(!i)throw new Error("boneData cannot be null.");this.index=e,this.name=t,this.boneData=i}}var sa;(function(d){d[d.Normal=0]="Normal",d[d.Additive=1]="Additive",d[d.Multiply=2]="Multiply",d[d.Screen=3]="Screen"})(sa||(sa={}));class jr extends Da{constructor(t){super(t,0,!1);m(this,"bones",new Array);m(this,"_target",null);m(this,"mixRotate",0);m(this,"mixX",0);m(this,"mixY",0);m(this,"mixScaleX",0);m(this,"mixScaleY",0);m(this,"mixShearY",0);m(this,"offsetRotation",0);m(this,"offsetX",0);m(this,"offsetY",0);m(this,"offsetScaleX",0);m(this,"offsetScaleY",0);m(this,"offsetShearY",0);m(this,"relative",!1);m(this,"local",!1)}set target(t){this._target=t}get target(){if(this._target)return this._target;throw new Error("BoneData not set.")}}class bd{constructor(e){m(this,"scale",1);m(this,"attachmentLoader");m(this,"linkedMeshes",new Array);this.attachmentLoader=e}readSkeletonData(e){let t=this.scale,i=new qr;i.name="";let a=new yd(e),n=a.readInt32(),o=a.readInt32();i.hash=o==0&&n==0?null:o.toString(16)+n.toString(16),i.version=a.readString(),i.x=a.readFloat(),i.y=a.readFloat(),i.width=a.readFloat(),i.height=a.readFloat(),i.referenceScale=a.readFloat()*t;let s=a.readBoolean();s&&(i.fps=a.readFloat(),i.imagesPath=a.readString(),i.audioPath=a.readString());let h=0;h=a.readInt(!0);for(let l=0;l<h;l++){let c=a.readString();if(!c)throw new Error("String in string table must not be null.");a.strings.push(c)}h=a.readInt(!0);for(let l=0;l<h;l++){let c=a.readString();if(!c)throw new Error("Bone name must not be null.");let f=l==0?null:i.bones[a.readInt(!0)],u=new Yr(l,c,f);u.rotation=a.readFloat(),u.x=a.readFloat()*t,u.y=a.readFloat()*t,u.scaleX=a.readFloat(),u.scaleY=a.readFloat(),u.shearX=a.readFloat(),u.shearY=a.readFloat(),u.length=a.readFloat()*t,u.inherit=a.readByte(),u.skinRequired=a.readBoolean(),s&&(K.rgba8888ToColor(u.color,a.readInt32()),u.icon=a.readString()??void 0,u.visible=a.readBoolean()),i.bones.push(u)}h=a.readInt(!0);for(let l=0;l<h;l++){let c=a.readString();if(!c)throw new Error("Slot name must not be null.");let f=i.bones[a.readInt(!0)],u=new Gr(l,c,f);K.rgba8888ToColor(u.color,a.readInt32());let g=a.readInt32();g!=-1&&K.rgb888ToColor(u.darkColor=new K,g),u.attachmentName=a.readStringRef(),u.blendMode=a.readInt(!0),s&&(u.visible=a.readBoolean()),i.slots.push(u)}h=a.readInt(!0);for(let l=0,c;l<h;l++){let f=a.readString();if(!f)throw new Error("IK constraint data name must not be null.");let u=new Xr(f);u.order=a.readInt(!0),c=a.readInt(!0);for(let p=0;p<c;p++)u.bones.push(i.bones[a.readInt(!0)]);u.target=i.bones[a.readInt(!0)];let g=a.readByte();u.skinRequired=(g&1)!=0,u.bendDirection=g&2?1:-1,u.compress=(g&4)!=0,u.stretch=(g&8)!=0,u.uniform=(g&16)!=0,g&32&&(u.mix=g&64?a.readFloat():1),g&128&&(u.softness=a.readFloat()*t),i.ikConstraints.push(u)}h=a.readInt(!0);for(let l=0,c;l<h;l++){let f=a.readString();if(!f)throw new Error("Transform constraint data name must not be null.");let u=new jr(f);u.order=a.readInt(!0),c=a.readInt(!0);for(let p=0;p<c;p++)u.bones.push(i.bones[a.readInt(!0)]);u.target=i.bones[a.readInt(!0)];let g=a.readByte();u.skinRequired=(g&1)!=0,u.local=(g&2)!=0,u.relative=(g&4)!=0,g&8&&(u.offsetRotation=a.readFloat()),g&16&&(u.offsetX=a.readFloat()*t),g&32&&(u.offsetY=a.readFloat()*t),g&64&&(u.offsetScaleX=a.readFloat()),g&128&&(u.offsetScaleY=a.readFloat()),g=a.readByte(),g&1&&(u.offsetShearY=a.readFloat()),g&2&&(u.mixRotate=a.readFloat()),g&4&&(u.mixX=a.readFloat()),g&8&&(u.mixY=a.readFloat()),g&16&&(u.mixScaleX=a.readFloat()),g&32&&(u.mixScaleY=a.readFloat()),g&64&&(u.mixShearY=a.readFloat()),i.transformConstraints.push(u)}h=a.readInt(!0);for(let l=0,c;l<h;l++){let f=a.readString();if(!f)throw new Error("Path constraint data name must not be null.");let u=new zr(f);u.order=a.readInt(!0),u.skinRequired=a.readBoolean(),c=a.readInt(!0);for(let p=0;p<c;p++)u.bones.push(i.bones[a.readInt(!0)]);u.target=i.slots[a.readInt(!0)];const g=a.readByte();u.positionMode=g&1,u.spacingMode=g>>1&3,u.rotateMode=g>>3&3,g&128&&(u.offsetRotation=a.readFloat()),u.position=a.readFloat(),u.positionMode==Xt.Fixed&&(u.position*=t),u.spacing=a.readFloat(),(u.spacingMode==et.Length||u.spacingMode==et.Fixed)&&(u.spacing*=t),u.mixRotate=a.readFloat(),u.mixX=a.readFloat(),u.mixY=a.readFloat(),i.pathConstraints.push(u)}h=a.readInt(!0);for(let l=0,c;l<h;l++){const f=a.readString();if(!f)throw new Error("Physics constraint data name must not be null.");const u=new Ur(f);u.order=a.readInt(!0),u.bone=i.bones[a.readInt(!0)];let g=a.readByte();u.skinRequired=(g&1)!=0,g&2&&(u.x=a.readFloat()),g&4&&(u.y=a.readFloat()),g&8&&(u.rotate=a.readFloat()),g&16&&(u.scaleX=a.readFloat()),g&32&&(u.shearX=a.readFloat()),u.limit=(g&64?a.readFloat():5e3)*t,u.step=1/a.readUnsignedByte(),u.inertia=a.readFloat(),u.strength=a.readFloat(),u.damping=a.readFloat(),u.massInverse=g&128?a.readFloat():1,u.wind=a.readFloat(),u.gravity=a.readFloat(),g=a.readByte(),g&1&&(u.inertiaGlobal=!0),g&2&&(u.strengthGlobal=!0),g&4&&(u.dampingGlobal=!0),g&8&&(u.massGlobal=!0),g&16&&(u.windGlobal=!0),g&32&&(u.gravityGlobal=!0),g&64&&(u.mixGlobal=!0),u.mix=g&128?a.readFloat():1,i.physicsConstraints.push(u)}let r=this.readSkin(a,i,!0,s);r&&(i.defaultSkin=r,i.skins.push(r));{let l=i.skins.length;for(j.setArraySize(i.skins,h=l+a.readInt(!0));l<h;l++){let c=this.readSkin(a,i,!1,s);if(!c)throw new Error("readSkin() should not have returned null.");i.skins[l]=c}}h=this.linkedMeshes.length;for(let l=0;l<h;l++){let c=this.linkedMeshes[l];const f=i.skins[c.skinIndex];if(!c.parent)throw new Error("Linked mesh parent must not be null");let u=f.getAttachment(c.slotIndex,c.parent);if(!u)throw new Error(`Parent mesh not found: ${c.parent}`);c.mesh.timelineAttachment=c.inheritTimeline?u:c.mesh,c.mesh.setParentMesh(u),c.mesh.region!=null&&c.mesh.updateRegion()}this.linkedMeshes.length=0,h=a.readInt(!0);for(let l=0;l<h;l++){let c=a.readString();if(!c)throw new Error("Event data name must not be null");let f=new Dr(c);f.intValue=a.readInt(!1),f.floatValue=a.readFloat(),f.stringValue=a.readString(),f.audioPath=a.readString(),f.audioPath&&(f.volume=a.readFloat(),f.balance=a.readFloat()),i.events.push(f)}h=a.readInt(!0);for(let l=0;l<h;l++){let c=a.readString();if(!c)throw new Error("Animatio name must not be null.");i.animations.push(this.readAnimation(a,c,i))}return i}readSkin(e,t,i,a){let n=null,o=0;if(i){if(o=e.readInt(!0),o==0)return null;n=new vn("default")}else{let s=e.readString();if(!s)throw new Error("Skin name must not be null.");n=new vn(s),a&&K.rgba8888ToColor(n.color,e.readInt32()),n.bones.length=e.readInt(!0);for(let h=0,r=n.bones.length;h<r;h++)n.bones[h]=t.bones[e.readInt(!0)];for(let h=0,r=e.readInt(!0);h<r;h++)n.constraints.push(t.ikConstraints[e.readInt(!0)]);for(let h=0,r=e.readInt(!0);h<r;h++)n.constraints.push(t.transformConstraints[e.readInt(!0)]);for(let h=0,r=e.readInt(!0);h<r;h++)n.constraints.push(t.pathConstraints[e.readInt(!0)]);for(let h=0,r=e.readInt(!0);h<r;h++)n.constraints.push(t.physicsConstraints[e.readInt(!0)]);o=e.readInt(!0)}for(let s=0;s<o;s++){let h=e.readInt(!0);for(let r=0,l=e.readInt(!0);r<l;r++){let c=e.readStringRef();if(!c)throw new Error("Attachment name must not be null");let f=this.readAttachment(e,t,n,h,c,a);f&&n.setAttachment(h,c,f)}}return n}readAttachment(e,t,i,a,n,o){let s=this.scale,h=e.readByte();const r=h&8?e.readStringRef():n;if(!r)throw new Error("Attachment name must not be null");switch(h&7){case Zt.Region:{let l=h&16?e.readStringRef():null;const c=h&32?e.readInt32():4294967295,f=h&64?this.readSequence(e):null;let u=h&128?e.readFloat():0,g=e.readFloat(),p=e.readFloat(),v=e.readFloat(),b=e.readFloat(),w=e.readFloat(),_=e.readFloat();l||(l=r);let y=this.attachmentLoader.newRegionAttachment(i,r,l,f);return y?(y.path=l,y.x=g*s,y.y=p*s,y.scaleX=v,y.scaleY=b,y.rotation=u,y.width=w*s,y.height=_*s,K.rgba8888ToColor(y.color,c),y.sequence=f,f==null&&y.updateRegion(),y):null}case Zt.BoundingBox:{let l=this.readVertices(e,(h&16)!=0),c=o?e.readInt32():0,f=this.attachmentLoader.newBoundingBoxAttachment(i,r);return f?(f.worldVerticesLength=l.length,f.vertices=l.vertices,f.bones=l.bones,o&&K.rgba8888ToColor(f.color,c),f):null}case Zt.Mesh:{let l=h&16?e.readStringRef():r;const c=h&32?e.readInt32():4294967295,f=h&64?this.readSequence(e):null,u=e.readInt(!0),g=this.readVertices(e,(h&128)!=0),p=this.readFloatArray(e,g.length,1),v=this.readShortArray(e,(g.length-u-2)*3);let b=[],w=0,_=0;o&&(b=this.readShortArray(e,e.readInt(!0)),w=e.readFloat(),_=e.readFloat()),l||(l=r);let y=this.attachmentLoader.newMeshAttachment(i,r,l,f);return y?(y.path=l,K.rgba8888ToColor(y.color,c),y.bones=g.bones,y.vertices=g.vertices,y.worldVerticesLength=g.length,y.triangles=v,y.regionUVs=p,f==null&&y.updateRegion(),y.hullLength=u<<1,y.sequence=f,o&&(y.edges=b,y.width=w*s,y.height=_*s),y):null}case Zt.LinkedMesh:{const l=h&16?e.readStringRef():r;if(l==null)throw new Error("Path of linked mesh must not be null");const c=h&32?e.readInt32():4294967295,f=h&64?this.readSequence(e):null,u=(h&128)!=0,g=e.readInt(!0),p=e.readStringRef();let v=0,b=0;o&&(v=e.readFloat(),b=e.readFloat());let w=this.attachmentLoader.newMeshAttachment(i,r,l,f);return w?(w.path=l,K.rgba8888ToColor(w.color,c),w.sequence=f,o&&(w.width=v*s,w.height=b*s),this.linkedMeshes.push(new wd(w,g,a,p,u)),w):null}case Zt.Path:{const l=(h&16)!=0,c=(h&32)!=0,f=this.readVertices(e,(h&64)!=0),u=j.newArray(f.length/6,0);for(let v=0,b=u.length;v<b;v++)u[v]=e.readFloat()*s;const g=o?e.readInt32():0,p=this.attachmentLoader.newPathAttachment(i,r);return p?(p.closed=l,p.constantSpeed=c,p.worldVerticesLength=f.length,p.vertices=f.vertices,p.bones=f.bones,p.lengths=u,o&&K.rgba8888ToColor(p.color,g),p):null}case Zt.Point:{const l=e.readFloat(),c=e.readFloat(),f=e.readFloat(),u=o?e.readInt32():0,g=this.attachmentLoader.newPointAttachment(i,r);return g?(g.x=c*s,g.y=f*s,g.rotation=l,o&&K.rgba8888ToColor(g.color,u),g):null}case Zt.Clipping:{const l=e.readInt(!0),c=this.readVertices(e,(h&16)!=0);let f=o?e.readInt32():0,u=this.attachmentLoader.newClippingAttachment(i,r);return u?(u.endSlot=t.slots[l],u.worldVerticesLength=c.length,u.vertices=c.vertices,u.bones=c.bones,o&&K.rgba8888ToColor(u.color,f),u):null}}return null}readSequence(e){let t=new Ca(e.readInt(!0));return t.start=e.readInt(!0),t.digits=e.readInt(!0),t.setupIndex=e.readInt(!0),t}readVertices(e,t){const i=this.scale,a=e.readInt(!0),n=new xd;if(n.length=a<<1,!t)return n.vertices=this.readFloatArray(e,n.length,i),n;let o=new Array,s=new Array;for(let h=0;h<a;h++){let r=e.readInt(!0);s.push(r);for(let l=0;l<r;l++)s.push(e.readInt(!0)),o.push(e.readFloat()*i),o.push(e.readFloat()*i),o.push(e.readFloat())}return n.vertices=j.toFloatArray(o),n.bones=s,n}readFloatArray(e,t,i){let a=new Array(t);if(i==1)for(let n=0;n<t;n++)a[n]=e.readFloat();else for(let n=0;n<t;n++)a[n]=e.readFloat()*i;return a}readShortArray(e,t){let i=new Array(t);for(let a=0;a<t;a++)i[a]=e.readInt(!0);return i}readAnimation(e,t,i){e.readInt(!0);let a=new Array,n=this.scale;for(let r=0,l=e.readInt(!0);r<l;r++){let c=e.readInt(!0);for(let f=0,u=e.readInt(!0);f<u;f++){let g=e.readByte(),p=e.readInt(!0),v=p-1;switch(g){case Fd:{let b=new Ii(p,c);for(let w=0;w<p;w++)b.setFrame(w,e.readFloat(),e.readStringRef());a.push(b);break}case Pd:{let b=e.readInt(!0),w=new _r(p,b,c),_=e.readFloat(),y=e.readUnsignedByte()/255,k=e.readUnsignedByte()/255,C=e.readUnsignedByte()/255,A=e.readUnsignedByte()/255;for(let E=0,M=0;w.setFrame(E,_,y,k,C,A),E!=v;E++){let B=e.readFloat(),F=e.readUnsignedByte()/255,Y=e.readUnsignedByte()/255,N=e.readUnsignedByte()/255,I=e.readUnsignedByte()/255;switch(e.readByte()){case Nt:w.setStepped(E);break;case Vt:Ie(e,w,M++,E,0,_,B,y,F,1),Ie(e,w,M++,E,1,_,B,k,Y,1),Ie(e,w,M++,E,2,_,B,C,N,1),Ie(e,w,M++,E,3,_,B,A,I,1)}_=B,y=F,k=Y,C=N,A=I}a.push(w);break}case Od:{let b=e.readInt(!0),w=new br(p,b,c),_=e.readFloat(),y=e.readUnsignedByte()/255,k=e.readUnsignedByte()/255,C=e.readUnsignedByte()/255;for(let A=0,E=0;w.setFrame(A,_,y,k,C),A!=v;A++){let M=e.readFloat(),B=e.readUnsignedByte()/255,F=e.readUnsignedByte()/255,Y=e.readUnsignedByte()/255;switch(e.readByte()){case Nt:w.setStepped(A);break;case Vt:Ie(e,w,E++,A,0,_,M,y,B,1),Ie(e,w,E++,A,1,_,M,k,F,1),Ie(e,w,E++,A,2,_,M,C,Y,1)}_=M,y=B,k=F,C=Y}a.push(w);break}case Yd:{let b=e.readInt(!0),w=new wr(p,b,c),_=e.readFloat(),y=e.readUnsignedByte()/255,k=e.readUnsignedByte()/255,C=e.readUnsignedByte()/255,A=e.readUnsignedByte()/255,E=e.readUnsignedByte()/255,M=e.readUnsignedByte()/255,B=e.readUnsignedByte()/255;for(let F=0,Y=0;w.setFrame(F,_,y,k,C,A,E,M,B),F!=v;F++){let N=e.readFloat(),I=e.readUnsignedByte()/255,O=e.readUnsignedByte()/255,D=e.readUnsignedByte()/255,te=e.readUnsignedByte()/255,be=e.readUnsignedByte()/255,le=e.readUnsignedByte()/255,Ae=e.readUnsignedByte()/255;switch(e.readByte()){case Nt:w.setStepped(F);break;case Vt:Ie(e,w,Y++,F,0,_,N,y,I,1),Ie(e,w,Y++,F,1,_,N,k,O,1),Ie(e,w,Y++,F,2,_,N,C,D,1),Ie(e,w,Y++,F,3,_,N,A,te,1),Ie(e,w,Y++,F,4,_,N,E,be,1),Ie(e,w,Y++,F,5,_,N,M,le,1),Ie(e,w,Y++,F,6,_,N,B,Ae,1)}_=N,y=I,k=O,C=D,A=te,E=be,M=le,B=Ae}a.push(w);break}case Nd:{let b=e.readInt(!0),w=new xr(p,b,c),_=e.readFloat(),y=e.readUnsignedByte()/255,k=e.readUnsignedByte()/255,C=e.readUnsignedByte()/255,A=e.readUnsignedByte()/255,E=e.readUnsignedByte()/255,M=e.readUnsignedByte()/255;for(let B=0,F=0;w.setFrame(B,_,y,k,C,A,E,M),B!=v;B++){let Y=e.readFloat(),N=e.readUnsignedByte()/255,I=e.readUnsignedByte()/255,O=e.readUnsignedByte()/255,D=e.readUnsignedByte()/255,te=e.readUnsignedByte()/255,be=e.readUnsignedByte()/255;switch(e.readByte()){case Nt:w.setStepped(B);break;case Vt:Ie(e,w,F++,B,0,_,Y,y,N,1),Ie(e,w,F++,B,1,_,Y,k,I,1),Ie(e,w,F++,B,2,_,Y,C,O,1),Ie(e,w,F++,B,3,_,Y,A,D,1),Ie(e,w,F++,B,4,_,Y,E,te,1),Ie(e,w,F++,B,5,_,Y,M,be,1)}_=Y,y=N,k=I,C=O,A=D,E=te,M=be}a.push(w);break}case Vd:{let b=new yr(p,e.readInt(!0),c),w=e.readFloat(),_=e.readUnsignedByte()/255;for(let y=0,k=0;b.setFrame(y,w,_),y!=v;y++){let C=e.readFloat(),A=e.readUnsignedByte()/255;switch(e.readByte()){case Nt:b.setStepped(y);break;case Vt:Ie(e,b,k++,y,0,w,C,_,A,1)}w=C,_=A}a.push(b)}}}}for(let r=0,l=e.readInt(!0);r<l;r++){let c=e.readInt(!0);for(let f=0,u=e.readInt(!0);f<u;f++){let g=e.readByte(),p=e.readInt(!0);if(g==Bd){let b=new vr(p,c);for(let w=0;w<p;w++)b.setFrame(w,e.readFloat(),e.readByte());a.push(b);continue}let v=e.readInt(!0);switch(g){case Cd:a.push(ot(e,new ka(p,v,c),1));break;case kd:a.push(Qa(e,new lr(p,v,c),n));break;case Ad:a.push(ot(e,new cr(p,v,c),n));break;case Sd:a.push(ot(e,new hr(p,v,c),n));break;case Ed:a.push(Qa(e,new dr(p,v,c),1));break;case Md:a.push(ot(e,new ur(p,v,c),1));break;case Td:a.push(ot(e,new mr(p,v,c),1));break;case Id:a.push(Qa(e,new fr(p,v,c),1));break;case Ld:a.push(ot(e,new gr(p,v,c),1));break;case Rd:a.push(ot(e,new pr(p,v,c),1))}}}for(let r=0,l=e.readInt(!0);r<l;r++){let c=e.readInt(!0),f=e.readInt(!0),u=f-1,g=new kr(f,e.readInt(!0),c),p=e.readByte(),v=e.readFloat(),b=p&1?p&2?e.readFloat():1:0,w=p&4?e.readFloat()*n:0;for(let _=0,y=0;g.setFrame(_,v,b,w,p&8?1:-1,(p&16)!=0,(p&32)!=0),_!=u;_++){p=e.readByte();const k=e.readFloat(),C=p&1?p&2?e.readFloat():1:0,A=p&4?e.readFloat()*n:0;p&64?g.setStepped(_):p&128&&(Ie(e,g,y++,_,0,v,k,b,C,1),Ie(e,g,y++,_,1,v,k,w,A,n)),v=k,b=C,w=A}a.push(g)}for(let r=0,l=e.readInt(!0);r<l;r++){let c=e.readInt(!0),f=e.readInt(!0),u=f-1,g=new Ar(f,e.readInt(!0),c),p=e.readFloat(),v=e.readFloat(),b=e.readFloat(),w=e.readFloat(),_=e.readFloat(),y=e.readFloat(),k=e.readFloat();for(let C=0,A=0;g.setFrame(C,p,v,b,w,_,y,k),C!=u;C++){let E=e.readFloat(),M=e.readFloat(),B=e.readFloat(),F=e.readFloat(),Y=e.readFloat(),N=e.readFloat(),I=e.readFloat();switch(e.readByte()){case Nt:g.setStepped(C);break;case Vt:Ie(e,g,A++,C,0,p,E,v,M,1),Ie(e,g,A++,C,1,p,E,b,B,1),Ie(e,g,A++,C,2,p,E,w,F,1),Ie(e,g,A++,C,3,p,E,_,Y,1),Ie(e,g,A++,C,4,p,E,y,N,1),Ie(e,g,A++,C,5,p,E,k,I,1)}p=E,v=M,b=B,w=F,_=Y,y=N,k=I}a.push(g)}for(let r=0,l=e.readInt(!0);r<l;r++){let c=e.readInt(!0),f=i.pathConstraints[c];for(let u=0,g=e.readInt(!0);u<g;u++){const p=e.readByte(),v=e.readInt(!0),b=e.readInt(!0);switch(p){case zd:a.push(ot(e,new Sr(v,b,c),f.positionMode==Xt.Fixed?n:1));break;case Ud:a.push(ot(e,new Er(v,b,c),f.spacingMode==et.Length||f.spacingMode==et.Fixed?n:1));break;case qd:let w=new Mr(v,b,c),_=e.readFloat(),y=e.readFloat(),k=e.readFloat(),C=e.readFloat();for(let A=0,E=0,M=w.getFrameCount()-1;w.setFrame(A,_,y,k,C),A!=M;A++){let B=e.readFloat(),F=e.readFloat(),Y=e.readFloat(),N=e.readFloat();switch(e.readByte()){case Nt:w.setStepped(A);break;case Vt:Ie(e,w,E++,A,0,_,B,y,F,1),Ie(e,w,E++,A,1,_,B,k,Y,1),Ie(e,w,E++,A,2,_,B,C,N,1)}_=B,y=F,k=Y,C=N}a.push(w)}}}for(let r=0,l=e.readInt(!0);r<l;r++){const c=e.readInt(!0)-1;for(let f=0,u=e.readInt(!0);f<u;f++){const g=e.readByte(),p=e.readInt(!0);if(g==Qd){const b=new Aa(p,c);for(let w=0;w<p;w++)b.setFrame(w,e.readFloat());a.push(b);continue}const v=e.readInt(!0);switch(g){case Gd:a.push(ot(e,new Tr(p,v,c),1));break;case jd:a.push(ot(e,new Ir(p,v,c),1));break;case Hd:a.push(ot(e,new Lr(p,v,c),1));break;case Wd:a.push(ot(e,new Rr(p,v,c),1));break;case Zd:a.push(ot(e,new Br(p,v,c),1));break;case $d:a.push(ot(e,new Fr(p,v,c),1));break;case Kd:a.push(ot(e,new Pr(p,v,c),1))}}}for(let r=0,l=e.readInt(!0);r<l;r++){let c=i.skins[e.readInt(!0)];for(let f=0,u=e.readInt(!0);f<u;f++){let g=e.readInt(!0);for(let p=0,v=e.readInt(!0);p<v;p++){let b=e.readStringRef();if(!b)throw new Error("attachmentName must not be null.");let w=c.getAttachment(g,b),_=e.readByte(),y=e.readInt(!0),k=y-1;switch(_){case Dd:{let C=w,A=C.bones,E=C.vertices,M=A?E.length/3*2:E.length,B=e.readInt(!0),F=new Cr(y,B,g,C),Y=e.readFloat();for(let N=0,I=0;;N++){let O,D=e.readInt(!0);if(D==0)O=A?j.newFloatArray(M):E;else{O=j.newFloatArray(M);let be=e.readInt(!0);if(D+=be,n==1)for(let le=be;le<D;le++)O[le]=e.readFloat();else for(let le=be;le<D;le++)O[le]=e.readFloat()*n;if(!A)for(let le=0,Ae=O.length;le<Ae;le++)O[le]+=E[le]}if(F.setFrame(N,Y,O),N==k)break;let te=e.readFloat();switch(e.readByte()){case Nt:F.setStepped(N);break;case Vt:Ie(e,F,I++,N,0,Y,te,0,1,1)}Y=te}a.push(F);break}case Xd:{let C=new Sa(y,g,w);for(let A=0;A<y;A++){let E=e.readFloat(),M=e.readInt32();C.setFrame(A,E,or[M&15],M>>4,e.readFloat())}a.push(C);break}}}}}let o=e.readInt(!0);if(o>0){let r=new mi(o),l=i.slots.length;for(let c=0;c<o;c++){let f=e.readFloat(),u=e.readInt(!0),g=j.newArray(l,0);for(let w=l-1;w>=0;w--)g[w]=-1;let p=j.newArray(l-u,0),v=0,b=0;for(let w=0;w<u;w++){let _=e.readInt(!0);for(;v!=_;)p[b++]=v++;g[v+e.readInt(!0)]=v++}for(;v<l;)p[b++]=v++;for(let w=l-1;w>=0;w--)g[w]==-1&&(g[w]=p[--b]);r.setFrame(c,f,g)}a.push(r)}let s=e.readInt(!0);if(s>0){let r=new na(s);for(let l=0;l<s;l++){let c=e.readFloat(),f=i.events[e.readInt(!0)],u=new Vr(c,f);u.intValue=e.readInt(!1),u.floatValue=e.readFloat(),u.stringValue=e.readString(),u.stringValue==null&&(u.stringValue=f.stringValue),u.data.audioPath&&(u.volume=e.readFloat(),u.balance=e.readFloat()),r.setFrame(l,u)}a.push(r)}let h=0;for(let r=0,l=a.length;r<l;r++)h=Math.max(h,a[r].getDuration());return new Fn(t,a,h)}}class yd{constructor(e,t=new Array,i=0,a=new DataView(e instanceof ArrayBuffer?e:e.buffer)){m(this,"strings");m(this,"index");m(this,"buffer");this.strings=t,this.index=i,this.buffer=a}readByte(){return this.buffer.getInt8(this.index++)}readUnsignedByte(){return this.buffer.getUint8(this.index++)}readShort(){let e=this.buffer.getInt16(this.index);return this.index+=2,e}readInt32(){let e=this.buffer.getInt32(this.index);return this.index+=4,e}readInt(e){let t=this.readByte(),i=t&127;return t&128&&(t=this.readByte(),i|=(t&127)<<7,t&128&&(t=this.readByte(),i|=(t&127)<<14,t&128&&(t=this.readByte(),i|=(t&127)<<21,t&128&&(t=this.readByte(),i|=(t&127)<<28)))),e?i:i>>>1^-(i&1)}readStringRef(){let e=this.readInt(!0);return e==0?null:this.strings[e-1]}readString(){let e=this.readInt(!0);switch(e){case 0:return null;case 1:return""}e--;let t="";for(let i=0;i<e;){let a=this.readUnsignedByte();switch(a>>4){case 12:case 13:t+=String.fromCharCode((a&31)<<6|this.readByte()&63),i+=2;break;case 14:t+=String.fromCharCode((a&15)<<12|(this.readByte()&63)<<6|this.readByte()&63),i+=3;break;default:t+=String.fromCharCode(a),i++}}return t}readFloat(){let e=this.buffer.getFloat32(this.index);return this.index+=4,e}readBoolean(){return this.readByte()!=0}}let wd=class{constructor(e,t,i,a,n){m(this,"parent");m(this,"skinIndex");m(this,"slotIndex");m(this,"mesh");m(this,"inheritTimeline");this.mesh=e,this.skinIndex=t,this.slotIndex=i,this.parent=a,this.inheritTimeline=n}};class xd{constructor(e=null,t=null,i=0){m(this,"bones");m(this,"vertices");m(this,"length");this.bones=e,this.vertices=t,this.length=i}}var Zt;(function(d){d[d.Region=0]="Region",d[d.BoundingBox=1]="BoundingBox",d[d.Mesh=2]="Mesh",d[d.LinkedMesh=3]="LinkedMesh",d[d.Path=4]="Path",d[d.Point=5]="Point",d[d.Clipping=6]="Clipping"})(Zt||(Zt={}));function ot(d,e,t){let i=d.readFloat(),a=d.readFloat()*t;for(let n=0,o=0,s=e.getFrameCount()-1;e.setFrame(n,i,a),n!=s;n++){let h=d.readFloat(),r=d.readFloat()*t;switch(d.readByte()){case Nt:e.setStepped(n);break;case Vt:Ie(d,e,o++,n,0,i,h,a,r,t)}i=h,a=r}return e}function Qa(d,e,t){let i=d.readFloat(),a=d.readFloat()*t,n=d.readFloat()*t;for(let o=0,s=0,h=e.getFrameCount()-1;e.setFrame(o,i,a,n),o!=h;o++){let r=d.readFloat(),l=d.readFloat()*t,c=d.readFloat()*t;switch(d.readByte()){case Nt:e.setStepped(o);break;case Vt:Ie(d,e,s++,o,0,i,r,a,l,t),Ie(d,e,s++,o,1,i,r,n,c,t)}i=r,a=l,n=c}return e}function Ie(d,e,t,i,a,n,o,s,h,r){e.setBezier(t,i,a,n,s,d.readFloat(),d.readFloat()*r,d.readFloat(),d.readFloat()*r,o,h)}const Cd=0,kd=1,Ad=2,Sd=3,Ed=4,Md=5,Td=6,Id=7,Ld=8,Rd=9,Bd=10,Fd=0,Pd=1,Od=2,Yd=3,Nd=4,Vd=5,Dd=0,Xd=1,zd=0,Ud=1,qd=2,Gd=0,jd=1,Hd=2,Wd=4,Zd=5,$d=6,Kd=7,Qd=8,Nt=1,Vt=2;class Jd{constructor(){m(this,"minX",0);m(this,"minY",0);m(this,"maxX",0);m(this,"maxY",0);m(this,"boundingBoxes",new Array);m(this,"polygons",new Array);m(this,"polygonPool",new xa(()=>j.newFloatArray(16)))}update(e,t){if(!e)throw new Error("skeleton cannot be null.");let i=this.boundingBoxes,a=this.polygons,n=this.polygonPool,o=e.slots,s=o.length;i.length=0,n.freeAll(a),a.length=0;for(let h=0;h<s;h++){let r=o[h];if(!r.bone.active)continue;let l=r.getAttachment();if(l instanceof Va){let c=l;i.push(c);let f=n.obtain();f.length!=c.worldVerticesLength&&(f=j.newFloatArray(c.worldVerticesLength)),a.push(f),c.computeWorldVertices(r,0,c.worldVerticesLength,f,0,2)}}t?this.aabbCompute():(this.minX=Number.POSITIVE_INFINITY,this.minY=Number.POSITIVE_INFINITY,this.maxX=Number.NEGATIVE_INFINITY,this.maxY=Number.NEGATIVE_INFINITY)}aabbCompute(){let e=Number.POSITIVE_INFINITY,t=Number.POSITIVE_INFINITY,i=Number.NEGATIVE_INFINITY,a=Number.NEGATIVE_INFINITY,n=this.polygons;for(let o=0,s=n.length;o<s;o++){let h=n[o],r=h;for(let l=0,c=h.length;l<c;l+=2){let f=r[l],u=r[l+1];e=Math.min(e,f),t=Math.min(t,u),i=Math.max(i,f),a=Math.max(a,u)}}this.minX=e,this.minY=t,this.maxX=i,this.maxY=a}aabbContainsPoint(e,t){return e>=this.minX&&e<=this.maxX&&t>=this.minY&&t<=this.maxY}aabbIntersectsSegment(e,t,i,a){let n=this.minX,o=this.minY,s=this.maxX,h=this.maxY;if(e<=n&&i<=n||t<=o&&a<=o||e>=s&&i>=s||t>=h&&a>=h)return!1;let r=(a-t)/(i-e),l=r*(n-e)+t;if(l>o&&l<h||(l=r*(s-e)+t,l>o&&l<h))return!0;let c=(o-t)/r+e;return c>n&&c<s||(c=(h-t)/r+e,c>n&&c<s)}aabbIntersectsSkeleton(e){return this.minX<e.maxX&&this.maxX>e.minX&&this.minY<e.maxY&&this.maxY>e.minY}containsPoint(e,t){let i=this.polygons;for(let a=0,n=i.length;a<n;a++)if(this.containsPointPolygon(i[a],e,t))return this.boundingBoxes[a];return null}containsPointPolygon(e,t,i){let a=e,n=e.length,o=n-2,s=!1;for(let h=0;h<n;h+=2){let r=a[h+1],l=a[o+1];if(r<i&&l>=i||l<i&&r>=i){let c=a[h];c+(i-r)/(l-r)*(a[o]-c)<t&&(s=!s)}o=h}return s}intersectsSegment(e,t,i,a){let n=this.polygons;for(let o=0,s=n.length;o<s;o++)if(this.intersectsSegmentPolygon(n[o],e,t,i,a))return this.boundingBoxes[o];return null}intersectsSegmentPolygon(e,t,i,a,n){let o=e,s=e.length,h=t-a,r=i-n,l=t*n-i*a,c=o[s-2],f=o[s-1];for(let u=0;u<s;u+=2){let g=o[u],p=o[u+1],v=c*p-f*g,b=c-g,w=f-p,_=h*w-r*b,y=(l*b-h*v)/_;if((y>=c&&y<=g||y>=g&&y<=c)&&(y>=t&&y<=a||y>=a&&y<=t)){let k=(l*w-r*v)/_;if((k>=f&&k<=p||k>=p&&k<=f)&&(k>=i&&k<=n||k>=n&&k<=i))return!0}c=g,f=p}return!1}getPolygon(e){if(!e)throw new Error("boundingBox cannot be null.");let t=this.boundingBoxes.indexOf(e);return t==-1?null:this.polygons[t]}getWidth(){return this.maxX-this.minX}getHeight(){return this.maxY-this.minY}}class mt{constructor(){m(this,"convexPolygons",new Array);m(this,"convexPolygonsIndices",new Array);m(this,"indicesArray",new Array);m(this,"isConcaveArray",new Array);m(this,"triangles",new Array);m(this,"polygonPool",new xa(()=>new Array));m(this,"polygonIndicesPool",new xa(()=>new Array))}triangulate(e){let t=e,i=e.length>>1,a=this.indicesArray;a.length=0;for(let s=0;s<i;s++)a[s]=s;let n=this.isConcaveArray;n.length=0;for(let s=0,h=i;s<h;++s)n[s]=mt.isConcave(s,i,t,a);let o=this.triangles;for(o.length=0;i>3;){let s=i-1,h=0,r=1;for(;;){e:if(!n[h]){let f=a[s]<<1,u=a[h]<<1,g=a[r]<<1,p=t[f],v=t[f+1],b=t[u],w=t[u+1],_=t[g],y=t[g+1];for(let k=(r+1)%i;k!=s;k=(k+1)%i){if(!n[k])continue;let C=a[k]<<1,A=t[C],E=t[C+1];if(mt.positiveArea(_,y,p,v,A,E)&&mt.positiveArea(p,v,b,w,A,E)&&mt.positiveArea(b,w,_,y,A,E))break e}break}if(r==0){do{if(!n[h])break;h--}while(h>0);break}s=h,h=r,r=(r+1)%i}o.push(a[(i+h-1)%i]),o.push(a[h]),o.push(a[(h+1)%i]),a.splice(h,1),n.splice(h,1),i--;let l=(i+h-1)%i,c=h==i?0:h;n[l]=mt.isConcave(l,i,t,a),n[c]=mt.isConcave(c,i,t,a)}return i==3&&(o.push(a[2]),o.push(a[0]),o.push(a[1])),o}decompose(e,t){let i=e,a=this.convexPolygons;this.polygonPool.freeAll(a),a.length=0;let n=this.convexPolygonsIndices;this.polygonIndicesPool.freeAll(n),n.length=0;let o=this.polygonIndicesPool.obtain();o.length=0;let s=this.polygonPool.obtain();s.length=0;let h=-1,r=0;for(let l=0,c=t.length;l<c;l+=3){let f=t[l]<<1,u=t[l+1]<<1,g=t[l+2]<<1,p=i[f],v=i[f+1],b=i[u],w=i[u+1],_=i[g],y=i[g+1],k=!1;if(h==f){let C=s.length-4,A=mt.winding(s[C],s[C+1],s[C+2],s[C+3],_,y),E=mt.winding(_,y,s[0],s[1],s[2],s[3]);A==r&&E==r&&(s.push(_),s.push(y),o.push(g),k=!0)}k||(s.length>0?(a.push(s),n.push(o)):(this.polygonPool.free(s),this.polygonIndicesPool.free(o)),s=this.polygonPool.obtain(),s.length=0,s.push(p),s.push(v),s.push(b),s.push(w),s.push(_),s.push(y),o=this.polygonIndicesPool.obtain(),o.length=0,o.push(f),o.push(u),o.push(g),r=mt.winding(p,v,b,w,_,y),h=f)}s.length>0&&(a.push(s),n.push(o));for(let l=0,c=a.length;l<c;l++){if(o=n[l],o.length==0)continue;let f=o[0],u=o[o.length-1];s=a[l];let g=s.length-4,p=s[g],v=s[g+1],b=s[g+2],w=s[g+3],_=s[0],y=s[1],k=s[2],C=s[3],A=mt.winding(p,v,b,w,_,y);for(let E=0;E<c;E++){if(E==l)continue;let M=n[E];if(M.length!=3)continue;let B=M[0],F=M[1],Y=M[2],N=a[E],I=N[N.length-2],O=N[N.length-1];if(B!=f||F!=u)continue;let D=mt.winding(p,v,b,w,I,O),te=mt.winding(I,O,_,y,k,C);D==A&&te==A&&(N.length=0,M.length=0,s.push(I),s.push(O),o.push(Y),p=b,v=w,b=I,w=O,E=0)}}for(let l=a.length-1;l>=0;l--)s=a[l],s.length==0&&(a.splice(l,1),this.polygonPool.free(s),o=n[l],n.splice(l,1),this.polygonIndicesPool.free(o));return a}static isConcave(e,t,i,a){let n=a[(t+e-1)%t]<<1,o=a[e]<<1,s=a[(e+1)%t]<<1;return!this.positiveArea(i[n],i[n+1],i[o],i[o+1],i[s],i[s+1])}static positiveArea(e,t,i,a,n,o){return e*(o-a)+i*(t-o)+n*(a-t)>=0}static winding(e,t,i,a,n,o){let s=i-e,h=a-t;return n*h-o*s+s*t-e*h>=0?1:-1}}class Ea{constructor(){m(this,"triangulator",new mt);m(this,"clippingPolygon",new Array);m(this,"clipOutput",new Array);m(this,"clippedVertices",new Array);m(this,"clippedUVs",new Array);m(this,"clippedTriangles",new Array);m(this,"scratch",new Array);m(this,"clipAttachment",null);m(this,"clippingPolygons",null)}clipStart(e,t){if(this.clipAttachment)return 0;this.clipAttachment=t;let i=t.worldVerticesLength,a=j.setArraySize(this.clippingPolygon,i);t.computeWorldVertices(e,0,i,a,0,2);let n=this.clippingPolygon;Ea.makeClockwise(n);let o=this.clippingPolygons=this.triangulator.decompose(n,this.triangulator.triangulate(n));for(let s=0,h=o.length;s<h;s++){let r=o[s];Ea.makeClockwise(r),r.push(r[0]),r.push(r[1])}return o.length}clipEndWithSlot(e){this.clipAttachment&&this.clipAttachment.endSlot==e.data&&this.clipEnd()}clipEnd(){this.clipAttachment&&(this.clipAttachment=null,this.clippingPolygons=null,this.clippedVertices.length=0,this.clippedTriangles.length=0,this.clippingPolygon.length=0)}isClipping(){return this.clipAttachment!=null}clipTriangles(e,t,i,a,n,o,s,h){let r,l,c,f,u,g;typeof t=="number"?(r=i,l=a,c=n,f=o,u=s,g=h):(r=t,l=i,c=a,f=n,u=o,g=s),c&&f&&u&&typeof g=="boolean"?this.clipTrianglesRender(e,r,l,c,f,u,g):this.clipTrianglesNoRender(e,r,l)}clipTrianglesNoRender(e,t,i){let a=this.clipOutput,n=this.clippedVertices,o=this.clippedTriangles,s=this.clippingPolygons,h=s.length,r=0;n.length=0,o.length=0;for(let l=0;l<i;l+=3){let c=t[l]<<1,f=e[c],u=e[c+1];c=t[l+1]<<1;let g=e[c],p=e[c+1];c=t[l+2]<<1;let v=e[c],b=e[c+1];for(let w=0;w<h;w++){let _=n.length;if(this.clip(f,u,g,p,v,b,s[w],a)){let y=a.length;if(y==0)continue;let k=y>>1,C=this.clipOutput,A=j.setArraySize(n,_+k*2);for(let M=0;M<y;M+=2,_+=2){let B=C[M],F=C[M+1];A[_]=B,A[_+1]=F}_=o.length;let E=j.setArraySize(o,_+3*(k-2));k--;for(let M=1;M<k;M++,_+=3)E[_]=r,E[_+1]=r+M,E[_+2]=r+M+1;r+=k+1}else{let y=j.setArraySize(n,_+6);y[_]=f,y[_+1]=u,y[_+2]=g,y[_+3]=p,y[_+4]=v,y[_+5]=b,_=o.length;let k=j.setArraySize(o,_+3);k[_]=r,k[_+1]=r+1,k[_+2]=r+2,r+=3;break}}}}clipTrianglesRender(e,t,i,a,n,o,s){let h=this.clipOutput,r=this.clippedVertices,l=this.clippedTriangles,c=this.clippingPolygons,f=c.length,u=s?12:8,g=0;r.length=0,l.length=0;for(let p=0;p<i;p+=3){let v=t[p]<<1,b=e[v],w=e[v+1],_=a[v],y=a[v+1];v=t[p+1]<<1;let k=e[v],C=e[v+1],A=a[v],E=a[v+1];v=t[p+2]<<1;let M=e[v],B=e[v+1],F=a[v],Y=a[v+1];for(let N=0;N<f;N++){let I=r.length;if(this.clip(b,w,k,C,M,B,c[N],h)){let O=h.length;if(O==0)continue;let D=C-B,te=M-k,be=b-M,le=B-w,Ae=1/(D*be+te*(w-B)),Le=O>>1,Ye=this.clipOutput,J=j.setArraySize(r,I+Le*u);for(let Ce=0;Ce<O;Ce+=2,I+=u){let Ke=Ye[Ce],V=Ye[Ce+1];J[I]=Ke,J[I+1]=V,J[I+2]=n.r,J[I+3]=n.g,J[I+4]=n.b,J[I+5]=n.a;let H=Ke-M,G=V-B,W=(D*H+te*G)*Ae,Re=(le*H+be*G)*Ae,De=1-W-Re;J[I+6]=_*W+A*Re+F*De,J[I+7]=y*W+E*Re+Y*De,s&&(J[I+8]=o.r,J[I+9]=o.g,J[I+10]=o.b,J[I+11]=o.a)}I=l.length;let we=j.setArraySize(l,I+3*(Le-2));Le--;for(let Ce=1;Ce<Le;Ce++,I+=3)we[I]=g,we[I+1]=g+Ce,we[I+2]=g+Ce+1;g+=Le+1}else{let O=j.setArraySize(r,I+3*u);O[I]=b,O[I+1]=w,O[I+2]=n.r,O[I+3]=n.g,O[I+4]=n.b,O[I+5]=n.a,s?(O[I+6]=_,O[I+7]=y,O[I+8]=o.r,O[I+9]=o.g,O[I+10]=o.b,O[I+11]=o.a,O[I+12]=k,O[I+13]=C,O[I+14]=n.r,O[I+15]=n.g,O[I+16]=n.b,O[I+17]=n.a,O[I+18]=A,O[I+19]=E,O[I+20]=o.r,O[I+21]=o.g,O[I+22]=o.b,O[I+23]=o.a,O[I+24]=M,O[I+25]=B,O[I+26]=n.r,O[I+27]=n.g,O[I+28]=n.b,O[I+29]=n.a,O[I+30]=F,O[I+31]=Y,O[I+32]=o.r,O[I+33]=o.g,O[I+34]=o.b,O[I+35]=o.a):(O[I+6]=_,O[I+7]=y,O[I+8]=k,O[I+9]=C,O[I+10]=n.r,O[I+11]=n.g,O[I+12]=n.b,O[I+13]=n.a,O[I+14]=A,O[I+15]=E,O[I+16]=M,O[I+17]=B,O[I+18]=n.r,O[I+19]=n.g,O[I+20]=n.b,O[I+21]=n.a,O[I+22]=F,O[I+23]=Y),I=l.length;let D=j.setArraySize(l,I+3);D[I]=g,D[I+1]=g+1,D[I+2]=g+2,g+=3;break}}}}clipTrianglesUnpacked(e,t,i,a){let n=this.clipOutput,o=this.clippedVertices,s=this.clippedUVs,h=this.clippedTriangles,r=this.clippingPolygons,l=r.length,c=0;o.length=0,s.length=0,h.length=0;for(let f=0;f<i;f+=3){let u=t[f]<<1,g=e[u],p=e[u+1],v=a[u],b=a[u+1];u=t[f+1]<<1;let w=e[u],_=e[u+1],y=a[u],k=a[u+1];u=t[f+2]<<1;let C=e[u],A=e[u+1],E=a[u],M=a[u+1];for(let B=0;B<l;B++){let F=o.length;if(this.clip(g,p,w,_,C,A,r[B],n)){let Y=n.length;if(Y==0)continue;let N=_-A,I=C-w,O=g-C,D=A-p,te=1/(N*O+I*(p-A)),be=Y>>1,le=this.clipOutput,Ae=j.setArraySize(o,F+be*2),Le=j.setArraySize(s,F+be*2);for(let J=0;J<Y;J+=2,F+=2){let we=le[J],Ce=le[J+1];Ae[F]=we,Ae[F+1]=Ce;let Ke=we-C,V=Ce-A,H=(N*Ke+I*V)*te,G=(D*Ke+O*V)*te,W=1-H-G;Le[F]=v*H+y*G+E*W,Le[F+1]=b*H+k*G+M*W}F=h.length;let Ye=j.setArraySize(h,F+3*(be-2));be--;for(let J=1;J<be;J++,F+=3)Ye[F]=c,Ye[F+1]=c+J,Ye[F+2]=c+J+1;c+=be+1}else{let Y=j.setArraySize(o,F+6);Y[F]=g,Y[F+1]=p,Y[F+2]=w,Y[F+3]=_,Y[F+4]=C,Y[F+5]=A;let N=j.setArraySize(s,F+3*2);N[F]=v,N[F+1]=b,N[F+2]=y,N[F+3]=k,N[F+4]=E,N[F+5]=M,F=h.length;let I=j.setArraySize(h,F+3);I[F]=c,I[F+1]=c+1,I[F+2]=c+2,c+=3;break}}}}clip(e,t,i,a,n,o,s,h){let r=h,l=!1,c;s.length%4>=2?(c=h,h=this.scratch):c=this.scratch,c.length=0,c.push(e),c.push(t),c.push(i),c.push(a),c.push(n),c.push(o),c.push(e),c.push(t),h.length=0;let f=s.length-4,u=s;for(let g=0;;g+=2){let p=u[g],v=u[g+1],b=p-u[g+2],w=v-u[g+3],_=h.length,y=c;for(let C=0,A=c.length-2;C<A;){let E=y[C],M=y[C+1];C+=2;let B=y[C],F=y[C+1],Y=w*(p-B)>b*(v-F),N=w*(p-E)-b*(v-M);if(N>0){if(Y){h.push(B),h.push(F);continue}let I=B-E,O=F-M,D=N/(I*w-O*b);if(D>=0&&D<=1)h.push(E+I*D),h.push(M+O*D);else{h.push(B),h.push(F);continue}}else if(Y){let I=B-E,O=F-M,D=N/(I*w-O*b);if(D>=0&&D<=1)h.push(E+I*D),h.push(M+O*D),h.push(B),h.push(F);else{h.push(B),h.push(F);continue}}l=!0}if(_==h.length)return r.length=0,!0;if(h.push(h[0]),h.push(h[1]),g==f)break;let k=h;h=c,h.length=0,c=k}if(r!=h){r.length=0;for(let g=0,p=h.length-2;g<p;g++)r[g]=h[g]}else r.length=r.length-2;return l}static makeClockwise(e){let t=e,i=e.length,a=t[i-2]*t[1]-t[0]*t[i-1],n=0,o=0,s=0,h=0;for(let r=0,l=i-3;r<l;r+=2)n=t[r],o=t[r+1],s=t[r+2],h=t[r+3],a+=n*h-s*o;if(!(a<0))for(let r=0,l=i-2,c=i>>1;r<c;r+=2){let f=t[r],u=t[r+1],g=l-r;t[r]=t[g],t[r+1]=t[g+1],t[g]=f,t[g+1]=u}}}class e1{constructor(e){m(this,"attachmentLoader");m(this,"scale",1);m(this,"linkedMeshes",new Array);this.attachmentLoader=e}readSkeletonData(e){let t=this.scale,i=new qr,a=typeof e=="string"?JSON.parse(e):e,n=a.skeleton;if(n&&(i.hash=n.hash,i.version=n.spine,i.x=n.x,i.y=n.y,i.width=n.width,i.height=n.height,i.referenceScale=R(n,"referenceScale",100)*t,i.fps=n.fps,i.imagesPath=n.images??null,i.audioPath=n.audio??null),a.bones)for(let o=0;o<a.bones.length;o++){let s=a.bones[o],h=null,r=R(s,"parent",null);r&&(h=i.findBone(r));let l=new Yr(i.bones.length,s.name,h);l.length=R(s,"length",0)*t,l.x=R(s,"x",0)*t,l.y=R(s,"y",0)*t,l.rotation=R(s,"rotation",0),l.scaleX=R(s,"scaleX",1),l.scaleY=R(s,"scaleY",1),l.shearX=R(s,"shearX",0),l.shearY=R(s,"shearY",0),l.inherit=j.enumValue(Ge,R(s,"inherit","Normal")),l.skinRequired=R(s,"skin",!1);let c=R(s,"color",null);c&&l.color.setFromString(c),i.bones.push(l)}if(a.slots)for(let o=0;o<a.slots.length;o++){let s=a.slots[o],h=s.name,r=i.findBone(s.bone);if(!r)throw new Error(`Couldn't find bone ${s.bone} for slot ${h}`);let l=new Gr(i.slots.length,h,r),c=R(s,"color",null);c&&l.color.setFromString(c);let f=R(s,"dark",null);f&&(l.darkColor=K.fromString(f)),l.attachmentName=R(s,"attachment",null),l.blendMode=j.enumValue(sa,R(s,"blend","normal")),l.visible=R(s,"visible",!0),i.slots.push(l)}if(a.ik)for(let o=0;o<a.ik.length;o++){let s=a.ik[o],h=new Xr(s.name);h.order=R(s,"order",0),h.skinRequired=R(s,"skin",!1);for(let l=0;l<s.bones.length;l++){let c=i.findBone(s.bones[l]);if(!c)throw new Error(`Couldn't find bone ${s.bones[l]} for IK constraint ${s.name}.`);h.bones.push(c)}let r=i.findBone(s.target);if(!r)throw new Error(`Couldn't find target bone ${s.target} for IK constraint ${s.name}.`);h.target=r,h.mix=R(s,"mix",1),h.softness=R(s,"softness",0)*t,h.bendDirection=R(s,"bendPositive",!0)?1:-1,h.compress=R(s,"compress",!1),h.stretch=R(s,"stretch",!1),h.uniform=R(s,"uniform",!1),i.ikConstraints.push(h)}if(a.transform)for(let o=0;o<a.transform.length;o++){let s=a.transform[o],h=new jr(s.name);h.order=R(s,"order",0),h.skinRequired=R(s,"skin",!1);for(let c=0;c<s.bones.length;c++){let f=s.bones[c],u=i.findBone(f);if(!u)throw new Error(`Couldn't find bone ${f} for transform constraint ${s.name}.`);h.bones.push(u)}let r=s.target,l=i.findBone(r);if(!l)throw new Error(`Couldn't find target bone ${r} for transform constraint ${s.name}.`);h.target=l,h.local=R(s,"local",!1),h.relative=R(s,"relative",!1),h.offsetRotation=R(s,"rotation",0),h.offsetX=R(s,"x",0)*t,h.offsetY=R(s,"y",0)*t,h.offsetScaleX=R(s,"scaleX",0),h.offsetScaleY=R(s,"scaleY",0),h.offsetShearY=R(s,"shearY",0),h.mixRotate=R(s,"mixRotate",1),h.mixX=R(s,"mixX",1),h.mixY=R(s,"mixY",h.mixX),h.mixScaleX=R(s,"mixScaleX",1),h.mixScaleY=R(s,"mixScaleY",h.mixScaleX),h.mixShearY=R(s,"mixShearY",1),i.transformConstraints.push(h)}if(a.path)for(let o=0;o<a.path.length;o++){let s=a.path[o],h=new zr(s.name);h.order=R(s,"order",0),h.skinRequired=R(s,"skin",!1);for(let c=0;c<s.bones.length;c++){let f=s.bones[c],u=i.findBone(f);if(!u)throw new Error(`Couldn't find bone ${f} for path constraint ${s.name}.`);h.bones.push(u)}let r=s.target,l=i.findSlot(r);if(!l)throw new Error(`Couldn't find target slot ${r} for path constraint ${s.name}.`);h.target=l,h.positionMode=j.enumValue(Xt,R(s,"positionMode","Percent")),h.spacingMode=j.enumValue(et,R(s,"spacingMode","Length")),h.rotateMode=j.enumValue(fi,R(s,"rotateMode","Tangent")),h.offsetRotation=R(s,"rotation",0),h.position=R(s,"position",0),h.positionMode==Xt.Fixed&&(h.position*=t),h.spacing=R(s,"spacing",0),(h.spacingMode==et.Length||h.spacingMode==et.Fixed)&&(h.spacing*=t),h.mixRotate=R(s,"mixRotate",1),h.mixX=R(s,"mixX",1),h.mixY=R(s,"mixY",h.mixX),i.pathConstraints.push(h)}if(a.physics)for(let o=0;o<a.physics.length;o++){const s=a.physics[o],h=new Ur(s.name);h.order=R(s,"order",0),h.skinRequired=R(s,"skin",!1);const r=s.bone,l=i.findBone(r);if(l==null)throw new Error("Physics bone not found: "+r);h.bone=l,h.x=R(s,"x",0),h.y=R(s,"y",0),h.rotate=R(s,"rotate",0),h.scaleX=R(s,"scaleX",0),h.shearX=R(s,"shearX",0),h.limit=R(s,"limit",5e3)*t,h.step=1/R(s,"fps",60),h.inertia=R(s,"inertia",1),h.strength=R(s,"strength",100),h.damping=R(s,"damping",1),h.massInverse=1/R(s,"mass",1),h.wind=R(s,"wind",0),h.gravity=R(s,"gravity",0),h.mix=R(s,"mix",1),h.inertiaGlobal=R(s,"inertiaGlobal",!1),h.strengthGlobal=R(s,"strengthGlobal",!1),h.dampingGlobal=R(s,"dampingGlobal",!1),h.massGlobal=R(s,"massGlobal",!1),h.windGlobal=R(s,"windGlobal",!1),h.gravityGlobal=R(s,"gravityGlobal",!1),h.mixGlobal=R(s,"mixGlobal",!1),i.physicsConstraints.push(h)}if(a.skins)for(let o=0;o<a.skins.length;o++){let s=a.skins[o],h=new vn(s.name);if(s.bones)for(let r=0;r<s.bones.length;r++){let l=s.bones[r],c=i.findBone(l);if(!c)throw new Error(`Couldn't find bone ${l} for skin ${s.name}.`);h.bones.push(c)}if(s.ik)for(let r=0;r<s.ik.length;r++){let l=s.ik[r],c=i.findIkConstraint(l);if(!c)throw new Error(`Couldn't find IK constraint ${l} for skin ${s.name}.`);h.constraints.push(c)}if(s.transform)for(let r=0;r<s.transform.length;r++){let l=s.transform[r],c=i.findTransformConstraint(l);if(!c)throw new Error(`Couldn't find transform constraint ${l} for skin ${s.name}.`);h.constraints.push(c)}if(s.path)for(let r=0;r<s.path.length;r++){let l=s.path[r],c=i.findPathConstraint(l);if(!c)throw new Error(`Couldn't find path constraint ${l} for skin ${s.name}.`);h.constraints.push(c)}if(s.physics)for(let r=0;r<s.physics.length;r++){let l=s.physics[r],c=i.findPhysicsConstraint(l);if(!c)throw new Error(`Couldn't find physics constraint ${l} for skin ${s.name}.`);h.constraints.push(c)}for(let r in s.attachments){let l=i.findSlot(r);if(!l)throw new Error(`Couldn't find slot ${r} for skin ${s.name}.`);let c=s.attachments[r];for(let f in c){let u=this.readAttachment(c[f],h,l.index,f,i);u&&h.setAttachment(l.index,f,u)}}i.skins.push(h),h.name=="default"&&(i.defaultSkin=h)}for(let o=0,s=this.linkedMeshes.length;o<s;o++){let h=this.linkedMeshes[o],r=h.skin?i.findSkin(h.skin):i.defaultSkin;if(!r)throw new Error(`Skin not found: ${h.skin}`);let l=r.getAttachment(h.slotIndex,h.parent);if(!l)throw new Error(`Parent mesh not found: ${h.parent}`);h.mesh.timelineAttachment=h.inheritTimeline?l:h.mesh,h.mesh.setParentMesh(l),h.mesh.region!=null&&h.mesh.updateRegion()}if(this.linkedMeshes.length=0,a.events)for(let o in a.events){let s=a.events[o],h=new Dr(o);h.intValue=R(s,"int",0),h.floatValue=R(s,"float",0),h.stringValue=R(s,"string",""),h.audioPath=R(s,"audio",null),h.audioPath&&(h.volume=R(s,"volume",1),h.balance=R(s,"balance",0)),i.events.push(h)}if(a.animations)for(let o in a.animations){let s=a.animations[o];this.readAnimation(s,o,i)}return i}readAttachment(e,t,i,a,n){let o=this.scale;switch(a=R(e,"name",a),R(e,"type","region")){case"region":{let s=R(e,"path",a),h=this.readSequence(R(e,"sequence",null)),r=this.attachmentLoader.newRegionAttachment(t,a,s,h);if(!r)return null;r.path=s,r.x=R(e,"x",0)*o,r.y=R(e,"y",0)*o,r.scaleX=R(e,"scaleX",1),r.scaleY=R(e,"scaleY",1),r.rotation=R(e,"rotation",0),r.width=e.width*o,r.height=e.height*o,r.sequence=h;let l=R(e,"color",null);return l&&r.color.setFromString(l),r.region!=null&&r.updateRegion(),r}case"boundingbox":{let s=this.attachmentLoader.newBoundingBoxAttachment(t,a);if(!s)return null;this.readVertices(e,s,e.vertexCount<<1);let h=R(e,"color",null);return h&&s.color.setFromString(h),s}case"mesh":case"linkedmesh":{let s=R(e,"path",a),h=this.readSequence(R(e,"sequence",null)),r=this.attachmentLoader.newMeshAttachment(t,a,s,h);if(!r)return null;r.path=s;let l=R(e,"color",null);l&&r.color.setFromString(l),r.width=R(e,"width",0)*o,r.height=R(e,"height",0)*o,r.sequence=h;let c=R(e,"parent",null);if(c)return this.linkedMeshes.push(new t1(r,R(e,"skin",null),i,c,R(e,"timelines",!0))),r;let f=e.uvs;return this.readVertices(e,r,f.length),r.triangles=e.triangles,r.regionUVs=f,r.region!=null&&r.updateRegion(),r.edges=R(e,"edges",null),r.hullLength=R(e,"hull",0)*2,r}case"path":{let s=this.attachmentLoader.newPathAttachment(t,a);if(!s)return null;s.closed=R(e,"closed",!1),s.constantSpeed=R(e,"constantSpeed",!0);let h=e.vertexCount;this.readVertices(e,s,h<<1);let r=j.newArray(h/3,0);for(let c=0;c<e.lengths.length;c++)r[c]=e.lengths[c]*o;s.lengths=r;let l=R(e,"color",null);return l&&s.color.setFromString(l),s}case"point":{let s=this.attachmentLoader.newPointAttachment(t,a);if(!s)return null;s.x=R(e,"x",0)*o,s.y=R(e,"y",0)*o,s.rotation=R(e,"rotation",0);let h=R(e,"color",null);return h&&s.color.setFromString(h),s}case"clipping":{let s=this.attachmentLoader.newClippingAttachment(t,a);if(!s)return null;let h=R(e,"end",null);h&&(s.endSlot=n.findSlot(h));let r=e.vertexCount;this.readVertices(e,s,r<<1);let l=R(e,"color",null);return l&&s.color.setFromString(l),s}}return null}readSequence(e){if(e==null)return null;let t=new Ca(R(e,"count",0));return t.start=R(e,"start",1),t.digits=R(e,"digits",0),t.setupIndex=R(e,"setup",0),t}readVertices(e,t,i){let a=this.scale;t.worldVerticesLength=i;let n=e.vertices;if(i==n.length){let h=j.toFloatArray(n);if(a!=1)for(let r=0,l=n.length;r<l;r++)h[r]*=a;t.vertices=h;return}let o=new Array,s=new Array;for(let h=0,r=n.length;h<r;){let l=n[h++];s.push(l);for(let c=h+l*4;h<c;h+=4)s.push(n[h]),o.push(n[h+1]*a),o.push(n[h+2]*a),o.push(n[h+3])}t.bones=s,t.vertices=j.toFloatArray(o)}readAnimation(e,t,i){let a=this.scale,n=new Array;if(e.slots)for(let s in e.slots){let h=e.slots[s],r=i.findSlot(s);if(!r)throw new Error("Slot not found: "+s);let l=r.index;for(let c in h){let f=h[c];if(!f)continue;let u=f.length;if(c=="attachment"){let g=new Ii(u,l);for(let p=0;p<u;p++){let v=f[p];g.setFrame(p,R(v,"time",0),R(v,"name",null))}n.push(g)}else if(c=="rgba"){let g=new _r(u,u<<2,l),p=f[0],v=R(p,"time",0),b=K.fromString(p.color);for(let w=0,_=0;;w++){g.setFrame(w,v,b.r,b.g,b.b,b.a);let y=f[w+1];if(!y){g.shrink(_);break}let k=R(y,"time",0),C=K.fromString(y.color),A=p.curve;A&&(_=Pe(A,g,_,w,0,v,k,b.r,C.r,1),_=Pe(A,g,_,w,1,v,k,b.g,C.g,1),_=Pe(A,g,_,w,2,v,k,b.b,C.b,1),_=Pe(A,g,_,w,3,v,k,b.a,C.a,1)),v=k,b=C,p=y}n.push(g)}else if(c=="rgb"){let g=new br(u,u*3,l),p=f[0],v=R(p,"time",0),b=K.fromString(p.color);for(let w=0,_=0;;w++){g.setFrame(w,v,b.r,b.g,b.b);let y=f[w+1];if(!y){g.shrink(_);break}let k=R(y,"time",0),C=K.fromString(y.color),A=p.curve;A&&(_=Pe(A,g,_,w,0,v,k,b.r,C.r,1),_=Pe(A,g,_,w,1,v,k,b.g,C.g,1),_=Pe(A,g,_,w,2,v,k,b.b,C.b,1)),v=k,b=C,p=y}n.push(g)}else if(c=="alpha")n.push(At(f,new yr(u,u,l),0,1));else if(c=="rgba2"){let g=new wr(u,u*7,l),p=f[0],v=R(p,"time",0),b=K.fromString(p.light),w=K.fromString(p.dark);for(let _=0,y=0;;_++){g.setFrame(_,v,b.r,b.g,b.b,b.a,w.r,w.g,w.b);let k=f[_+1];if(!k){g.shrink(y);break}let C=R(k,"time",0),A=K.fromString(k.light),E=K.fromString(k.dark),M=p.curve;M&&(y=Pe(M,g,y,_,0,v,C,b.r,A.r,1),y=Pe(M,g,y,_,1,v,C,b.g,A.g,1),y=Pe(M,g,y,_,2,v,C,b.b,A.b,1),y=Pe(M,g,y,_,3,v,C,b.a,A.a,1),y=Pe(M,g,y,_,4,v,C,w.r,E.r,1),y=Pe(M,g,y,_,5,v,C,w.g,E.g,1),y=Pe(M,g,y,_,6,v,C,w.b,E.b,1)),v=C,b=A,w=E,p=k}n.push(g)}else if(c=="rgb2"){let g=new xr(u,u*6,l),p=f[0],v=R(p,"time",0),b=K.fromString(p.light),w=K.fromString(p.dark);for(let _=0,y=0;;_++){g.setFrame(_,v,b.r,b.g,b.b,w.r,w.g,w.b);let k=f[_+1];if(!k){g.shrink(y);break}let C=R(k,"time",0),A=K.fromString(k.light),E=K.fromString(k.dark),M=p.curve;M&&(y=Pe(M,g,y,_,0,v,C,b.r,A.r,1),y=Pe(M,g,y,_,1,v,C,b.g,A.g,1),y=Pe(M,g,y,_,2,v,C,b.b,A.b,1),y=Pe(M,g,y,_,3,v,C,w.r,E.r,1),y=Pe(M,g,y,_,4,v,C,w.g,E.g,1),y=Pe(M,g,y,_,5,v,C,w.b,E.b,1)),v=C,b=A,w=E,p=k}n.push(g)}}}if(e.bones)for(let s in e.bones){let h=e.bones[s],r=i.findBone(s);if(!r)throw new Error("Bone not found: "+s);let l=r.index;for(let c in h){let f=h[c],u=f.length;if(u!=0){if(c==="rotate")n.push(At(f,new ka(u,u,l),0,1));else if(c==="translate"){let g=new lr(u,u<<1,l);n.push(Ja(f,g,"x","y",0,a))}else if(c==="translatex"){let g=new cr(u,u,l);n.push(At(f,g,0,a))}else if(c==="translatey"){let g=new hr(u,u,l);n.push(At(f,g,0,a))}else if(c==="scale"){let g=new dr(u,u<<1,l);n.push(Ja(f,g,"x","y",1,1))}else if(c==="scalex"){let g=new ur(u,u,l);n.push(At(f,g,1,1))}else if(c==="scaley"){let g=new mr(u,u,l);n.push(At(f,g,1,1))}else if(c==="shear"){let g=new fr(u,u<<1,l);n.push(Ja(f,g,"x","y",0,1))}else if(c==="shearx"){let g=new gr(u,u,l);n.push(At(f,g,0,1))}else if(c==="sheary"){let g=new pr(u,u,l);n.push(At(f,g,0,1))}else if(c==="inherit"){let g=new vr(u,r.index);for(let p=0;p<f.length;p++){let v=f[p];g.setFrame(p,R(v,"time",0),j.enumValue(Ge,R(v,"inherit","Normal")))}n.push(g)}}}}if(e.ik)for(let s in e.ik){let h=e.ik[s],r=h[0];if(!r)continue;let l=i.findIkConstraint(s);if(!l)throw new Error("IK Constraint not found: "+s);let c=i.ikConstraints.indexOf(l),f=new kr(h.length,h.length<<1,c),u=R(r,"time",0),g=R(r,"mix",1),p=R(r,"softness",0)*a;for(let v=0,b=0;;v++){f.setFrame(v,u,g,p,R(r,"bendPositive",!0)?1:-1,R(r,"compress",!1),R(r,"stretch",!1));let w=h[v+1];if(!w){f.shrink(b);break}let _=R(w,"time",0),y=R(w,"mix",1),k=R(w,"softness",0)*a,C=r.curve;C&&(b=Pe(C,f,b,v,0,u,_,g,y,1),b=Pe(C,f,b,v,1,u,_,p,k,a)),u=_,g=y,p=k,r=w}n.push(f)}if(e.transform)for(let s in e.transform){let h=e.transform[s],r=h[0];if(!r)continue;let l=i.findTransformConstraint(s);if(!l)throw new Error("Transform constraint not found: "+s);let c=i.transformConstraints.indexOf(l),f=new Ar(h.length,h.length*6,c),u=R(r,"time",0),g=R(r,"mixRotate",1),p=R(r,"mixX",1),v=R(r,"mixY",p),b=R(r,"mixScaleX",1),w=R(r,"mixScaleY",b),_=R(r,"mixShearY",1);for(let y=0,k=0;;y++){f.setFrame(y,u,g,p,v,b,w,_);let C=h[y+1];if(!C){f.shrink(k);break}let A=R(C,"time",0),E=R(C,"mixRotate",1),M=R(C,"mixX",1),B=R(C,"mixY",M),F=R(C,"mixScaleX",1),Y=R(C,"mixScaleY",F),N=R(C,"mixShearY",1),I=r.curve;I&&(k=Pe(I,f,k,y,0,u,A,g,E,1),k=Pe(I,f,k,y,1,u,A,p,M,1),k=Pe(I,f,k,y,2,u,A,v,B,1),k=Pe(I,f,k,y,3,u,A,b,F,1),k=Pe(I,f,k,y,4,u,A,w,Y,1),k=Pe(I,f,k,y,5,u,A,_,N,1)),u=A,g=E,p=M,v=B,b=F,w=Y,b=F,r=C}n.push(f)}if(e.path)for(let s in e.path){let h=e.path[s],r=i.findPathConstraint(s);if(!r)throw new Error("Path constraint not found: "+s);let l=i.pathConstraints.indexOf(r);for(let c in h){let f=h[c],u=f[0];if(!u)continue;let g=f.length;if(c==="position"){let p=new Sr(g,g,l);n.push(At(f,p,0,r.positionMode==Xt.Fixed?a:1))}else if(c==="spacing"){let p=new Er(g,g,l);n.push(At(f,p,0,r.spacingMode==et.Length||r.spacingMode==et.Fixed?a:1))}else if(c==="mix"){let p=new Mr(g,g*3,l),v=R(u,"time",0),b=R(u,"mixRotate",1),w=R(u,"mixX",1),_=R(u,"mixY",w);for(let y=0,k=0;;y++){p.setFrame(y,v,b,w,_);let C=f[y+1];if(!C){p.shrink(k);break}let A=R(C,"time",0),E=R(C,"mixRotate",1),M=R(C,"mixX",1),B=R(C,"mixY",M),F=u.curve;F&&(k=Pe(F,p,k,y,0,v,A,b,E,1),k=Pe(F,p,k,y,1,v,A,w,M,1),k=Pe(F,p,k,y,2,v,A,_,B,1)),v=A,b=E,w=M,_=B,u=C}n.push(p)}}}if(e.physics)for(let s in e.physics){let h=e.physics[s],r=-1;if(s.length>0){let l=i.findPhysicsConstraint(s);if(!l)throw new Error("Physics constraint not found: "+s);r=i.physicsConstraints.indexOf(l)}for(let l in h){let c=h[l],f=c[0];if(!f)continue;let u=c.length;if(l=="reset"){const p=new Aa(u,r);for(let v=0;f!=null;f=c[v+1],v++)p.setFrame(v,R(f,"time",0));n.push(p);continue}let g;if(l=="inertia")g=new Tr(u,u,r);else if(l=="strength")g=new Ir(u,u,r);else if(l=="damping")g=new Lr(u,u,r);else if(l=="mass")g=new Rr(u,u,r);else if(l=="wind")g=new Br(u,u,r);else if(l=="gravity")g=new Fr(u,u,r);else if(l=="mix")g=new Pr(u,u,r);else continue;n.push(At(c,g,0,1))}}if(e.attachments)for(let s in e.attachments){let h=e.attachments[s],r=i.findSkin(s);if(!r)throw new Error("Skin not found: "+s);for(let l in h){let c=h[l],f=i.findSlot(l);if(!f)throw new Error("Slot not found: "+l);let u=f.index;for(let g in c){let p=c[g],v=r.getAttachment(u,g);for(let b in p){let w=p[b],_=w[0];if(_){if(b=="deform"){let y=v.bones,k=v.vertices,C=y?k.length/3*2:k.length,A=new Cr(w.length,w.length,u,v),E=R(_,"time",0);for(let M=0,B=0;;M++){let F,Y=R(_,"vertices",null);if(!Y)F=y?j.newFloatArray(C):k;else{F=j.newFloatArray(C);let D=R(_,"offset",0);if(j.arrayCopy(Y,0,F,D,Y.length),a!=1)for(let te=D,be=te+Y.length;te<be;te++)F[te]*=a;if(!y)for(let te=0;te<C;te++)F[te]+=k[te]}A.setFrame(M,E,F);let N=w[M+1];if(!N){A.shrink(B);break}let I=R(N,"time",0),O=_.curve;O&&(B=Pe(O,A,B,M,0,E,I,0,1,1)),E=I,_=N}n.push(A)}else if(b=="sequence"){let y=new Sa(w.length,u,v),k=0;for(let C=0;C<w.length;C++){let A=R(_,"delay",k),E=R(_,"time",0),M=nt[R(_,"mode","hold")],B=R(_,"index",0);y.setFrame(C,E,M,B,A),k=A,_=w[C+1]}n.push(y)}}}}}}if(e.drawOrder){let s=new mi(e.drawOrder.length),h=i.slots.length,r=0;for(let l=0;l<e.drawOrder.length;l++,r++){let c=e.drawOrder[l],f=null,u=R(c,"offsets",null);if(u){f=j.newArray(h,-1);let g=j.newArray(h-u.length,0),p=0,v=0;for(let b=0;b<u.length;b++){let w=u[b],_=i.findSlot(w.slot);if(!_)throw new Error("Slot not found: "+_);let y=_.index;for(;p!=y;)g[v++]=p++;f[p+w.offset]=p++}for(;p<h;)g[v++]=p++;for(let b=h-1;b>=0;b--)f[b]==-1&&(f[b]=g[--v])}s.setFrame(r,R(c,"time",0),f)}n.push(s)}if(e.events){let s=new na(e.events.length),h=0;for(let r=0;r<e.events.length;r++,h++){let l=e.events[r],c=i.findEvent(l.name);if(!c)throw new Error("Event not found: "+l.name);let f=new Vr(j.toSinglePrecision(R(l,"time",0)),c);f.intValue=R(l,"int",c.intValue),f.floatValue=R(l,"float",c.floatValue),f.stringValue=R(l,"string",c.stringValue),f.data.audioPath&&(f.volume=R(l,"volume",1),f.balance=R(l,"balance",0)),s.setFrame(h,f)}n.push(s)}let o=0;for(let s=0,h=n.length;s<h;s++)o=Math.max(o,n[s].getDuration());i.animations.push(new Fn(t,n,o))}}class t1{constructor(e,t,i,a,n){m(this,"parent");m(this,"skin");m(this,"slotIndex");m(this,"mesh");m(this,"inheritTimeline");this.mesh=e,this.skin=t,this.slotIndex=i,this.parent=a,this.inheritTimeline=n}}function At(d,e,t,i){let a=d[0],n=R(a,"time",0),o=R(a,"value",t)*i,s=0;for(let h=0;;h++){e.setFrame(h,n,o);let r=d[h+1];if(!r)return e.shrink(s),e;let l=R(r,"time",0),c=R(r,"value",t)*i;a.curve&&(s=Pe(a.curve,e,s,h,0,n,l,o,c,i)),n=l,o=c,a=r}}function Ja(d,e,t,i,a,n){let o=d[0],s=R(o,"time",0),h=R(o,t,a)*n,r=R(o,i,a)*n,l=0;for(let c=0;;c++){e.setFrame(c,s,h,r);let f=d[c+1];if(!f)return e.shrink(l),e;let u=R(f,"time",0),g=R(f,t,a)*n,p=R(f,i,a)*n,v=o.curve;v&&(l=Pe(v,e,l,c,0,s,u,h,g,n),l=Pe(v,e,l,c,1,s,u,r,p,n)),s=u,h=g,r=p,o=f}}function Pe(d,e,t,i,a,n,o,s,h,r){if(d=="stepped")return e.setStepped(i),t;let l=a<<2,c=d[l],f=d[l+1]*r,u=d[l+2],g=d[l+3]*r;return e.setBezier(t,i,a,n,s,c,f,u,g,o,h),t+1}function R(d,e,t){return d[e]!==void 0?d[e]:t}typeof Math.fround>"u"&&(Math.fround=function(d){return function(e){return d[0]=e,d[0]}}(new Float32Array(1)));class dt{constructor(e,t={alpha:"true"}){m(this,"canvas");m(this,"gl");m(this,"restorables",new Array);if(e instanceof WebGLRenderingContext||typeof WebGL2RenderingContext<"u"&&e instanceof WebGL2RenderingContext)this.gl=e,this.canvas=this.gl.canvas;else{let i=e;this.gl=i.getContext("webgl2",t)||i.getContext("webgl",t),this.canvas=i,i.addEventListener("webglcontextlost",a=>{a&&a.preventDefault()}),i.addEventListener("webglcontextrestored",a=>{for(let n=0,o=this.restorables.length;n<o;n++)this.restorables[n].restore()})}}addRestorable(e){this.restorables.push(e)}removeRestorable(e){let t=this.restorables.indexOf(e);t>-1&&this.restorables.splice(t,1)}}const ta=class ta extends ld{constructor(t,i,a=!1){super(i);m(this,"context");m(this,"texture",null);m(this,"boundUnit",0);m(this,"useMipMaps",!1);this.context=t instanceof dt?t:new dt(t),this.useMipMaps=a,this.restore(),this.context.addRestorable(this)}setFilters(t,i){let a=this.context.gl;this.bind(),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,t),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MAG_FILTER,ta.validateMagFilter(i)),this.useMipMaps=ta.usesMipMaps(t),this.useMipMaps&&a.generateMipmap(a.TEXTURE_2D)}static validateMagFilter(t){switch(t){case Ze.MipMapLinearLinear:case Ze.MipMapLinearNearest:case Ze.MipMapNearestLinear:case Ze.MipMapNearestNearest:return Ze.Linear;default:return t}}static usesMipMaps(t){switch(t){case Ze.MipMapLinearLinear:case Ze.MipMapLinearNearest:case Ze.MipMapNearestLinear:case Ze.MipMapNearestNearest:return!0;default:return!1}}setWraps(t,i){let a=this.context.gl;this.bind(),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_S,t),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_T,i)}update(t){let i=this.context.gl;this.texture||(this.texture=this.context.gl.createTexture()),this.bind(),i.texImage2D(i.TEXTURE_2D,0,i.RGBA,i.RGBA,i.UNSIGNED_BYTE,this._image),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MAG_FILTER,i.LINEAR),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MIN_FILTER,t?i.LINEAR_MIPMAP_LINEAR:i.LINEAR),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_S,i.CLAMP_TO_EDGE),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_T,i.CLAMP_TO_EDGE),t&&i.generateMipmap(i.TEXTURE_2D)}restore(){this.texture=null,this.update(this.useMipMaps)}bind(t=0){let i=this.context.gl;this.boundUnit=t,i.activeTexture(i.TEXTURE0+t),i.bindTexture(i.TEXTURE_2D,this.texture)}unbind(){let t=this.context.gl;t.activeTexture(t.TEXTURE0+this.boundUnit),t.bindTexture(t.TEXTURE_2D,null)}dispose(){this.context.removeRestorable(this),this.context.gl.deleteTexture(this.texture)}};m(ta,"DISABLE_UNPACK_PREMULTIPLIED_ALPHA_WEBGL",!1);let ra=ta;class i1 extends fd{constructor(e,t="",i=new Nr){super(a=>new ra(e,a),t,i)}}class ci{constructor(e=0,t=0,i=0){m(this,"x",0);m(this,"y",0);m(this,"z",0);this.x=e,this.y=t,this.z=i}setFrom(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}set(e,t,i){return this.x=e,this.y=t,this.z=i,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}scale(e){return this.x*=e,this.y*=e,this.z*=e,this}normalize(){let e=this.length();return e==0?this:(e=1/e,this.x*=e,this.y*=e,this.z*=e,this)}cross(e){return this.set(this.y*e.z-this.z*e.y,this.z*e.x-this.x*e.z,this.x*e.y-this.y*e.x)}multiply(e){let t=e.values;return this.set(this.x*t[ie]+this.y*t[ce]+this.z*t[he]+t[ae],this.x*t[de]+this.y*t[ne]+this.z*t[ue]+t[se],this.x*t[me]+this.y*t[fe]+this.z*t[re]+t[oe])}project(e){let t=e.values,i=1/(this.x*t[pe]+this.y*t[ve]+this.z*t[_e]+t[ge]);return this.set((this.x*t[ie]+this.y*t[ce]+this.z*t[he]+t[ae])*i,(this.x*t[de]+this.y*t[ne]+this.z*t[ue]+t[se])*i,(this.x*t[me]+this.y*t[fe]+this.z*t[re]+t[oe])*i)}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}distance(e){let t=e.x-this.x,i=e.y-this.y,a=e.z-this.z;return Math.sqrt(t*t+i*i+a*a)}}const ie=0,ce=4,he=8,ae=12,de=1,ne=5,ue=9,se=13,me=2,fe=6,re=10,oe=14,pe=3,ve=7,_e=11,ge=15,lt=class lt{constructor(){m(this,"temp",new Float32Array(16));m(this,"values",new Float32Array(16));let e=this.values;e[ie]=1,e[ne]=1,e[re]=1,e[ge]=1}set(e){return this.values.set(e),this}transpose(){let e=this.temp,t=this.values;return e[ie]=t[ie],e[ce]=t[de],e[he]=t[me],e[ae]=t[pe],e[de]=t[ce],e[ne]=t[ne],e[ue]=t[fe],e[se]=t[ve],e[me]=t[he],e[fe]=t[ue],e[re]=t[re],e[oe]=t[_e],e[pe]=t[ae],e[ve]=t[se],e[_e]=t[oe],e[ge]=t[ge],this.set(e)}identity(){let e=this.values;return e[ie]=1,e[ce]=0,e[he]=0,e[ae]=0,e[de]=0,e[ne]=1,e[ue]=0,e[se]=0,e[me]=0,e[fe]=0,e[re]=1,e[oe]=0,e[pe]=0,e[ve]=0,e[_e]=0,e[ge]=1,this}invert(){let e=this.values,t=this.temp,i=e[pe]*e[fe]*e[ue]*e[ae]-e[me]*e[ve]*e[ue]*e[ae]-e[pe]*e[ne]*e[re]*e[ae]+e[de]*e[ve]*e[re]*e[ae]+e[me]*e[ne]*e[_e]*e[ae]-e[de]*e[fe]*e[_e]*e[ae]-e[pe]*e[fe]*e[he]*e[se]+e[me]*e[ve]*e[he]*e[se]+e[pe]*e[ce]*e[re]*e[se]-e[ie]*e[ve]*e[re]*e[se]-e[me]*e[ce]*e[_e]*e[se]+e[ie]*e[fe]*e[_e]*e[se]+e[pe]*e[ne]*e[he]*e[oe]-e[de]*e[ve]*e[he]*e[oe]-e[pe]*e[ce]*e[ue]*e[oe]+e[ie]*e[ve]*e[ue]*e[oe]+e[de]*e[ce]*e[_e]*e[oe]-e[ie]*e[ne]*e[_e]*e[oe]-e[me]*e[ne]*e[he]*e[ge]+e[de]*e[fe]*e[he]*e[ge]+e[me]*e[ce]*e[ue]*e[ge]-e[ie]*e[fe]*e[ue]*e[ge]-e[de]*e[ce]*e[re]*e[ge]+e[ie]*e[ne]*e[re]*e[ge];if(i==0)throw new Error("non-invertible matrix");let a=1/i;return t[ie]=e[ue]*e[oe]*e[ve]-e[se]*e[re]*e[ve]+e[se]*e[fe]*e[_e]-e[ne]*e[oe]*e[_e]-e[ue]*e[fe]*e[ge]+e[ne]*e[re]*e[ge],t[ce]=e[ae]*e[re]*e[ve]-e[he]*e[oe]*e[ve]-e[ae]*e[fe]*e[_e]+e[ce]*e[oe]*e[_e]+e[he]*e[fe]*e[ge]-e[ce]*e[re]*e[ge],t[he]=e[he]*e[se]*e[ve]-e[ae]*e[ue]*e[ve]+e[ae]*e[ne]*e[_e]-e[ce]*e[se]*e[_e]-e[he]*e[ne]*e[ge]+e[ce]*e[ue]*e[ge],t[ae]=e[ae]*e[ue]*e[fe]-e[he]*e[se]*e[fe]-e[ae]*e[ne]*e[re]+e[ce]*e[se]*e[re]+e[he]*e[ne]*e[oe]-e[ce]*e[ue]*e[oe],t[de]=e[se]*e[re]*e[pe]-e[ue]*e[oe]*e[pe]-e[se]*e[me]*e[_e]+e[de]*e[oe]*e[_e]+e[ue]*e[me]*e[ge]-e[de]*e[re]*e[ge],t[ne]=e[he]*e[oe]*e[pe]-e[ae]*e[re]*e[pe]+e[ae]*e[me]*e[_e]-e[ie]*e[oe]*e[_e]-e[he]*e[me]*e[ge]+e[ie]*e[re]*e[ge],t[ue]=e[ae]*e[ue]*e[pe]-e[he]*e[se]*e[pe]-e[ae]*e[de]*e[_e]+e[ie]*e[se]*e[_e]+e[he]*e[de]*e[ge]-e[ie]*e[ue]*e[ge],t[se]=e[he]*e[se]*e[me]-e[ae]*e[ue]*e[me]+e[ae]*e[de]*e[re]-e[ie]*e[se]*e[re]-e[he]*e[de]*e[oe]+e[ie]*e[ue]*e[oe],t[me]=e[ne]*e[oe]*e[pe]-e[se]*e[fe]*e[pe]+e[se]*e[me]*e[ve]-e[de]*e[oe]*e[ve]-e[ne]*e[me]*e[ge]+e[de]*e[fe]*e[ge],t[fe]=e[ae]*e[fe]*e[pe]-e[ce]*e[oe]*e[pe]-e[ae]*e[me]*e[ve]+e[ie]*e[oe]*e[ve]+e[ce]*e[me]*e[ge]-e[ie]*e[fe]*e[ge],t[re]=e[ce]*e[se]*e[pe]-e[ae]*e[ne]*e[pe]+e[ae]*e[de]*e[ve]-e[ie]*e[se]*e[ve]-e[ce]*e[de]*e[ge]+e[ie]*e[ne]*e[ge],t[oe]=e[ae]*e[ne]*e[me]-e[ce]*e[se]*e[me]-e[ae]*e[de]*e[fe]+e[ie]*e[se]*e[fe]+e[ce]*e[de]*e[oe]-e[ie]*e[ne]*e[oe],t[pe]=e[ue]*e[fe]*e[pe]-e[ne]*e[re]*e[pe]-e[ue]*e[me]*e[ve]+e[de]*e[re]*e[ve]+e[ne]*e[me]*e[_e]-e[de]*e[fe]*e[_e],t[ve]=e[ce]*e[re]*e[pe]-e[he]*e[fe]*e[pe]+e[he]*e[me]*e[ve]-e[ie]*e[re]*e[ve]-e[ce]*e[me]*e[_e]+e[ie]*e[fe]*e[_e],t[_e]=e[he]*e[ne]*e[pe]-e[ce]*e[ue]*e[pe]-e[he]*e[de]*e[ve]+e[ie]*e[ue]*e[ve]+e[ce]*e[de]*e[_e]-e[ie]*e[ne]*e[_e],t[ge]=e[ce]*e[ue]*e[me]-e[he]*e[ne]*e[me]+e[he]*e[de]*e[fe]-e[ie]*e[ue]*e[fe]-e[ce]*e[de]*e[re]+e[ie]*e[ne]*e[re],e[ie]=t[ie]*a,e[ce]=t[ce]*a,e[he]=t[he]*a,e[ae]=t[ae]*a,e[de]=t[de]*a,e[ne]=t[ne]*a,e[ue]=t[ue]*a,e[se]=t[se]*a,e[me]=t[me]*a,e[fe]=t[fe]*a,e[re]=t[re]*a,e[oe]=t[oe]*a,e[pe]=t[pe]*a,e[ve]=t[ve]*a,e[_e]=t[_e]*a,e[ge]=t[ge]*a,this}determinant(){let e=this.values;return e[pe]*e[fe]*e[ue]*e[ae]-e[me]*e[ve]*e[ue]*e[ae]-e[pe]*e[ne]*e[re]*e[ae]+e[de]*e[ve]*e[re]*e[ae]+e[me]*e[ne]*e[_e]*e[ae]-e[de]*e[fe]*e[_e]*e[ae]-e[pe]*e[fe]*e[he]*e[se]+e[me]*e[ve]*e[he]*e[se]+e[pe]*e[ce]*e[re]*e[se]-e[ie]*e[ve]*e[re]*e[se]-e[me]*e[ce]*e[_e]*e[se]+e[ie]*e[fe]*e[_e]*e[se]+e[pe]*e[ne]*e[he]*e[oe]-e[de]*e[ve]*e[he]*e[oe]-e[pe]*e[ce]*e[ue]*e[oe]+e[ie]*e[ve]*e[ue]*e[oe]+e[de]*e[ce]*e[_e]*e[oe]-e[ie]*e[ne]*e[_e]*e[oe]-e[me]*e[ne]*e[he]*e[ge]+e[de]*e[fe]*e[he]*e[ge]+e[me]*e[ce]*e[ue]*e[ge]-e[ie]*e[fe]*e[ue]*e[ge]-e[de]*e[ce]*e[re]*e[ge]+e[ie]*e[ne]*e[re]*e[ge]}translate(e,t,i){let a=this.values;return a[ae]+=e,a[se]+=t,a[oe]+=i,this}copy(){return new lt().set(this.values)}projection(e,t,i,a){this.identity();let n=1/Math.tan(i*(Math.PI/180)/2),o=(t+e)/(e-t),s=2*t*e/(e-t),h=this.values;return h[ie]=n/a,h[de]=0,h[me]=0,h[pe]=0,h[ce]=0,h[ne]=n,h[fe]=0,h[ve]=0,h[he]=0,h[ue]=0,h[re]=o,h[_e]=-1,h[ae]=0,h[se]=0,h[oe]=s,h[ge]=0,this}ortho2d(e,t,i,a){return this.ortho(e,e+i,t,t+a,0,1)}ortho(e,t,i,a,n,o){this.identity();let s=2/(t-e),h=2/(a-i),r=-2/(o-n),l=-(t+e)/(t-e),c=-(a+i)/(a-i),f=-(o+n)/(o-n),u=this.values;return u[ie]=s,u[de]=0,u[me]=0,u[pe]=0,u[ce]=0,u[ne]=h,u[fe]=0,u[ve]=0,u[he]=0,u[ue]=0,u[re]=r,u[_e]=0,u[ae]=l,u[se]=c,u[oe]=f,u[ge]=1,this}multiply(e){let t=this.temp,i=this.values,a=e.values;return t[ie]=i[ie]*a[ie]+i[ce]*a[de]+i[he]*a[me]+i[ae]*a[pe],t[ce]=i[ie]*a[ce]+i[ce]*a[ne]+i[he]*a[fe]+i[ae]*a[ve],t[he]=i[ie]*a[he]+i[ce]*a[ue]+i[he]*a[re]+i[ae]*a[_e],t[ae]=i[ie]*a[ae]+i[ce]*a[se]+i[he]*a[oe]+i[ae]*a[ge],t[de]=i[de]*a[ie]+i[ne]*a[de]+i[ue]*a[me]+i[se]*a[pe],t[ne]=i[de]*a[ce]+i[ne]*a[ne]+i[ue]*a[fe]+i[se]*a[ve],t[ue]=i[de]*a[he]+i[ne]*a[ue]+i[ue]*a[re]+i[se]*a[_e],t[se]=i[de]*a[ae]+i[ne]*a[se]+i[ue]*a[oe]+i[se]*a[ge],t[me]=i[me]*a[ie]+i[fe]*a[de]+i[re]*a[me]+i[oe]*a[pe],t[fe]=i[me]*a[ce]+i[fe]*a[ne]+i[re]*a[fe]+i[oe]*a[ve],t[re]=i[me]*a[he]+i[fe]*a[ue]+i[re]*a[re]+i[oe]*a[_e],t[oe]=i[me]*a[ae]+i[fe]*a[se]+i[re]*a[oe]+i[oe]*a[ge],t[pe]=i[pe]*a[ie]+i[ve]*a[de]+i[_e]*a[me]+i[ge]*a[pe],t[ve]=i[pe]*a[ce]+i[ve]*a[ne]+i[_e]*a[fe]+i[ge]*a[ve],t[_e]=i[pe]*a[he]+i[ve]*a[ue]+i[_e]*a[re]+i[ge]*a[_e],t[ge]=i[pe]*a[ae]+i[ve]*a[se]+i[_e]*a[oe]+i[ge]*a[ge],this.set(this.temp)}multiplyLeft(e){let t=this.temp,i=this.values,a=e.values;return t[ie]=a[ie]*i[ie]+a[ce]*i[de]+a[he]*i[me]+a[ae]*i[pe],t[ce]=a[ie]*i[ce]+a[ce]*i[ne]+a[he]*i[fe]+a[ae]*i[ve],t[he]=a[ie]*i[he]+a[ce]*i[ue]+a[he]*i[re]+a[ae]*i[_e],t[ae]=a[ie]*i[ae]+a[ce]*i[se]+a[he]*i[oe]+a[ae]*i[ge],t[de]=a[de]*i[ie]+a[ne]*i[de]+a[ue]*i[me]+a[se]*i[pe],t[ne]=a[de]*i[ce]+a[ne]*i[ne]+a[ue]*i[fe]+a[se]*i[ve],t[ue]=a[de]*i[he]+a[ne]*i[ue]+a[ue]*i[re]+a[se]*i[_e],t[se]=a[de]*i[ae]+a[ne]*i[se]+a[ue]*i[oe]+a[se]*i[ge],t[me]=a[me]*i[ie]+a[fe]*i[de]+a[re]*i[me]+a[oe]*i[pe],t[fe]=a[me]*i[ce]+a[fe]*i[ne]+a[re]*i[fe]+a[oe]*i[ve],t[re]=a[me]*i[he]+a[fe]*i[ue]+a[re]*i[re]+a[oe]*i[_e],t[oe]=a[me]*i[ae]+a[fe]*i[se]+a[re]*i[oe]+a[oe]*i[ge],t[pe]=a[pe]*i[ie]+a[ve]*i[de]+a[_e]*i[me]+a[ge]*i[pe],t[ve]=a[pe]*i[ce]+a[ve]*i[ne]+a[_e]*i[fe]+a[ge]*i[ve],t[_e]=a[pe]*i[he]+a[ve]*i[ue]+a[_e]*i[re]+a[ge]*i[_e],t[ge]=a[pe]*i[ae]+a[ve]*i[se]+a[_e]*i[oe]+a[ge]*i[ge],this.set(this.temp)}lookAt(e,t,i){let a=lt.xAxis,n=lt.yAxis,o=lt.zAxis;o.setFrom(t).normalize(),a.setFrom(t).normalize(),a.cross(i).normalize(),n.setFrom(a).cross(o).normalize(),this.identity();let s=this.values;return s[ie]=a.x,s[ce]=a.y,s[he]=a.z,s[de]=n.x,s[ne]=n.y,s[ue]=n.z,s[me]=-o.x,s[fe]=-o.y,s[re]=-o.z,lt.tmpMatrix.identity(),lt.tmpMatrix.values[ae]=-e.x,lt.tmpMatrix.values[se]=-e.y,lt.tmpMatrix.values[oe]=-e.z,this.multiply(lt.tmpMatrix),this}};m(lt,"xAxis",new ci),m(lt,"yAxis",new ci),m(lt,"zAxis",new ci),m(lt,"tmpMatrix",new lt);let Li=lt;class a1{constructor(e,t){m(this,"position",new ci(0,0,0));m(this,"direction",new ci(0,0,-1));m(this,"up",new ci(0,1,0));m(this,"near",0);m(this,"far",100);m(this,"zoom",1);m(this,"viewportWidth",0);m(this,"viewportHeight",0);m(this,"projectionView",new Li);m(this,"inverseProjectionView",new Li);m(this,"projection",new Li);m(this,"view",new Li);this.viewportWidth=e,this.viewportHeight=t,this.update()}update(){let e=this.projection,t=this.view,i=this.projectionView,a=this.inverseProjectionView,n=this.zoom,o=this.viewportWidth,s=this.viewportHeight;e.ortho(n*(-o/2),n*(o/2),n*(-s/2),n*(s/2),this.near,this.far),t.lookAt(this.position,this.direction,this.up),i.set(e.values),i.multiply(t),a.set(i.values).invert()}screenToWorld(e,t,i){let a=e.x,n=i-e.y-1;return e.x=2*a/t-1,e.y=2*n/i-1,e.z=2*e.z-1,e.project(this.inverseProjectionView),e}worldToScreen(e,t,i){return e.project(this.projectionView),e.x=t*(e.x+1)/2,e.y=i*(e.y+1)/2,e.z=(e.z+1)/2,e}setViewport(e,t){this.viewportWidth=e,this.viewportHeight=t}}class Hr{constructor(e){m(this,"element");m(this,"mouseX",0);m(this,"mouseY",0);m(this,"buttonDown",!1);m(this,"touch0",null);m(this,"touch1",null);m(this,"initialPinchDistance",0);m(this,"listeners",new Array);m(this,"eventListeners",[]);this.element=e,this.setupCallbacks(e)}setupCallbacks(e){let t=s=>{if(s instanceof MouseEvent){let h=e.getBoundingClientRect();this.mouseX=s.clientX-h.left,this.mouseY=s.clientY-h.top,this.buttonDown=!0,this.listeners.map(r=>{r.down&&r.down(this.mouseX,this.mouseY)}),document.addEventListener("mousemove",i),document.addEventListener("mouseup",a)}},i=s=>{if(s instanceof MouseEvent){let h=e.getBoundingClientRect();this.mouseX=s.clientX-h.left,this.mouseY=s.clientY-h.top,this.listeners.map(r=>{this.buttonDown?r.dragged&&r.dragged(this.mouseX,this.mouseY):r.moved&&r.moved(this.mouseX,this.mouseY)})}},a=s=>{if(s instanceof MouseEvent){let h=e.getBoundingClientRect();this.mouseX=s.clientX-h.left,this.mouseY=s.clientY-h.top,this.buttonDown=!1,this.listeners.map(r=>{r.up&&r.up(this.mouseX,this.mouseY)}),document.removeEventListener("mousemove",i),document.removeEventListener("mouseup",a)}},n=s=>{s.preventDefault(),s.deltaY,s.deltaMode==WheelEvent.DOM_DELTA_LINE,s.deltaMode==WheelEvent.DOM_DELTA_PAGE,this.listeners.map(h=>{h.wheel&&h.wheel(s.deltaY)})};e.addEventListener("mousedown",t,!0),e.addEventListener("mousemove",i,!0),e.addEventListener("mouseup",a,!0),e.addEventListener("wheel",n,!0),e.addEventListener("touchstart",s=>{if(!this.touch0||!this.touch1){var h=s.changedTouches;let r=h.item(0);if(!r)return;let l=e.getBoundingClientRect(),c=r.clientX-l.left,f=r.clientY-l.top,u=new n1(r.identifier,c,f);if(this.mouseX=c,this.mouseY=f,this.buttonDown=!0,!this.touch0)this.touch0=u,this.listeners.map(g=>{g.down&&g.down(u.x,u.y)});else if(!this.touch1){this.touch1=u;let g=this.touch1.x-this.touch0.x,p=this.touch1.x-this.touch0.x;this.initialPinchDistance=Math.sqrt(g*g+p*p),this.listeners.map(v=>{v.zoom&&v.zoom(this.initialPinchDistance,this.initialPinchDistance)})}}s.preventDefault()},!1),e.addEventListener("touchmove",s=>{if(this.touch0){var h=s.changedTouches;let c=e.getBoundingClientRect();for(var r=0;r<h.length;r++){var l=h[r];let f=l.clientX-c.left,u=l.clientY-c.top;this.touch0.identifier===l.identifier&&(this.touch0.x=this.mouseX=f,this.touch0.y=this.mouseY=u,this.listeners.map(g=>{g.dragged&&g.dragged(f,u)})),this.touch1&&this.touch1.identifier===l.identifier&&(this.touch1.x=this.mouseX=f,this.touch1.y=this.mouseY=u)}if(this.touch0&&this.touch1){let f=this.touch1.x-this.touch0.x,u=this.touch1.x-this.touch0.x,g=Math.sqrt(f*f+u*u);this.listeners.map(p=>{p.zoom&&p.zoom(this.initialPinchDistance,g)})}}s.preventDefault()},!1);let o=s=>{if(this.touch0){var h=s.changedTouches;let c=e.getBoundingClientRect();for(var r=0;r<h.length;r++){var l=h[r];let f=l.clientX-c.left,u=l.clientY-c.top;if(this.touch0.identifier===l.identifier)if(this.touch0=null,this.mouseX=f,this.mouseY=u,this.listeners.map(g=>{g.up&&g.up(f,u)}),this.touch1)this.touch0=this.touch1,this.touch1=null,this.mouseX=this.touch0.x,this.mouseX=this.touch0.x,this.buttonDown=!0,this.listeners.map(g=>{g.down&&g.down(this.touch0.x,this.touch0.y)});else{this.buttonDown=!1;break}this.touch1&&this.touch1.identifier&&(this.touch1=null)}}s.preventDefault()};e.addEventListener("touchend",o,!1),e.addEventListener("touchcancel",o)}addListener(e){this.listeners.push(e)}removeListener(e){let t=this.listeners.indexOf(e);t>-1&&this.listeners.splice(t,1)}}class n1{constructor(e,t,i){m(this,"identifier");m(this,"x");m(this,"y");this.identifier=e,this.x=t,this.y=i}}const Fe=class Fe{constructor(e,t,i){m(this,"vertexShader");m(this,"fragmentShader");m(this,"context");m(this,"vs",null);m(this,"vsSource");m(this,"fs",null);m(this,"fsSource");m(this,"program",null);m(this,"tmp2x2",new Float32Array(2*2));m(this,"tmp3x3",new Float32Array(3*3));m(this,"tmp4x4",new Float32Array(4*4));this.vertexShader=t,this.fragmentShader=i,this.vsSource=t,this.fsSource=i,this.context=e instanceof dt?e:new dt(e),this.context.addRestorable(this),this.compile()}getProgram(){return this.program}getVertexShader(){return this.vertexShader}getFragmentShader(){return this.fragmentShader}getVertexShaderSource(){return this.vsSource}getFragmentSource(){return this.fsSource}compile(){let e=this.context.gl;try{if(this.vs=this.compileShader(e.VERTEX_SHADER,this.vertexShader),!this.vs)throw new Error("Couldn't compile vertex shader.");if(this.fs=this.compileShader(e.FRAGMENT_SHADER,this.fragmentShader),!this.fs)throw new Error("Couldn#t compile fragment shader.");this.program=this.compileProgram(this.vs,this.fs)}catch(t){throw this.dispose(),t}}compileShader(e,t){let i=this.context.gl,a=i.createShader(e);if(!a)throw new Error("Couldn't create shader.");if(i.shaderSource(a,t),i.compileShader(a),!i.getShaderParameter(a,i.COMPILE_STATUS)){let n="Couldn't compile shader: "+i.getShaderInfoLog(a);if(i.deleteShader(a),!i.isContextLost())throw new Error(n)}return a}compileProgram(e,t){let i=this.context.gl,a=i.createProgram();if(!a)throw new Error("Couldn't compile program.");if(i.attachShader(a,e),i.attachShader(a,t),i.linkProgram(a),!i.getProgramParameter(a,i.LINK_STATUS)){let n="Couldn't compile shader program: "+i.getProgramInfoLog(a);if(i.deleteProgram(a),!i.isContextLost())throw new Error(n)}return a}restore(){this.compile()}bind(){this.context.gl.useProgram(this.program)}unbind(){this.context.gl.useProgram(null)}setUniformi(e,t){this.context.gl.uniform1i(this.getUniformLocation(e),t)}setUniformf(e,t){this.context.gl.uniform1f(this.getUniformLocation(e),t)}setUniform2f(e,t,i){this.context.gl.uniform2f(this.getUniformLocation(e),t,i)}setUniform3f(e,t,i,a){this.context.gl.uniform3f(this.getUniformLocation(e),t,i,a)}setUniform4f(e,t,i,a,n){this.context.gl.uniform4f(this.getUniformLocation(e),t,i,a,n)}setUniform2x2f(e,t){let i=this.context.gl;this.tmp2x2.set(t),i.uniformMatrix2fv(this.getUniformLocation(e),!1,this.tmp2x2)}setUniform3x3f(e,t){let i=this.context.gl;this.tmp3x3.set(t),i.uniformMatrix3fv(this.getUniformLocation(e),!1,this.tmp3x3)}setUniform4x4f(e,t){let i=this.context.gl;this.tmp4x4.set(t),i.uniformMatrix4fv(this.getUniformLocation(e),!1,this.tmp4x4)}getUniformLocation(e){let t=this.context.gl;if(!this.program)throw new Error("Shader not compiled.");let i=t.getUniformLocation(this.program,e);if(!i&&!t.isContextLost())throw new Error(`Couldn't find location for uniform ${e}`);return i}getAttributeLocation(e){let t=this.context.gl;if(!this.program)throw new Error("Shader not compiled.");let i=t.getAttribLocation(this.program,e);if(i==-1&&!t.isContextLost())throw new Error(`Couldn't find location for attribute ${e}`);return i}dispose(){this.context.removeRestorable(this);let e=this.context.gl;this.vs&&(e.deleteShader(this.vs),this.vs=null),this.fs&&(e.deleteShader(this.fs),this.fs=null),this.program&&(e.deleteProgram(this.program),this.program=null)}static newColoredTextured(e){let t=`
attribute vec4 ${Fe.POSITION};
attribute vec4 ${Fe.COLOR};
attribute vec2 ${Fe.TEXCOORDS};
uniform mat4 ${Fe.MVP_MATRIX};
varying vec4 v_color;
varying vec2 v_texCoords;

void main () {
	v_color = ${Fe.COLOR};
	v_texCoords = ${Fe.TEXCOORDS};
	gl_Position = ${Fe.MVP_MATRIX} * ${Fe.POSITION};
}
`,i=`
#ifdef GL_ES
	#define LOWP lowp
	precision mediump float;
#else
	#define LOWP
#endif
varying LOWP vec4 v_color;
varying vec2 v_texCoords;
uniform sampler2D u_texture;

void main () {
	gl_FragColor = v_color * texture2D(u_texture, v_texCoords);
}
`;return new Fe(e,t,i)}static newTwoColoredTextured(e){let t=`
attribute vec4 ${Fe.POSITION};
attribute vec4 ${Fe.COLOR};
attribute vec4 ${Fe.COLOR2};
attribute vec2 ${Fe.TEXCOORDS};
uniform mat4 ${Fe.MVP_MATRIX};
varying vec4 v_light;
varying vec4 v_dark;
varying vec2 v_texCoords;

void main () {
	v_light = ${Fe.COLOR};
	v_dark = ${Fe.COLOR2};
	v_texCoords = ${Fe.TEXCOORDS};
	gl_Position = ${Fe.MVP_MATRIX} * ${Fe.POSITION};
}
`,i=`
#ifdef GL_ES
	#define LOWP lowp
	precision mediump float;
#else
	#define LOWP
#endif
varying LOWP vec4 v_light;
varying LOWP vec4 v_dark;
varying vec2 v_texCoords;
uniform sampler2D u_texture;

void main () {
	vec4 texColor = texture2D(u_texture, v_texCoords);
	gl_FragColor.a = texColor.a * v_light.a;
	gl_FragColor.rgb = ((texColor.a - 1.0) * v_dark.a + 1.0 - texColor.rgb) * v_dark.rgb + texColor.rgb * v_light.rgb;
}
`;return new Fe(e,t,i)}static newColored(e){let t=`
attribute vec4 ${Fe.POSITION};
attribute vec4 ${Fe.COLOR};
uniform mat4 ${Fe.MVP_MATRIX};
varying vec4 v_color;

void main () {
	v_color = ${Fe.COLOR};
	gl_Position = ${Fe.MVP_MATRIX} * ${Fe.POSITION};
}
`,i=`
#ifdef GL_ES
	#define LOWP lowp
	precision mediump float;
#else
	#define LOWP
#endif
varying LOWP vec4 v_color;

void main () {
	gl_FragColor = v_color;
}
`;return new Fe(e,t,i)}};m(Fe,"MVP_MATRIX","u_projTrans"),m(Fe,"POSITION","a_position"),m(Fe,"COLOR","a_color"),m(Fe,"COLOR2","a_color2"),m(Fe,"TEXCOORDS","a_texCoords"),m(Fe,"SAMPLER","u_texture");let Tt=Fe;class Wr{constructor(e,t,i,a){m(this,"attributes");m(this,"context");m(this,"vertices");m(this,"verticesBuffer",null);m(this,"verticesLength",0);m(this,"dirtyVertices",!1);m(this,"indices");m(this,"indicesBuffer",null);m(this,"indicesLength",0);m(this,"dirtyIndices",!1);m(this,"elementsPerVertex",0);this.attributes=t,this.context=e instanceof dt?e:new dt(e),this.elementsPerVertex=0;for(let n=0;n<t.length;n++)this.elementsPerVertex+=t[n].numElements;this.vertices=new Float32Array(i*this.elementsPerVertex),this.indices=new Uint16Array(a),this.context.addRestorable(this)}getAttributes(){return this.attributes}maxVertices(){return this.vertices.length/this.elementsPerVertex}numVertices(){return this.verticesLength/this.elementsPerVertex}setVerticesLength(e){this.dirtyVertices=!0,this.verticesLength=e}getVertices(){return this.vertices}maxIndices(){return this.indices.length}numIndices(){return this.indicesLength}setIndicesLength(e){this.dirtyIndices=!0,this.indicesLength=e}getIndices(){return this.indices}getVertexSizeInFloats(){let e=0;for(var t=0;t<this.attributes.length;t++){let i=this.attributes[t];e+=i.numElements}return e}setVertices(e){if(this.dirtyVertices=!0,e.length>this.vertices.length)throw Error("Mesh can't store more than "+this.maxVertices()+" vertices");this.vertices.set(e,0),this.verticesLength=e.length}setIndices(e){if(this.dirtyIndices=!0,e.length>this.indices.length)throw Error("Mesh can't store more than "+this.maxIndices()+" indices");this.indices.set(e,0),this.indicesLength=e.length}draw(e,t){this.drawWithOffset(e,t,0,this.indicesLength>0?this.indicesLength:this.verticesLength/this.elementsPerVertex)}drawWithOffset(e,t,i,a){let n=this.context.gl;(this.dirtyVertices||this.dirtyIndices)&&this.update(),this.bind(e),this.indicesLength>0?n.drawElements(t,a,n.UNSIGNED_SHORT,i*2):n.drawArrays(t,i,a),this.unbind(e)}bind(e){let t=this.context.gl;t.bindBuffer(t.ARRAY_BUFFER,this.verticesBuffer);let i=0;for(let a=0;a<this.attributes.length;a++){let n=this.attributes[a],o=e.getAttributeLocation(n.name);t.enableVertexAttribArray(o),t.vertexAttribPointer(o,n.numElements,t.FLOAT,!1,this.elementsPerVertex*4,i*4),i+=n.numElements}this.indicesLength>0&&t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this.indicesBuffer)}unbind(e){let t=this.context.gl;for(let i=0;i<this.attributes.length;i++){let a=this.attributes[i],n=e.getAttributeLocation(a.name);t.disableVertexAttribArray(n)}t.bindBuffer(t.ARRAY_BUFFER,null),this.indicesLength>0&&t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,null)}update(){let e=this.context.gl;this.dirtyVertices&&(this.verticesBuffer||(this.verticesBuffer=e.createBuffer()),e.bindBuffer(e.ARRAY_BUFFER,this.verticesBuffer),e.bufferData(e.ARRAY_BUFFER,this.vertices.subarray(0,this.verticesLength),e.DYNAMIC_DRAW),this.dirtyVertices=!1),this.dirtyIndices&&(this.indicesBuffer||(this.indicesBuffer=e.createBuffer()),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,this.indicesBuffer),e.bufferData(e.ELEMENT_ARRAY_BUFFER,this.indices.subarray(0,this.indicesLength),e.DYNAMIC_DRAW),this.dirtyIndices=!1)}restore(){this.verticesBuffer=null,this.indicesBuffer=null,this.update()}dispose(){this.context.removeRestorable(this);let e=this.context.gl;e.deleteBuffer(this.verticesBuffer),e.deleteBuffer(this.indicesBuffer)}}class Xa{constructor(e,t,i){m(this,"name");m(this,"type");m(this,"numElements");this.name=e,this.type=t,this.numElements=i}}class _n extends Xa{constructor(){super(Tt.POSITION,Ui.Float,2)}}class hs extends Xa{constructor(e=0){super(Tt.TEXCOORDS+(e==0?"":e),Ui.Float,2)}}class bn extends Xa{constructor(){super(Tt.COLOR,Ui.Float,4)}}class s1 extends Xa{constructor(){super(Tt.COLOR2,Ui.Float,4)}}var Ui;(function(d){d[d.Float=0]="Float"})(Ui||(Ui={}));const qt=1,r1=769,ds=770,us=771,ms=774,Et=class Et{constructor(e,t=!0,i=10920){m(this,"context");m(this,"drawCalls",0);m(this,"isDrawing",!1);m(this,"mesh");m(this,"shader",null);m(this,"lastTexture",null);m(this,"verticesLength",0);m(this,"indicesLength",0);m(this,"srcColorBlend");m(this,"srcAlphaBlend");m(this,"dstBlend");m(this,"cullWasEnabled",!1);if(i>10920)throw new Error("Can't have more than 10920 triangles per batch: "+i);this.context=e instanceof dt?e:new dt(e);let a=t?[new _n,new bn,new hs,new s1]:[new _n,new bn,new hs];this.mesh=new Wr(e,a,i,i*3);let n=this.context.gl;this.srcColorBlend=n.SRC_ALPHA,this.srcAlphaBlend=n.ONE,this.dstBlend=n.ONE_MINUS_SRC_ALPHA}begin(e){if(this.isDrawing)throw new Error("PolygonBatch is already drawing. Call PolygonBatch.end() before calling PolygonBatch.begin()");this.drawCalls=0,this.shader=e,this.lastTexture=null,this.isDrawing=!0;let t=this.context.gl;t.enable(t.BLEND),t.blendFuncSeparate(this.srcColorBlend,this.dstBlend,this.srcAlphaBlend,this.dstBlend),Et.disableCulling&&(this.cullWasEnabled=t.isEnabled(t.CULL_FACE),this.cullWasEnabled&&t.disable(t.CULL_FACE))}setBlendMode(e,t){const i=Et.blendModesGL[e],a=t?i.srcRgbPma:i.srcRgb,n=i.srcAlpha,o=i.dstRgb;if(this.srcColorBlend==a&&this.srcAlphaBlend==n&&this.dstBlend==o)return;this.srcColorBlend=a,this.srcAlphaBlend=n,this.dstBlend=o,this.isDrawing&&this.flush(),this.context.gl.blendFuncSeparate(a,o,n,o)}draw(e,t,i){e!=this.lastTexture?(this.flush(),this.lastTexture=e):(this.verticesLength+t.length>this.mesh.getVertices().length||this.indicesLength+i.length>this.mesh.getIndices().length)&&this.flush();let a=this.mesh.numVertices();this.mesh.getVertices().set(t,this.verticesLength),this.verticesLength+=t.length,this.mesh.setVerticesLength(this.verticesLength);let n=this.mesh.getIndices();for(let o=this.indicesLength,s=0;s<i.length;o++,s++)n[o]=i[s]+a;this.indicesLength+=i.length,this.mesh.setIndicesLength(this.indicesLength)}flush(){if(this.verticesLength!=0){if(!this.lastTexture)throw new Error("No texture set.");if(!this.shader)throw new Error("No shader set.");this.lastTexture.bind(),this.mesh.draw(this.shader,this.context.gl.TRIANGLES),this.verticesLength=0,this.indicesLength=0,this.mesh.setVerticesLength(0),this.mesh.setIndicesLength(0),this.drawCalls++,Et.globalDrawCalls++}}end(){if(!this.isDrawing)throw new Error("PolygonBatch is not drawing. Call PolygonBatch.begin() before calling PolygonBatch.end()");(this.verticesLength>0||this.indicesLength>0)&&this.flush(),this.shader=null,this.lastTexture=null,this.isDrawing=!1;let e=this.context.gl;e.disable(e.BLEND),Et.disableCulling&&this.cullWasEnabled&&e.enable(e.CULL_FACE)}getDrawCalls(){return this.drawCalls}static getAndResetGlobalDrawCalls(){let e=Et.globalDrawCalls;return Et.globalDrawCalls=0,e}dispose(){this.mesh.dispose()}};m(Et,"disableCulling",!1),m(Et,"globalDrawCalls",0),m(Et,"blendModesGL",[{srcRgb:ds,srcRgbPma:qt,dstRgb:us,srcAlpha:qt},{srcRgb:ds,srcRgbPma:qt,dstRgb:qt,srcAlpha:qt},{srcRgb:ms,srcRgbPma:ms,dstRgb:us,srcAlpha:qt},{srcRgb:qt,srcRgbPma:qt,dstRgb:r1,srcAlpha:qt}]);let Ma=Et;class fs{constructor(e,t=10920){m(this,"context");m(this,"isDrawing",!1);m(this,"mesh");m(this,"shapeType",ht.Filled);m(this,"color",new K(1,1,1,1));m(this,"shader",null);m(this,"vertexIndex",0);m(this,"tmp",new Dt);m(this,"srcColorBlend");m(this,"srcAlphaBlend");m(this,"dstBlend");if(t>10920)throw new Error("Can't have more than 10920 triangles per batch: "+t);this.context=e instanceof dt?e:new dt(e),this.mesh=new Wr(e,[new _n,new bn],t,0);let i=this.context.gl;this.srcColorBlend=i.SRC_ALPHA,this.srcAlphaBlend=i.ONE,this.dstBlend=i.ONE_MINUS_SRC_ALPHA}begin(e){if(this.isDrawing)throw new Error("ShapeRenderer.begin() has already been called");this.shader=e,this.vertexIndex=0,this.isDrawing=!0;let t=this.context.gl;t.enable(t.BLEND),t.blendFuncSeparate(this.srcColorBlend,this.dstBlend,this.srcAlphaBlend,this.dstBlend)}setBlendMode(e,t,i){this.srcColorBlend=e,this.srcAlphaBlend=t,this.dstBlend=i,this.isDrawing&&(this.flush(),this.context.gl.blendFuncSeparate(e,i,t,i))}setColor(e){this.color.setFromColor(e)}setColorWith(e,t,i,a){this.color.set(e,t,i,a)}point(e,t,i){this.check(ht.Point,1),i||(i=this.color),this.vertex(e,t,i)}line(e,t,i,a,n){this.check(ht.Line,2),this.mesh.getVertices(),this.vertexIndex,n||(n=this.color),this.vertex(e,t,n),this.vertex(i,a,n)}triangle(e,t,i,a,n,o,s,h,r,l){this.check(e?ht.Filled:ht.Line,3),this.mesh.getVertices(),this.vertexIndex,h||(h=this.color),r||(r=this.color),l||(l=this.color),e?(this.vertex(t,i,h),this.vertex(a,n,r),this.vertex(o,s,l)):(this.vertex(t,i,h),this.vertex(a,n,r),this.vertex(a,n,h),this.vertex(o,s,r),this.vertex(o,s,h),this.vertex(t,i,r))}quad(e,t,i,a,n,o,s,h,r,l,c,f,u){this.check(e?ht.Filled:ht.Line,3),this.mesh.getVertices(),this.vertexIndex,l||(l=this.color),c||(c=this.color),f||(f=this.color),u||(u=this.color),e?(this.vertex(t,i,l),this.vertex(a,n,c),this.vertex(o,s,f),this.vertex(o,s,f),this.vertex(h,r,u),this.vertex(t,i,l)):(this.vertex(t,i,l),this.vertex(a,n,c),this.vertex(a,n,c),this.vertex(o,s,f),this.vertex(o,s,f),this.vertex(h,r,u),this.vertex(h,r,u),this.vertex(t,i,l))}rect(e,t,i,a,n,o){this.quad(e,t,i,t+a,i,t+a,i+n,t,i+n,o,o,o,o)}rectLine(e,t,i,a,n,o,s){this.check(e?ht.Filled:ht.Line,8),s||(s=this.color);let h=this.tmp.set(n-i,t-a);h.normalize(),o*=.5;let r=h.x*o,l=h.y*o;e?(this.vertex(t+r,i+l,s),this.vertex(t-r,i-l,s),this.vertex(a+r,n+l,s),this.vertex(a-r,n-l,s),this.vertex(a+r,n+l,s),this.vertex(t-r,i-l,s)):(this.vertex(t+r,i+l,s),this.vertex(t-r,i-l,s),this.vertex(a+r,n+l,s),this.vertex(a-r,n-l,s),this.vertex(a+r,n+l,s),this.vertex(t+r,i+l,s),this.vertex(a-r,n-l,s),this.vertex(t-r,i-l,s))}x(e,t,i){this.line(e-i,t-i,e+i,t+i),this.line(e-i,t+i,e+i,t-i)}polygon(e,t,i,a){if(i<3)throw new Error("Polygon must contain at least 3 vertices");this.check(ht.Line,i*2),a||(a=this.color),this.mesh.getVertices(),this.vertexIndex,t<<=1,i<<=1;let n=e[t],o=e[t+1],s=t+i;for(let h=t,r=t+i-2;h<r;h+=2){let l=e[h],c=e[h+1],f=0,u=0;h+2>=s?(f=n,u=o):(f=e[h+2],u=e[h+3]),this.vertex(l,c,a),this.vertex(f,u,a)}}circle(e,t,i,a,n,o=0){if(o==0&&(o=Math.max(1,6*q.cbrt(a)|0)),o<=0)throw new Error("segments must be > 0.");n||(n=this.color);let s=2*q.PI/o,h=Math.cos(s),r=Math.sin(s),l=a,c=0;if(e){this.check(ht.Filled,o*3+3),o--;for(let f=0;f<o;f++){this.vertex(t,i,n),this.vertex(t+l,i+c,n);let u=l;l=h*l-r*c,c=r*u+h*c,this.vertex(t+l,i+c,n)}this.vertex(t,i,n),this.vertex(t+l,i+c,n)}else{this.check(ht.Line,o*2+2);for(let f=0;f<o;f++){this.vertex(t+l,i+c,n);let u=l;l=h*l-r*c,c=r*u+h*c,this.vertex(t+l,i+c,n)}this.vertex(t+l,i+c,n)}l=a,c=0,this.vertex(t+l,i+c,n)}curve(e,t,i,a,n,o,s,h,r,l){this.check(ht.Line,r*2+2),l||(l=this.color);let c=1/r,f=c*c,u=c*c*c,g=3*c,p=3*f,v=6*f,b=6*u,w=e-i*2+n,_=t-a*2+o,y=(i-n)*3-e+s,k=(a-o)*3-t+h,C=e,A=t,E=(i-e)*g+w*p+y*u,M=(a-t)*g+_*p+k*u,B=w*v+y*b,F=_*v+k*b,Y=y*b,N=k*b;for(;r-- >0;)this.vertex(C,A,l),C+=E,A+=M,E+=B,M+=F,B+=Y,F+=N,this.vertex(C,A,l);this.vertex(C,A,l),this.vertex(s,h,l)}vertex(e,t,i){let a=this.vertexIndex,n=this.mesh.getVertices();n[a++]=e,n[a++]=t,n[a++]=i.r,n[a++]=i.g,n[a++]=i.b,n[a++]=i.a,this.vertexIndex=a}end(){if(!this.isDrawing)throw new Error("ShapeRenderer.begin() has not been called");this.flush();let e=this.context.gl;e.disable(e.BLEND),this.isDrawing=!1}flush(){if(this.vertexIndex!=0){if(!this.shader)throw new Error("No shader set.");this.mesh.setVerticesLength(this.vertexIndex),this.mesh.draw(this.shader,this.shapeType),this.vertexIndex=0}}check(e,t){if(!this.isDrawing)throw new Error("ShapeRenderer.begin() has not been called");if(this.shapeType==e)if(this.mesh.maxVertices()-this.mesh.numVertices()<t)this.flush();else return;else this.flush(),this.shapeType=e}dispose(){this.mesh.dispose()}}var ht;(function(d){d[d.Point=0]="Point",d[d.Line=1]="Line",d[d.Filled=4]="Filled"})(ht||(ht={}));const Oi=class Oi{constructor(e){m(this,"boneLineColor",new K(1,0,0,1));m(this,"boneOriginColor",new K(0,1,0,1));m(this,"attachmentLineColor",new K(0,0,1,.5));m(this,"triangleLineColor",new K(1,.64,0,.5));m(this,"pathColor",new K().setFromString("FF7F00"));m(this,"clipColor",new K(.8,0,0,2));m(this,"aabbColor",new K(0,1,0,.5));m(this,"drawBones",!0);m(this,"drawRegionAttachments",!0);m(this,"drawBoundingBoxes",!0);m(this,"drawMeshHull",!0);m(this,"drawMeshTriangles",!0);m(this,"drawPaths",!0);m(this,"drawSkeletonXY",!1);m(this,"drawClipping",!0);m(this,"premultipliedAlpha",!1);m(this,"scale",1);m(this,"boneWidth",2);m(this,"context");m(this,"bounds",new Jd);m(this,"temp",new Array);m(this,"vertices",j.newFloatArray(2*1024));this.context=e instanceof dt?e:new dt(e)}draw(e,t,i){let a=t.x,n=t.y,o=this.context.gl,s=this.premultipliedAlpha?o.ONE:o.SRC_ALPHA;e.setBlendMode(s,o.ONE,o.ONE_MINUS_SRC_ALPHA);let h=t.bones;if(this.drawBones){e.setColor(this.boneLineColor);for(let r=0,l=h.length;r<l;r++){let c=h[r];if(i&&i.indexOf(c.data.name)>-1||!c.parent)continue;let f=c.data.length*c.a+c.worldX,u=c.data.length*c.c+c.worldY;e.rectLine(!0,c.worldX,c.worldY,f,u,this.boneWidth*this.scale)}this.drawSkeletonXY&&e.x(a,n,4*this.scale)}if(this.drawRegionAttachments){e.setColor(this.attachmentLineColor);let r=t.slots;for(let l=0,c=r.length;l<c;l++){let f=r[l],u=f.getAttachment();if(u instanceof zi){let g=u,p=this.vertices;g.computeWorldVertices(f,p,0,2),e.line(p[0],p[1],p[2],p[3]),e.line(p[2],p[3],p[4],p[5]),e.line(p[4],p[5],p[6],p[7]),e.line(p[6],p[7],p[0],p[1])}}}if(this.drawMeshHull||this.drawMeshTriangles){let r=t.slots;for(let l=0,c=r.length;l<c;l++){let f=r[l];if(!f.bone.active)continue;let u=f.getAttachment();if(!(u instanceof hi))continue;let g=u,p=this.vertices;g.computeWorldVertices(f,0,g.worldVerticesLength,p,0,2);let v=g.triangles,b=g.hullLength;if(this.drawMeshTriangles){e.setColor(this.triangleLineColor);for(let w=0,_=v.length;w<_;w+=3){let y=v[w]*2,k=v[w+1]*2,C=v[w+2]*2;e.triangle(!1,p[y],p[y+1],p[k],p[k+1],p[C],p[C+1])}}if(this.drawMeshHull&&b>0){e.setColor(this.attachmentLineColor),b=(b>>1)*2;let w=p[b-2],_=p[b-1];for(let y=0,k=b;y<k;y+=2){let C=p[y],A=p[y+1];e.line(C,A,w,_),w=C,_=A}}}}if(this.drawBoundingBoxes){let r=this.bounds;r.update(t,!0),e.setColor(this.aabbColor),e.rect(!1,r.minX,r.minY,r.getWidth(),r.getHeight());let l=r.polygons,c=r.boundingBoxes;for(let f=0,u=l.length;f<u;f++){let g=l[f];e.setColor(c[f].color),e.polygon(g,0,g.length)}}if(this.drawPaths){let r=t.slots;for(let l=0,c=r.length;l<c;l++){let f=r[l];if(!f.bone.active)continue;let u=f.getAttachment();if(!(u instanceof pi))continue;let g=u,p=g.worldVerticesLength,v=this.temp=j.setArraySize(this.temp,p,0);g.computeWorldVertices(f,0,p,v,0,2);let b=this.pathColor,w=v[2],_=v[3],y=0,k=0;if(g.closed){e.setColor(b);let C=v[0],A=v[1],E=v[p-2],M=v[p-1];y=v[p-4],k=v[p-3],e.curve(w,_,C,A,E,M,y,k,32),e.setColor(Oi.LIGHT_GRAY),e.line(w,_,C,A),e.line(y,k,E,M)}p-=4;for(let C=4;C<p;C+=6){let A=v[C],E=v[C+1],M=v[C+2],B=v[C+3];y=v[C+4],k=v[C+5],e.setColor(b),e.curve(w,_,A,E,M,B,y,k,32),e.setColor(Oi.LIGHT_GRAY),e.line(w,_,A,E),e.line(y,k,M,B),w=y,_=k}}}if(this.drawBones){e.setColor(this.boneOriginColor);for(let r=0,l=h.length;r<l;r++){let c=h[r];i&&i.indexOf(c.data.name)>-1||e.circle(!0,c.worldX,c.worldY,3*this.scale,this.boneOriginColor,8)}}if(this.drawClipping){let r=t.slots;e.setColor(this.clipColor);for(let l=0,c=r.length;l<c;l++){let f=r[l];if(!f.bone.active)continue;let u=f.getAttachment();if(!(u instanceof ji))continue;let g=u,p=g.worldVerticesLength,v=this.temp=j.setArraySize(this.temp,p,0);g.computeWorldVertices(f,0,p,v,0,2);for(let b=0,w=v.length;b<w;b+=2){let _=v[b],y=v[b+1],k=v[(b+2)%v.length],C=v[(b+3)%v.length];e.line(_,y,k,C)}}}}dispose(){}};m(Oi,"LIGHT_GRAY",new K(192/255,192/255,192/255,1)),m(Oi,"GREEN",new K(0,1,0,1));let yn=Oi;class o1{constructor(e,t,i){m(this,"vertices");m(this,"numVertices");m(this,"numFloats");this.vertices=e,this.numVertices=t,this.numFloats=i}}const Fa=class Fa{constructor(e,t=!0){m(this,"premultipliedAlpha",!1);m(this,"tempColor",new K);m(this,"tempColor2",new K);m(this,"vertices");m(this,"vertexSize",8);m(this,"twoColorTint",!1);m(this,"renderable",new o1([],0,0));m(this,"clipper",new Ea);m(this,"temp",new Dt);m(this,"temp2",new Dt);m(this,"temp3",new K);m(this,"temp4",new K);this.twoColorTint=t,t&&(this.vertexSize+=4),this.vertices=j.newFloatArray(this.vertexSize*1024)}draw(e,t,i=-1,a=-1,n=null){let o=this.clipper,s=this.premultipliedAlpha,h=this.twoColorTint,r=null,l=this.renderable,c,f,u=t.drawOrder,g,p=t.color,v=h?12:8,b=!1;i==-1&&(b=!0);for(let w=0,_=u.length;w<_;w++){let y=o.isClipping()?2:v,k=u[w];if(!k.bone.active){o.clipEndWithSlot(k);continue}if(i>=0&&i==k.data.index&&(b=!0),!b){o.clipEndWithSlot(k);continue}a>=0&&a==k.data.index&&(b=!1);let C=k.getAttachment(),A;if(C instanceof zi){let E=C;l.vertices=this.vertices,l.numVertices=4,l.numFloats=y<<2,E.computeWorldVertices(k,l.vertices,0,y),f=Fa.QUAD_TRIANGLES,c=E.uvs,A=E.region.texture,g=E.color}else if(C instanceof hi){let E=C;l.vertices=this.vertices,l.numVertices=E.worldVerticesLength>>1,l.numFloats=l.numVertices*y,l.numFloats>l.vertices.length&&(l.vertices=this.vertices=j.newFloatArray(l.numFloats)),E.computeWorldVertices(k,0,E.worldVerticesLength,l.vertices,0,y),f=E.triangles,A=E.region.texture,c=E.uvs,g=E.color}else if(C instanceof ji){let E=C;o.clipStart(k,E);continue}else{o.clipEndWithSlot(k);continue}if(A){let E=k.color,M=this.tempColor;M.r=p.r*E.r*g.r,M.g=p.g*E.g*g.g,M.b=p.b*E.b*g.b,M.a=p.a*E.a*g.a,s&&(M.r*=M.a,M.g*=M.a,M.b*=M.a);let B=this.tempColor2;k.darkColor?(s?(B.r=k.darkColor.r*M.a,B.g=k.darkColor.g*M.a,B.b=k.darkColor.b*M.a):B.setFromColor(k.darkColor),B.a=s?1:0):B.set(0,0,0,1);let F=k.data.blendMode;if(F!=r&&(r=F,e.setBlendMode(r,s)),o.isClipping()){o.clipTriangles(l.vertices,f,f.length,c,M,B,h);let Y=new Float32Array(o.clippedVertices),N=o.clippedTriangles;n&&n(Y,Y.length,v),e.draw(A,Y,N)}else{let Y=l.vertices;if(h)for(let I=2,O=0,D=l.numFloats;I<D;I+=v,O+=2)Y[I]=M.r,Y[I+1]=M.g,Y[I+2]=M.b,Y[I+3]=M.a,Y[I+4]=c[O],Y[I+5]=c[O+1],Y[I+6]=B.r,Y[I+7]=B.g,Y[I+8]=B.b,Y[I+9]=B.a;else for(let I=2,O=0,D=l.numFloats;I<D;I+=v,O+=2)Y[I]=M.r,Y[I+1]=M.g,Y[I+2]=M.b,Y[I+3]=M.a,Y[I+4]=c[O],Y[I+5]=c[O+1];let N=l.vertices.subarray(0,l.numFloats);n&&n(l.vertices,l.numFloats,v),e.draw(A,N,f)}}o.clipEndWithSlot(k)}o.clipEnd()}getSkeletonClipping(){return this.clipper}};m(Fa,"QUAD_TRIANGLES",[0,1,2,2,3,0]);let wn=Fa;const T=[0,0,1,1,1,1,0,0,0,0,1,1,1,1,0,0,0,0,1,1,1,1,0,0,0,0,1,1,1,1,0,0],ua=[0,1,2,2,3,0],ma=new K(1,1,1,1);class l1{constructor(e,t,i=!0){m(this,"context");m(this,"canvas");m(this,"camera");m(this,"batcher");m(this,"twoColorTint",!1);m(this,"batcherShader");m(this,"shapes");m(this,"shapesShader");m(this,"activeRenderer",null);m(this,"skeletonRenderer");m(this,"skeletonDebugRenderer");this.canvas=e,this.context=t instanceof dt?t:new dt(t),this.twoColorTint=i,this.camera=new a1(e.width,e.height),this.batcherShader=i?Tt.newTwoColoredTextured(this.context):Tt.newColoredTextured(this.context),this.batcher=new Ma(this.context,i),this.shapesShader=Tt.newColored(this.context),this.shapes=new fs(this.context),this.skeletonRenderer=new wn(this.context,i),this.skeletonDebugRenderer=new yn(this.context)}dispose(){this.batcher.dispose(),this.batcherShader.dispose(),this.shapes.dispose(),this.shapesShader.dispose(),this.skeletonDebugRenderer.dispose()}begin(){this.camera.update(),this.enableRenderer(this.batcher)}drawSkeleton(e,t=!1,i=-1,a=-1,n=null){this.enableRenderer(this.batcher),this.skeletonRenderer.premultipliedAlpha=t,this.skeletonRenderer.draw(this.batcher,e,i,a,n)}drawSkeletonDebug(e,t=!1,i){this.enableRenderer(this.shapes),this.skeletonDebugRenderer.premultipliedAlpha=t,this.skeletonDebugRenderer.draw(this.shapes,e,i)}drawTexture(e,t,i,a,n,o){this.enableRenderer(this.batcher),o||(o=ma);var s=0;T[s++]=t,T[s++]=i,T[s++]=o.r,T[s++]=o.g,T[s++]=o.b,T[s++]=o.a,T[s++]=0,T[s++]=1,this.twoColorTint&&(T[s++]=0,T[s++]=0,T[s++]=0,T[s++]=0),T[s++]=t+a,T[s++]=i,T[s++]=o.r,T[s++]=o.g,T[s++]=o.b,T[s++]=o.a,T[s++]=1,T[s++]=1,this.twoColorTint&&(T[s++]=0,T[s++]=0,T[s++]=0,T[s++]=0),T[s++]=t+a,T[s++]=i+n,T[s++]=o.r,T[s++]=o.g,T[s++]=o.b,T[s++]=o.a,T[s++]=1,T[s++]=0,this.twoColorTint&&(T[s++]=0,T[s++]=0,T[s++]=0,T[s++]=0),T[s++]=t,T[s++]=i+n,T[s++]=o.r,T[s++]=o.g,T[s++]=o.b,T[s++]=o.a,T[s++]=0,T[s++]=0,this.twoColorTint&&(T[s++]=0,T[s++]=0,T[s++]=0,T[s]=0),this.batcher.draw(e,T,ua)}drawTextureUV(e,t,i,a,n,o,s,h,r,l){this.enableRenderer(this.batcher),l||(l=ma);var c=0;T[c++]=t,T[c++]=i,T[c++]=l.r,T[c++]=l.g,T[c++]=l.b,T[c++]=l.a,T[c++]=o,T[c++]=s,this.twoColorTint&&(T[c++]=0,T[c++]=0,T[c++]=0,T[c++]=0),T[c++]=t+a,T[c++]=i,T[c++]=l.r,T[c++]=l.g,T[c++]=l.b,T[c++]=l.a,T[c++]=h,T[c++]=s,this.twoColorTint&&(T[c++]=0,T[c++]=0,T[c++]=0,T[c++]=0),T[c++]=t+a,T[c++]=i+n,T[c++]=l.r,T[c++]=l.g,T[c++]=l.b,T[c++]=l.a,T[c++]=h,T[c++]=r,this.twoColorTint&&(T[c++]=0,T[c++]=0,T[c++]=0,T[c++]=0),T[c++]=t,T[c++]=i+n,T[c++]=l.r,T[c++]=l.g,T[c++]=l.b,T[c++]=l.a,T[c++]=o,T[c++]=r,this.twoColorTint&&(T[c++]=0,T[c++]=0,T[c++]=0,T[c]=0),this.batcher.draw(e,T,ua)}drawTextureRotated(e,t,i,a,n,o,s,h,r){this.enableRenderer(this.batcher),r||(r=ma);let l=t+o,c=i+s,f=-o,u=-s,g=a-o,p=n-s,v=f,b=u,w=f,_=p,y=g,k=p,C=g,A=u,E=0,M=0,B=0,F=0,Y=0,N=0,I=0,O=0;if(h!=0){let te=q.cosDeg(h),be=q.sinDeg(h);E=te*v-be*b,M=be*v+te*b,I=te*w-be*_,O=be*w+te*_,Y=te*y-be*k,N=be*y+te*k,B=Y+(E-I),F=N+(M-O)}else E=v,M=b,I=w,O=_,Y=y,N=k,B=C,F=A;E+=l,M+=c,B+=l,F+=c,Y+=l,N+=c,I+=l,O+=c;var D=0;T[D++]=E,T[D++]=M,T[D++]=r.r,T[D++]=r.g,T[D++]=r.b,T[D++]=r.a,T[D++]=0,T[D++]=1,this.twoColorTint&&(T[D++]=0,T[D++]=0,T[D++]=0,T[D++]=0),T[D++]=B,T[D++]=F,T[D++]=r.r,T[D++]=r.g,T[D++]=r.b,T[D++]=r.a,T[D++]=1,T[D++]=1,this.twoColorTint&&(T[D++]=0,T[D++]=0,T[D++]=0,T[D++]=0),T[D++]=Y,T[D++]=N,T[D++]=r.r,T[D++]=r.g,T[D++]=r.b,T[D++]=r.a,T[D++]=1,T[D++]=0,this.twoColorTint&&(T[D++]=0,T[D++]=0,T[D++]=0,T[D++]=0),T[D++]=I,T[D++]=O,T[D++]=r.r,T[D++]=r.g,T[D++]=r.b,T[D++]=r.a,T[D++]=0,T[D++]=0,this.twoColorTint&&(T[D++]=0,T[D++]=0,T[D++]=0,T[D]=0),this.batcher.draw(e,T,ua)}drawRegion(e,t,i,a,n,o){this.enableRenderer(this.batcher),o||(o=ma);var s=0;T[s++]=t,T[s++]=i,T[s++]=o.r,T[s++]=o.g,T[s++]=o.b,T[s++]=o.a,T[s++]=e.u,T[s++]=e.v2,this.twoColorTint&&(T[s++]=0,T[s++]=0,T[s++]=0,T[s++]=0),T[s++]=t+a,T[s++]=i,T[s++]=o.r,T[s++]=o.g,T[s++]=o.b,T[s++]=o.a,T[s++]=e.u2,T[s++]=e.v2,this.twoColorTint&&(T[s++]=0,T[s++]=0,T[s++]=0,T[s++]=0),T[s++]=t+a,T[s++]=i+n,T[s++]=o.r,T[s++]=o.g,T[s++]=o.b,T[s++]=o.a,T[s++]=e.u2,T[s++]=e.v,this.twoColorTint&&(T[s++]=0,T[s++]=0,T[s++]=0,T[s++]=0),T[s++]=t,T[s++]=i+n,T[s++]=o.r,T[s++]=o.g,T[s++]=o.b,T[s++]=o.a,T[s++]=e.u,T[s++]=e.v,this.twoColorTint&&(T[s++]=0,T[s++]=0,T[s++]=0,T[s]=0),this.batcher.draw(e.page.texture,T,ua)}line(e,t,i,a,n,o){this.enableRenderer(this.shapes),this.shapes.line(e,t,i,a,n)}triangle(e,t,i,a,n,o,s,h,r,l){this.enableRenderer(this.shapes),this.shapes.triangle(e,t,i,a,n,o,s,h,r,l)}quad(e,t,i,a,n,o,s,h,r,l,c,f,u){this.enableRenderer(this.shapes),this.shapes.quad(e,t,i,a,n,o,s,h,r,l,c,f,u)}rect(e,t,i,a,n,o){this.enableRenderer(this.shapes),this.shapes.rect(e,t,i,a,n,o)}rectLine(e,t,i,a,n,o,s){this.enableRenderer(this.shapes),this.shapes.rectLine(e,t,i,a,n,o,s)}polygon(e,t,i,a){this.enableRenderer(this.shapes),this.shapes.polygon(e,t,i,a)}circle(e,t,i,a,n,o=0){this.enableRenderer(this.shapes),this.shapes.circle(e,t,i,a,n,o)}curve(e,t,i,a,n,o,s,h,r,l){this.enableRenderer(this.shapes),this.shapes.curve(e,t,i,a,n,o,s,h,r,l)}end(){this.activeRenderer===this.batcher?this.batcher.end():this.activeRenderer===this.shapes&&this.shapes.end(),this.activeRenderer=null}resize(e){let t=this.canvas;var i=window.devicePixelRatio||1,a=Math.round(t.clientWidth*i),n=Math.round(t.clientHeight*i);if((t.width!=a||t.height!=n)&&(t.width=a,t.height=n),this.context.gl.viewport(0,0,t.width,t.height),e===qi.Expand)this.camera.setViewport(a,n);else if(e===qi.Fit){let o=t.width,s=t.height,h=this.camera.viewportWidth,r=this.camera.viewportHeight,l=r/h,c=s/o,f=l<c?h/o:r/s;this.camera.setViewport(o*f,s*f)}this.camera.update()}enableRenderer(e){this.activeRenderer!==e&&(this.end(),e instanceof Ma?(this.batcherShader.bind(),this.batcherShader.setUniform4x4f(Tt.MVP_MATRIX,this.camera.projectionView.values),this.batcherShader.setUniformi("u_texture",0),this.batcher.begin(this.batcherShader),this.activeRenderer=this.batcher):e instanceof fs?(this.shapesShader.bind(),this.shapesShader.setUniform4x4f(Tt.MVP_MATRIX,this.camera.projectionView.values),this.shapes.begin(this.shapesShader),this.activeRenderer=this.shapes):this.activeRenderer=this.skeletonDebugRenderer)}}var qi;(function(d){d[d.Stretch=0]="Stretch",d[d.Expand=1]="Expand",d[d.Fit=2]="Fit"})(qi||(qi={}));let Qi,Si,gs=0;const c1=1,en=1,ps=165,vs=108,ui=163;class h1{constructor(e){m(this,"renderer");m(this,"logo",null);m(this,"spinner",null);m(this,"angle",0);m(this,"fadeOut",0);m(this,"fadeIn",0);m(this,"timeKeeper",new sr);m(this,"backgroundColor",new K(.135,.135,.135,1));m(this,"tempColor",new K);if(this.renderer=e,this.timeKeeper.maxDelta=9,!Si){let t=navigator.userAgent.indexOf("Safari")>-1,i=()=>gs++;Si=new Image,Si.src=u1,t||(Si.crossOrigin="anonymous"),Si.onload=i,Qi=new Image,Qi.src=d1,t||(Qi.crossOrigin="anonymous"),Qi.onload=i}}dispose(){var e,t;(e=this.logo)==null||e.dispose(),(t=this.spinner)==null||t.dispose()}draw(e=!1){if(gs<2||e&&this.fadeOut>en)return;this.timeKeeper.update();let t=Math.abs(Math.sin(this.timeKeeper.totalTime+.25));this.angle-=this.timeKeeper.delta*200*(1+1.5*Math.pow(t,5));let i=this.tempColor,a=this.renderer,n=a.canvas,o=a.context.gl;if(a.resize(qi.Expand),a.camera.position.set(n.width/2,n.height/2,0),a.batcher.setBlendMode(sa.Normal,!0),e){if(this.fadeOut+=this.timeKeeper.delta*(this.timeKeeper.totalTime<1?2:1),this.fadeOut>en)return;i.setFromColor(this.backgroundColor),t=1-this.fadeOut/en,t=1-(t-1)*(t-1),i.a*=t,i.a>0&&(a.camera.zoom=1,a.begin(),a.quad(!0,0,0,n.width,0,n.width,n.height,0,n.height,i,i,i,i),a.end())}else this.fadeIn+=this.timeKeeper.delta,this.backgroundColor.a>0&&(o.clearColor(this.backgroundColor.r,this.backgroundColor.g,this.backgroundColor.b,this.backgroundColor.a),o.clear(o.COLOR_BUFFER_BIT)),t=1;t*=Math.min(this.fadeIn/c1,1),i.set(t,t,t,t),this.logo||(this.logo=new ra(a.context,Si),this.spinner=new ra(a.context,Qi)),a.camera.zoom=Math.max(1,ui/n.height),a.begin(),a.drawTexture(this.logo,(n.width-ps)/2,(n.height-vs)/2,ps,vs,i),this.spinner&&a.drawTextureRotated(this.spinner,(n.width-ui)/2,(n.height-ui)/2,ui,ui,ui/2,ui/2,this.angle,i),a.end()}}let d1="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAKMAAACjCAYAAADmbK6AAAALKElEQVR42u2de2iW5R/GPzuqcwfnnKfNmafl5tTNHWzqNi3DEMQykcAoJSsySkspjSIk0iD/07Kf4R+FnVBDUTshZGpWUEJaaiWFgZlUFmXmIe3HNXthyebeZ77P9H13ffBG8Y8H7ut7vff93N/7fu4vGGPiFZiez/Qtw9lytJajfzfw9z/j+efPOv7cV8W+lUNY2a8T/ayTCRsWFLJA5rtUO1LLkV5p9LJeJizQiHeqnlOtmVFtdTGrrZkJCxYXsTgaI6r9MY4/UpNItW4mFDaXsTlaM6qVZlBq3UwofFrJp0HMWJ9DvXUzobCznJ1BzFjWlTLrZkJh/TDWBzFjTgo51s2EgnKI0Rrx+FiOWzNzVaym91Syx5qZsGBWb2ZFa0ZN6dbMhAWTcpkUrRmXD2K5NTNhgVbH0Zpxbl/mWjMTFvRIo0e0ZpzcncnWzISKtvmiMWNRJ4qslwmVXRXsas2Ix8ZwzFqZsGFREYtaM+Oaa1ljrUzYkJ9G/ok6TlzKjJWZVFor0y7c1Zu7WjLiqiGsskamXdHopyT4vALmzS9k/t19uHtKHlOSIMn6xAtARjIZ1sFcUSZ0Y4La+G6M18hS2IlCn4a+WoC0JNL0d/dUupdnUj40g6EJ2VEdMnhrOG/p5f/jUXz8SgmvaGU6KpNRNsLVQV0OdXf24s63h/P2gWoOrBjMCr2GJFQnnxnIM3q5P1PPmaYv+4ev4/C6UtbpV2gzXCkgL5W8Bwt48OIc6ul6Tp+s4+SyASxLiI4+PYCn1bHzDZxvaQW6vZzto7MYnQIpNkf7kp5EuozYUroqEjcNKHHd0Tl9mBPN1pk+hFeieGBnBtog7UXjsj9pWg+m6duecw2cay1OC/uxMC47KmP9OIYfoz1YoC20J/rzRG4quTZK2EAyJGs20qwUbYw0aNRmUxtvfUW/uEtNzc1NB1/X8LVyd15hh82F43AvD+VlXcsSJEZa1CQ3ejleAO7oxR3RDP0XN91X4+NXYb8nkv7UNTwV7e0YTdu7I3g33t7tuaEbNwSZpps2fSyvs4M2Tjhot+jb0Xzbltj8r5j/xVt/6Z1Ob93U1ZYO691EhhzchcHeXosVjcNZysyezLw4xRZt05R+fTeuj8vOj+zKyG0j2aZcVVs6v+QalnjrMFZASQYl2nBoSyz06e3j/Xk8rgWYmMvEICu2pm1HOTuc7okV8FgRj0XukwzanhvCc/F+72TjoQjdObN1OFuDLmh0xP+WHtxiI10ukJlCprb4guiv1fP+avZrS1C7NAkliHZjDtZwMMgqbukAltpMlwuMy2FcEBPqvfLLar5Uqi0hBdEwryy+Mv5n6zkbjTBa+dlMlwvUZFETZKGiFM7tvbhdJ3gSVRO0wzIjnxmvl/J6a6JsGMYGrahtpssFeqbR841S3mhN80OjOaSDEdqd6SjaMKgzgzRK7q1ib3PT9sYyNo7JZoyNFNvRcVMZmy7WOvIuryv/Zvdmdt90+nY0bRp3AvROohFwdwW7dTG7RFlbwlqdrbOBYg005NAQmZU0HWt1rXMBH1Xw0dQ8pmqzoaPmdhun7bHZjNVe9qP9eFQfO1VkUmHjhAVUZ1GtnKFSbjrkrPfy4i4UW5t/6ZxM54J0CqxFe81KpGsQyE4h23oYY4wxxhhjjDHGGGOMMcYYY4wxxhhjjDHGGGOMMcYYY4wxxhhjjDHGGGOMMcYYY4wxxhhjjLna+bdOy+IiFquIpGq16Pb79cNYv3IIK/X/ugx+Ui6TVKvYVU9Nc8gX8od8Ir/IN/KPfCQ/yVfyl/6/pfJvLChkQdD6wyqntquCXYuKWJSfRr6D0dEAxV3xlw/khyD+kd/ku/88cHo+09tS3LBpO1HHCVUqcIA6CqB4K+6X6x35L/JM2loXurlWmUmlA5XogOIcK8/If5HncrSWo7F6cKIWPjT/RXGOlWfkv8hzaWsN4uaaysE6WIkOKM6x8oz8F3kusXqo2vxC5jtYiQ4ozrH0TeS5qIZcrB7qkrwdA8U5Vp6R/yLPZV8V+2L14Cl5THGwEh1QnGPlGfkv8lyUlIzFQ1cNYVVHrcjZ0VCcFe9Y+Eb+izy3ceclUl43aFN52DXXssYpnY6a4qFS8ZcP2uIf+e7inRh6pdFrdTGrm8uiHx/L8T2V7NGWzvJBLJ/bl7mTuzO5qBNFDoiJID/IF/KHfCK/yDfyT3O7d/KbfNfS80hNIrU0g9L6HOq1x5iTQo6FNpeLfCQ/yVfyl3xmXYwxxhhjjDHGGGOMMcYYY4wxxhhjjDHGGGOMMcYYY4wxxhhjjDHGGGOMMcYYY4wxxhhjjDHNk9z4JwJ0SqKTdQkbyEwhU393T6V7zzR6pieR3tE1ITeVXImhe6BXDGZFdRbVeank2TBhcaEMr0rwbixj49IBLL2/L/ffmMuNHfqO9tFZjJYBd1ewO3Lx+IcVfKhqna5nHZYR6XFPH+5R3eeI5t9fx/fvjeC9Jdew5OKZKqFR/RDVKL6vL/f9PJafmyvHsL+a/ff24V6NmjZQbGchVbY6UM2BluqHv1rCqzVZ1KQlkZboepCdQvacPsz5bjTfXao+yMEaDt7Wk9tSIMVGig3TejCtJSM2bSpkPjWPqd1S6Zao+lORSYWmgkOjORRNwZqd5ezMSiHLRooNr5XwWjS6/1XHX9vL2T67N7M1iyXa9JCrYjVrS1gbpJyw6hBfsmiNCYT0P9/A+Wj1/6qGr5YNYFlJBiWJogEzezLz/ZG8/9s4fgtSyuvNYbyp1IONFBtu7sHNv4/j9yAxUHWrdaWsG9+N8XHd+YxkMpSy+aySz841cC5oXbmHCnnI74yxAgZ3YbDeB4PEQCOpBpFNZWwa2ZWRcdnxLsl00crtRB0n2lLg8JNRfDKoM4NsolgBSmw/UMADba1+qpmqfyf6x1u/0a/og3I+aEunP6/i86osqmygcGarF4p54dex/Bo0LqfqOfVwIQ/HW5/RSkwV1oN2WLlHTc82TljAwM4M1O5LWwYKZTjibYXNS0N5KcjKTe10PadfLObFuJwK4ozp+UzXDBTUjL+M5ZcBnRkQV53dMIwNQTu6bSTbVEzbi5awuVByd2E/FgaN0Tc1fKOzBHHV2aAdVSdv6s5NNkp7cSH/++xAng2yyHx+CM/H21YhfdPp+0U1X0TbSZnXx8faG9Aop0MS0cToh1p+iLcpOkLj9t/JOk5eqoPHxnDsyf486an5yqCDK7XZ1O4oZ4dWyy3FSXHUAYq47uyYbMZoGmhpG3DlEFb6uNiVBhpyaHhnBO8oJmfqOROJjzIiP43hJ8UxITqqX56S2Hur2KsOnq3nrE6PPNKPRwrSKbAZrjTQNZmuE7oxYXMZmxWbw9dxWFu4W4ezVedOE6qzI7oyYkY+M7TPeWsPbk2UX1qioSN+E3OZqOR2cReKE+qQRFN0Pi7y73g/UawU1KzezJpXwLz5hczX1ueUPKYkNb6GJQZ+j7/aAfRZREsv+quGsMoamXZBW2Gt5eU0alorEzYsKmJRa/m4NdeyxlqZsCGa84DKnVorEzboC7podis69DfIJmwufHMc7famvvmxZiYsKOtKWbRm1OcW1syEBboSJFozLh/EcmtmwgIluaM14/phrLdmJixYXMTiaM24p5I91syEBTphFOR7Y2tmwgJNvUFOr+tov3UzoaAv44KYUatv62ZCoemdhtG0+hzqrZsJBR08DWLG0gxKrZu50qvpxos3U5NItW4mFPp1ot+lPlpq2lYXs9qamVBZUMiC1ox4pJYjvlfStAu6GmTLcLboMtPIV4/6im5fFfuUi9QIap2MiWP+D96R1vPmsD/fAAAAAElFTkSuQmCC",u1="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAKUAAABsCAYAAAALzHKmAAAQ7klEQVR42u3da4xdVRUA4D0zd2Y6nZY59DVtZ1puS9+lzC0YAi2UQ8AAQczFpPgA9VIeIQbirRqJ0cBUBVGjDr/QCKSNRSMmpuODxAdxqhgwxkhFjf6Sxh/+UUNVNGJCzR7uTvas7LXX2q9zzp3em6y0gTN3Zu75utZe5+yztxC9V+/Ve5X9En1Vjd7J6SFbLNF7naPw+l2jh7YHMBWssqMHtlsRdim4qsLtIawaPiHEQOLoNrA9iIkQDnRrVA1qD2LZ8ISoxYqKo13sQAtBWBayQWZUAXGRQM9JjCngDVY0UqJNDbQrMcaGmArdUKpIjbYiQLsCZCyIMQBy8QwnilR4Q5AuCpxFYvRFmBLbEiwKwpsSaWycVQGZBKMrwBjA9BhxDe57u2L2hOoKNCbOrgAZitEVYUxoKSMErQvSxYIzCkguRg5EF4AUhqUlhy/YUKSxcRaKsioYOQhD4I0yYxkR3PcJBcuFysmgsXAWBTMJyBCMIQh9kGGxXIXvexCQXbHGAMrBWTbM2CCpMSMLIxehC77lSJwXGth7M0FzoVJIXXDWQnGmhOkL0ic7YhhtWdGGkAuPAjUWGoF4faCmwBkbZmyUqUCyMqMLRA4+E6IsdTjidUHKBYrh9CnpRcH0ypKxsyOGEYNIIeTCOz91OIJ1QYoB5eAMyZo+MFNnyVTZ0YiRC9EGEMOyAgshxErHsL2XK1gOUgwohtM1a5YNM7Rsu4K0ZkcbRm4mpPBRwFZ5hg9eCqkrUB+csWGGogzNkqEgrdnRhpGLkINudaLgwvVB6oqzCjCTZElb2Y4B0gUjBtEG0ARnDRLjjoG9DwcshtQGlIPTljVjwUySLWNkyRCQVHa0ZUUTRAwgF91a33BEy0VKAcVwwqwZC2bqbOlUurllOxQkJzNyINoAYqjWhYYjWg5SCiiG05Q1U8FMjTIoS8YE6YORi1BHtJ4KIcQEEtTXUWAxpK44YVlPBdO1jCdFWTZIE8bVGEYMIRPcZGBw4HKQcoBiOE1ZMzbMgVQwU6JMAdKEEcuIJogUvg1YCCE2gsCO42DlIIVAKZwpYJaSLVNnSU6XjYHUmxhTmXaFaMO3EYkLqMC+FsLlIoVAKZzMrEnBhJeLfLNlKMrYWRIDCbOkFSSVHbHM6AKRC6/ODUewNqQ+OLlZkxpjUmV8MBbMUJSxyzY3Q1IgTRgxiBRCHdem0KDAUkBh9sRwwjEnAXMMgTnKhFlUtiwkS5rGka4g9SaGgxFmRC7AzTCEEBcyA36dDSsXqAtOLkysjGMwY5XxVChjZ0kuSCo7YlkRQsQQYtDEFsegsLoCxUp7Kpgps2UslFGzJGccSYHUmxhOZqwzEZqAbfUMCisHKIZzgsCpl3MTzMwTpi1bYp2477gyFKUxS7qWbdjY2EBS2dGE0QQRA7gNCyHEdhjE8RhUDlBT9tzgmjWZMFNlSy+Urk1OzCyJlW0XkK4YOQh1cDtcgwBrQmoDWkdgboBZE8mYsJSHlnFbJ+5bwmOPJ7lZkirbC8aRsMvmgtTHjBhGE0QbwJ2egUE1ITVlUC5OmDVdYNrKuN70xM6WoShjlW4464dbtiFIWK6x7GjESEHUUe0iYncnbMdQSE0Z1ITTNOb0hRmjjLtmS9dmJ2rp1jtuKktyyrb6YLEMCUHq2dGG0QQRQ7f72kzc+cJecerne8Wvv7JNPHPvenEkz8Sh3UtFc92QyGt9Yko/HgOLAIUZlItTz5ouMF3KuE+2jFLCQ1D6lm6fLMkBacuOJowYRBUXyfjuHjF3NhdnsfjvAfH6E9vFt9XxKgikEKgJZyyYalzOLeMu2bLbULI6bh+QGwmQ+rgRlumdGEQAao+K56bEL2woVUwOiev0r8OAUjiJrMmFCbvykGxZRAmPitK1dHM7bohyMsuyi/I8f0+e57fJYIKEZXpXo9E4mOf5XTKyLLvCBLETF8uY2SKepkC+dpX4T02Ivepr4HvZcOZ5fmee54fyPL+DmTUhzAs6n4n8bN5dr9f3YdkSg8nsxG0lPBVKVpNjG0/aGhzfLDmRZdnumZmZp8+c+cdZPV555fSr7Xb7s0jJ3i5Pcue4MxKkPPkvvXTqz/B92u32l0wYOzG1fkhcd/py8Rcbyq/vFM/KY1WA95h/3zzP71bfU6JsNpsfgj+P/FlbrdaDGExYyuXvLz8H+DudODH700ajcSM3W6Yu4alQ1spCOTd38jcKocTZbh9+9NixY99XJ8AEUkcpo9W64yH197m5k7+bnZ19QT+J09NHntQhwji/Jg58qi6++ofLxJ8gSFneVw2Ka4QQDfh1Ok4dZavVmtZ/nrm5k7/Vf55O1tRhboUw5+ZOvqyOl5+R/FyOHj32PYVU/tloNG5IXcKrhJIzngwp3fNjomazea/64BuNxts646f50lWv169utw9/DmtqdJQyZFaSJVuV6nq9fqMEof5/vV6/CYBqgJDlee+yAbF/+4i4ZWqZeNfaIfHWzn+Hx0KcEuU9+s8jv3ej0bhVlXOZydX/k0iRMeb8P0D5e6tj8zy/Xb9UJIc56h/yqVOnXul8lmuZ2bJslKmbHG7XrbpCmCXFRLvdfqQD6jTS3Jiy5I4OykM6ADV+1Eu1DmV6evopBORexzDi1L+X/HnGxsb2w3Hm9PSRJ9QxWPOTZdmlKht2hi+w6dkox5bqffI8fye3hDteGqKaHVsHXihKl0tB+h0cY+lute54AGRKDCW89LNTRynHb7ChUWVVjetOnJh9EYBUyPZeNCoOtsbFQwdXi4/esELcd+tq8cCHJ8UXp+viy9efLz7AgamjlKXc1AA1m83DoIRDlFubzeb96hhZLVTlgJ24gttutx+ONa50bHZKRenaeTs1OfpAfnr6yOOdE7EZdNwmlKocntXLNkA5JTGq47Ds+Lf94lWsyfnXleLfnIwJUN4DOnNYwuUxh2A3Ln9XULrfK8t3J27Tu3BVwiOjXJqoAy8UZej1yclGo3GTLN+gu3w+z/P3YaWbQqk3Ne12e4ZC+c8rxWsYytcPiP9RpZxCqWDKnxOiBNlyAUpOnGsoh4tA2Rm8X9xqtT6md5wyZmYe+0YRKL+1S/wYQ3n8zctBl5SBUv5djivfjMOPduIzcizeiYfr9foVvUwZG+XCuzibZKnSceZ5/v4QlKp8y7ElhnJlTeTP7BI/kllRYfzrfvHqFy4UX1vaL/aVlSmROzwbwdS29T2UcEwZF+V8ozM2lu1VY812u/15akypGh3TmFJesJbHHD167IdUxz3YJy5bNySuX1mbvy55CbMLtzU6tjGlsdFptVqfUMc0Go23F4wy1l2dSnbfvpMwVPe9WWVLDsrOJaF9MFu2Wq1PqmNkGce67xiXhTjdNwdlvV6/BgxfbPfBfVCetxi6b9/rlCup65QzM48dl2OjLMv26CibzeZ96sTIzEFdpwQXz9U1yrtVlpR/Zll2Fec65Y6l4pbbx8XHH9kknvzJlPjlHy8Tp29eKT5ou0aJoIT3w3dBlLDzVpfAJEZ1XOdaJZxnOSlvPMjPzxFljIvng914RwebsjYO7uhMyHu46sOfnf3Oz2TXDW6vvYxdFoIXz3Wc8J5zs9n8iOn2IrxTc2BM3Glqdp7dI553uaOjxrhwcob+MyuUpjs6WZZdon8OcigjPx8V+u+GTWFTSWEx3WYcdJ225jNDSE4q0GHCzlueHOyujn6bUWYgeb9ZZUaQPe+GzQ+Gc8+oOGhC+c1d4gfI16n3XDAhQ7+9qE9l01E2Go132GYKyXE1NiFDTcpoNpv3LOYJGWXNErJNW9sEp63p2RKiVPMn1bS1DgxsyhoGdGpmizj+xtXiDYnx7/vFmce3iWdW1cTVGEY4hQ2ZW0nNq8Qm/M6XbXm3S100lwGedFybuvNOibLI+ZS2ceU4eAxiEuvCkfmU8ycToDxETe6FgCBQHeqyAbFvfEhcO7BwDuXFCEbTZF840XeHK0jYcbs2OIGle0mVJ/mmnClEPQqxyTY5I8/zFhif7fSZee4bnrPOU4AssnRXHaVTCTd14dRDY3UbTIiSeFhsN/aMjgnqthFx880rxX3yATL5p3y4LPXzOaBkUyBjZMlYpbtQlIOBD475ZEusjMNSvkXe6VEoJVDkeZ2dzIfIFsRzU+JF2OyM9M9fTC/6SUYOyFQPjQ2nWiUjxnPfw5EeHqMWIqAeIFsAU847lJM2JM6xsewt1OIDLs99P7ZFHNdB/upS8XtPiD7PfLuCXJNolYyyFiNI/Zit65ItrOVafFbHcFohY7hPTN21Tjz4uc3iqfsnxKdX1MTl1OoYRFaMsToGB6Trw2JFP/OdZC2hJZ7ZkrMoAbbSGmelDJ91hFKuJeS7jlBMkJnrAqqJlgMUZS/dArPlGHNdSg5M3xXXtvquuEatvIYtDRhpxbUJuIgqsU5lGWtUploK0KuEU9mSW8YpmFQ556xNuYW7NiW13B+FkMiKHIy+C6eGgBxJvMR0oSv5hi6+z4HJyZoU0M2RVvDlrOQbcxVfX5AhZbuqy0v7ZstYMLHlAVlLTF9ALLbvu9Y5Zylpn/XOsd0ibIvxr2KCLHpp6SCUIdnSZSF+WzfOhem6GD+1KwR3Z4jNjrtDpNoZwmWd8yrupZN6Hx3fbMmFSe0Swdq2ZIPjxk1112Duo8OBGLrBkw/IoncdK2XHsdC9dHz204m50xh3tzFq1zFqtzHXrfCw7OgDsqyNnZLszVijsmXgrmNcmGtS78lIoMX2aJz03fKO2sDJddPQSCDPiQ1DfWBycY6XtXstc2PQKuxgG2McmXTPb9/9vmuJYXKyJrWjbeg+3xPM4O73nWqvbyw7xgZZSJbEUBa157cNJjdr2vb+5iA1YV3HxYscj30PDCEHIgcjtfm8K8hSsmRotkwFk5s1TTghUAopB6xrjHMBBkI0YYTZ0dZlxwLpkiWDULpmy5gwqayZgZNkA7oKQQCxctByYg0XIIEQQuRitGVHblMTA2ShKGPDpC6wu+DEgJqg2rDGDBtAF4Q6RAojp1xXGmSMbImVcR+YWNY04eQCtUG1ofUJ2/uvcETIgUhhdAE5GAlkKShjwHTNmhhODKgJqQ2sC14uOgyfD0IbRF+MlQaZAiZWyn2yJsTJATqGnHQO2Jhh+xlsACFCG0QbRtdyzQFZCZSxYPpmTS7Q5cjJHYNBYIkZpu99HoUQ/o4QIYSIZUZfjJ4ZMjZI32wZBDMU5yhy8pZTULl4XYP5fagMyEVoy4oupTpGduwnkloSlKEwY+AcQU4MhRTD6ovXBRwFzwWgCSEF0QVjJUGmgEllTS5OLlCIlIN1mS9mx/cZ5eLDALpCTI2RAhkTZQqYoTgpoCPECbaBHQ2ETL3PUl98ECAXYijG0OyYAmQoTG7W5ODkAF1CnVgm2JQx4okPA+gCMTbGskBGgRmaOblAh5GTORIrfKFx4VH4EIAxIXIxlg2SBbMvECY3e7oApbDaIgQu5/2HmeEKEINYiwSRi7EQkLFgumZOCuggctKGI4ULZN/vMeSLj0AYMytWEqMLzFg4fYDaoKaC6wvOFR4FkIPQFaILxrJAOsHsc/zlfYDWXE8qF22s8Pz5KHxcgEVALBtjJXBSSEOwFhk1Zgy4hitCT4hVw+gFs8/zwxqIBbUgyK7fcyA0PD9XX4iVxhiC0xdof6STWCsoBmKF7+cVCWFXQYyBMxRpf+STX1b0x45AhN0OMSrOGEirhrY/dfQAdjvS7oy+WCF6r1RIFxXWvlTRg1YVqFWBmxZbD99ig9pt0YPQw9rD1nstVri9V+/Ve3XrS/wfim4P5fIFxLoAAAAASUVORK5CYII=";class m1{constructor(e,t){m(this,"config");m(this,"parent");m(this,"dom");m(this,"canvas",null);m(this,"context",null);m(this,"sceneRenderer",null);m(this,"loadingScreen",null);m(this,"assetManager",null);m(this,"bg",new K);m(this,"bgFullscreen",new K);m(this,"playerControls",null);m(this,"timelineSlider",null);m(this,"playButton",null);m(this,"skinButton",null);m(this,"animationButton",null);m(this,"playTime",0);m(this,"selectedBones",[]);m(this,"cancelId",0);m(this,"popup",null);m(this,"error",!1);m(this,"skeleton",null);m(this,"animationState",null);m(this,"paused",!0);m(this,"speed",1);m(this,"time",new sr);m(this,"stopRequestAnimationFrame",!1);m(this,"disposed",!1);m(this,"viewport",{});m(this,"currentViewport",{});m(this,"previousViewport",{});m(this,"viewportTransitionStart",0);m(this,"eventListeners",[]);this.config=t;let i=typeof e=="string"?document.getElementById(e):e;if(i==null)throw new Error("SpinePlayer parent not found: "+e);this.parent=i,t.showControls===void 0&&(t.showControls=!0);let a=t.showControls?`
<div class="spine-player-controls spine-player-popup-parent spine-player-controls-hidden">
<div class="spine-player-timeline"></div>
<div class="spine-player-buttons">
<button class="spine-player-button spine-player-button-icon-pause"></button>
<div class="spine-player-button-spacer"></div>
<button class="spine-player-button spine-player-button-icon-speed"></button>
<button class="spine-player-button spine-player-button-icon-animations"></button>
<button class="spine-player-button spine-player-button-icon-skins"></button>
<button class="spine-player-button spine-player-button-icon-settings"></button>
<button class="spine-player-button spine-player-button-icon-fullscreen"></button>
<img class="spine-player-button-icon-spine-logo" src="data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20viewBox%3D%220%200%20104%2031.16%22%3E%3Cpath%20d%3D%22M104%2012.68a1.31%201.31%200%200%201-.37%201%201.28%201.28%200%200%201-.85.31H91.57a10.51%2010.51%200%200%200%20.29%202.55%204.92%204.92%200%200%200%201%202%204.27%204.27%200%200%200%201.64%201.26%206.89%206.89%200%200%200%202.6.44%2010.66%2010.66%200%200%200%202.17-.2%2012.81%2012.81%200%200%200%201.64-.44q.69-.25%201.14-.44a1.87%201.87%200%200%201%20.68-.2.44.44%200%200%201%20.27.04.43.43%200%200%201%20.16.2%201.38%201.38%200%200%201%20.09.37%204.89%204.89%200%200%201%200%20.58%204.14%204.14%200%200%201%200%20.43v.32a.83.83%200%200%201-.09.26%201.1%201.1%200%200%201-.17.22%202.77%202.77%200%200%201-.61.34%208.94%208.94%200%200%201-1.32.46%2018.54%2018.54%200%200%201-1.88.41%2013.78%2013.78%200%200%201-2.28.18%2010.55%2010.55%200%200%201-3.68-.59%206.82%206.82%200%200%201-2.66-1.74%207.44%207.44%200%200%201-1.63-2.89%2013.48%2013.48%200%200%201-.55-4%2012.76%2012.76%200%200%201%20.57-3.94%208.35%208.35%200%200%201%201.64-3%207.15%207.15%200%200%201%202.58-1.87%208.47%208.47%200%200%201%203.39-.65%208.19%208.19%200%200%201%203.41.64%206.46%206.46%200%200%201%202.32%201.73%207%207%200%200%201%201.3%202.54%2011.17%2011.17%200%200%201%20.43%203.13zm-3.14-.93a5.69%205.69%200%200%200-1.09-3.86%204.17%204.17%200%200%200-3.42-1.4%204.52%204.52%200%200%200-2%20.44%204.41%204.41%200%200%200-1.47%201.15A5.29%205.29%200%200%200%2092%209.75a7%207%200%200%200-.36%202zM80.68%2021.94a.42.42%200%200%201-.08.26.59.59%200%200%201-.25.18%201.74%201.74%200%200%201-.47.11%206.31%206.31%200%200%201-.76%200%206.5%206.5%200%200%201-.78%200%201.74%201.74%200%200%201-.47-.11.59.59%200%200%201-.25-.18.42.42%200%200%201-.08-.26V12a9.8%209.8%200%200%200-.23-2.35%204.86%204.86%200%200%200-.66-1.53%202.88%202.88%200%200%200-1.13-1%203.57%203.57%200%200%200-1.6-.34%204%204%200%200%200-2.35.83A12.71%2012.71%200%200%200%2069.11%2010v11.9a.42.42%200%200%201-.08.26.59.59%200%200%201-.25.18%201.74%201.74%200%200%201-.47.11%206.51%206.51%200%200%201-.78%200%206.31%206.31%200%200%201-.76%200%201.88%201.88%200%200%201-.48-.11.52.52%200%200%201-.25-.18.46.46%200%200%201-.07-.26v-17a.53.53%200%200%201%20.03-.21.5.5%200%200%201%20.23-.19%201.28%201.28%200%200%201%20.44-.11%208.53%208.53%200%200%201%201.39%200%201.12%201.12%200%200%201%20.43.11.6.6%200%200%201%20.22.19.47.47%200%200%201%20.07.26V7.2a10.46%2010.46%200%200%201%202.87-2.36%206.17%206.17%200%200%201%202.88-.75%206.41%206.41%200%200%201%202.87.58%205.16%205.16%200%200%201%201.88%201.54%206.15%206.15%200%200%201%201%202.26%2013.46%2013.46%200%200%201%20.31%203.11z%22%20fill%3D%22%23fff%22%2F%3E%3Cpath%20d%3D%22M43.35%202.86c.09%202.6%201.89%204%205.48%204.61%203%20.48%205.79.24%206.69-2.37%201.75-5.09-2.4-3.82-6-4.39s-6.31-2.03-6.17%202.15zm1.08%2010.69c.33%201.94%202.14%203.06%204.91%203s4.84-1.16%205.13-3.25c.53-3.88-2.53-2.38-5.3-2.3s-5.4-1.26-4.74%202.55zM48%2022.44c.55%201.45%202.06%202.06%204.1%201.63s3.45-1.11%203.33-2.76c-.21-3.06-2.22-2.1-4.26-1.66S47%2019.6%2048%2022.44zm1.78%206.78c.16%201.22%201.22%202%202.88%201.93s2.92-.67%203.13-2c.4-2.43-1.46-1.53-3.12-1.51s-3.17-.82-2.89%201.58z%22%20fill%3D%22%23ff4000%22%2F%3E%3Cpath%20d%3D%22M35.28%2013.16a15.33%2015.33%200%200%201-.48%204%208.75%208.75%200%200%201-1.42%203%206.35%206.35%200%200%201-2.32%201.91%207.14%207.14%200%200%201-3.16.67%206.1%206.1%200%200%201-1.4-.15%205.34%205.34%200%200%201-1.26-.47%207.29%207.29%200%200%201-1.24-.81q-.61-.49-1.29-1.15v8.51a.47.47%200%200%201-.08.26.56.56%200%200%201-.25.19%201.74%201.74%200%200%201-.47.11%206.47%206.47%200%200%201-.78%200%206.26%206.26%200%200%201-.76%200%201.89%201.89%200%200%201-.48-.11.49.49%200%200%201-.25-.19.51.51%200%200%201-.07-.26V4.91a.57.57%200%200%201%20.06-.27.46.46%200%200%201%20.23-.18%201.47%201.47%200%200%201%20.44-.1%207.41%207.41%200%200%201%201.3%200%201.45%201.45%200%200%201%20.43.1.52.52%200%200%201%20.24.18.51.51%200%200%201%20.07.27V7.2a18.06%2018.06%200%200%201%201.49-1.38%209%209%200%200%201%201.45-1%206.82%206.82%200%200%201%201.49-.59%207.09%207.09%200%200%201%204.78.52%206%206%200%200%201%202.13%202%208.79%208.79%200%200%201%201.2%202.9%2015.72%2015.72%200%200%201%20.4%203.51zm-3.28.36a15.64%2015.64%200%200%200-.2-2.53%207.32%207.32%200%200%200-.69-2.17%204.06%204.06%200%200%200-1.3-1.51%203.49%203.49%200%200%200-2-.57%204.1%204.1%200%200%200-1.2.18%204.92%204.92%200%200%200-1.2.57%208.54%208.54%200%200%200-1.28%201A15.77%2015.77%200%200%200%2022.76%2010v6.77a13.53%2013.53%200%200%200%202.46%202.4%204.12%204.12%200%200%200%202.44.83%203.56%203.56%200%200%200%202-.57A4.28%204.28%200%200%200%2031%2018a7.58%207.58%200%200%200%20.77-2.12%2011.43%2011.43%200%200%200%20.23-2.36zM12%2017.3a5.39%205.39%200%200%201-.48%202.33%204.73%204.73%200%200%201-1.37%201.72%206.19%206.19%200%200%201-2.12%201.06%209.62%209.62%200%200%201-2.71.36%2010.38%2010.38%200%200%201-3.21-.5A7.63%207.63%200%200%201%201%2021.82a3.25%203.25%200%200%201-.66-.43%201.09%201.09%200%200%201-.3-.53%203.59%203.59%200%200%201-.04-.93%204.06%204.06%200%200%201%200-.61%202%202%200%200%201%20.09-.4.42.42%200%200%201%20.16-.22.43.43%200%200%201%20.24-.07%201.35%201.35%200%200%201%20.61.26q.41.26%201%20.56a9.22%209.22%200%200%200%201.41.55%206.25%206.25%200%200%200%201.87.26%205.62%205.62%200%200%200%201.44-.17%203.48%203.48%200%200%200%201.12-.5%202.23%202.23%200%200%200%20.73-.84%202.68%202.68%200%200%200%20.26-1.21%202%202%200%200%200-.37-1.21%203.55%203.55%200%200%200-1-.87%208.09%208.09%200%200%200-1.36-.66l-1.56-.61a16%2016%200%200%201-1.57-.73%206%206%200%200%201-1.37-1%204.52%204.52%200%200%201-1-1.4%204.69%204.69%200%200%201-.37-2%204.88%204.88%200%200%201%20.39-1.87%204.46%204.46%200%200%201%201.16-1.61%205.83%205.83%200%200%201%201.94-1.11A8.06%208.06%200%200%201%206.53%204a8.28%208.28%200%200%201%201.36.11%209.36%209.36%200%200%201%201.23.28%205.92%205.92%200%200%201%20.94.37%204.09%204.09%200%200%201%20.59.35%201%201%200%200%201%20.26.26.83.83%200%200%201%20.09.26%201.32%201.32%200%200%200%20.06.35%203.87%203.87%200%200%201%200%20.51%204.76%204.76%200%200%201%200%20.56%201.39%201.39%200%200%201-.09.39.5.5%200%200%201-.16.22.35.35%200%200%201-.21.07%201%201%200%200%201-.49-.21%207%207%200%200%200-.83-.44%209.26%209.26%200%200%200-1.2-.44%205.49%205.49%200%200%200-1.58-.16%204.93%204.93%200%200%200-1.4.18%202.69%202.69%200%200%200-1%20.51%202.16%202.16%200%200%200-.59.83%202.43%202.43%200%200%200-.2%201%202%202%200%200%200%20.38%201.24%203.6%203.6%200%200%200%201%20.88%208.25%208.25%200%200%200%201.38.68l1.58.62q.8.32%201.59.72a6%206%200%200%201%201.39%201%204.37%204.37%200%200%201%201%201.36%204.46%204.46%200%200%201%20.37%201.8z%22%20fill%3D%22%23fff%22%2F%3E%3C%2Fsvg%3E">
</div></div>`:"";this.parent.appendChild(this.dom=li(`<div class="spine-player" style="position:relative;height:100%"><canvas class="spine-player-canvas" style="display:block;width:100%;height:100%"></canvas>${a}</div>`));try{this.validateConfig(t)}catch(n){this.showError(n.message,n)}this.initialize(),this.addEventListener(window,"resize",()=>this.drawFrame(!1)),requestAnimationFrame(()=>this.drawFrame())}dispose(){var i,a,n;(i=this.sceneRenderer)==null||i.dispose(),(a=this.loadingScreen)==null||a.dispose(),(n=this.assetManager)==null||n.dispose();for(var e=0;e<this.eventListeners.length;e++){var t=this.eventListeners[e];t.target.removeEventListener(t.event,t.func)}this.parent.removeChild(this.dom),this.disposed=!0}addEventListener(e,t,i){this.eventListeners.push({target:e,event:t,func:i}),e.addEventListener(t,i)}validateConfig(e){if(!e)throw new Error("A configuration object must be passed to to new SpinePlayer().");if(e.skelUrl&&(e.skeleton=e.skelUrl),!e.skeleton&&!e.jsonUrl&&!e.binaryUrl)throw new Error("A URL must be specified for the skeleton JSON or binary file.");if(e.scale||(e.scale=1),!e.atlas&&!e.atlasUrl)throw new Error("A URL must be specified for the atlas file.");if(e.jsonUrl&&!e.skeleton&&(e.skeleton=e.jsonUrl),e.binaryUrl&&!e.skeleton&&(e.skeleton=e.binaryUrl),e.atlasUrl&&!e.atlas&&(e.atlas=e.atlasUrl),e.backgroundColor||(e.backgroundColor=e.alpha?"00000000":"000000"),e.fullScreenBackgroundColor||(e.fullScreenBackgroundColor=e.backgroundColor),e.backgroundImage&&!e.backgroundImage.url&&(e.backgroundImage=void 0),e.premultipliedAlpha===void 0&&(e.premultipliedAlpha=!0),e.preserveDrawingBuffer===void 0&&(e.preserveDrawingBuffer=!1),e.mipmaps===void 0&&(e.mipmaps=!0),e.debug||(e.debug={bones:!1,clipping:!1,bounds:!1,hulls:!1,meshes:!1,paths:!1,points:!1,regions:!1}),e.animations&&e.animation&&e.animations.indexOf(e.animation)<0)throw new Error("Animation '"+e.animation+"' is not in the config animation list: "+tn(e.animations));if(e.skins&&e.skin&&e.skins.indexOf(e.skin)<0)throw new Error("Default skin '"+e.skin+"' is not in the config skins list: "+tn(e.skins));e.viewport||(e.viewport={}),e.viewport.animations||(e.viewport.animations={}),e.viewport.debugRender===void 0&&(e.viewport.debugRender=!1),e.viewport.transitionTime===void 0&&(e.viewport.transitionTime=.25),e.controlBones||(e.controlBones=[]),e.showLoading===void 0&&(e.showLoading=!0),e.defaultMix===void 0&&(e.defaultMix=.25)}initialize(){let e=this.config,t=this.dom;if(!e.alpha){let i=e.backgroundColor;this.dom.style.backgroundColor=(i.charAt(0)=="#"?i:"#"+i).substr(0,7)}try{this.canvas=Wt(t,"spine-player-canvas"),this.context=new dt(this.canvas,{alpha:e.alpha,preserveDrawingBuffer:e.preserveDrawingBuffer}),this.sceneRenderer=new l1(this.canvas,this.context,!0),e.showLoading&&(this.loadingScreen=new h1(this.sceneRenderer))}catch(i){return this.showError(`Sorry, your browser does not support WebG, or you have disabled WebGL in your browser settings.
Please use the latest version of Firefox, Chrome, Edge, or Safari.`,i),null}if(this.assetManager=new i1(this.context,"",e.downloader),e.rawDataURIs)for(let i in e.rawDataURIs)this.assetManager.setRawDataURI(i,e.rawDataURIs[i]);if(e.skeleton.endsWith(".json")?this.assetManager.loadJson(e.skeleton):this.assetManager.loadBinary(e.skeleton),this.assetManager.loadTextureAtlas(e.atlas),e.backgroundImage&&this.assetManager.loadTexture(e.backgroundImage.url),this.bg.setFromString(e.backgroundColor),this.bgFullscreen.setFromString(e.fullScreenBackgroundColor),e.showControls){this.playerControls=t.children[1];let i=this.playerControls.children,a=i[0],n=i[1].children;this.playButton=n[0];let o=n[2];this.animationButton=n[3],this.skinButton=n[4];let s=n[5],h=n[6],r=n[7];this.timelineSlider=new _s,a.appendChild(this.timelineSlider.create()),this.timelineSlider.change=p=>{this.pause();let b=this.animationState.getCurrent(0).animation.duration*p;this.animationState.update(b-this.playTime),this.animationState.apply(this.skeleton),this.skeleton.update(b-this.playTime),this.skeleton.updateWorldTransform(Mt.update),this.playTime=b},this.playButton.onclick=()=>this.paused?this.play():this.pause(),o.onclick=()=>this.showSpeedDialog(o),this.animationButton.onclick=()=>this.showAnimationsDialog(this.animationButton),this.skinButton.onclick=()=>this.showSkinsDialog(this.skinButton),s.onclick=()=>this.showSettingsDialog(s);let l=this.canvas.clientWidth,c=this.canvas.clientHeight,f=this.canvas.style.width,u=this.canvas.style.height,g=!1;h.onclick=()=>{let p=()=>{g=!g,g||(this.canvas.style.width=l+"px",this.canvas.style.height=c+"px",this.drawFrame(!1),requestAnimationFrame(()=>{this.canvas.style.width=f,this.canvas.style.height=u}))},v=t;v.onfullscreenchange=p,v.onwebkitfullscreenchange=p;let b=document;b.fullscreenElement||b.webkitFullscreenElement||b.mozFullScreenElement||b.msFullscreenElement?b.exitFullscreen?b.exitFullscreen():b.mozCancelFullScreen?b.mozCancelFullScreen():b.webkitExitFullscreen?b.webkitExitFullscreen():b.msExitFullscreen&&b.msExitFullscreen():(l=this.canvas.clientWidth,c=this.canvas.clientHeight,f=this.canvas.style.width,u=this.canvas.style.height,v.requestFullscreen?v.requestFullscreen():v.webkitRequestFullScreen?v.webkitRequestFullScreen():v.mozRequestFullScreen?v.mozRequestFullScreen():v.msRequestFullscreen&&v.msRequestFullscreen())},r.onclick=()=>window.open("http://esotericsoftware.com")}return t}loadSkeleton(){if(this.error)return;this.assetManager.hasErrors()&&this.showError(`Error: Assets could not be loaded.
`+tn(this.assetManager.getErrors()));let e=this.config,t=this.assetManager.require(e.atlas),i=this.context.gl,a=i.getExtension("EXT_texture_filter_anisotropic"),n=i.getParameter(i.VERSION).indexOf("WebGL 1.0")!=-1;for(let c of t.pages){let f=c.minFilter;var o=e.mipmaps,s=q.isPowerOfTwo(c.width)&&q.isPowerOfTwo(c.height);n&&!s&&(o=!1),o&&(a?(i.texParameterf(i.TEXTURE_2D,a.TEXTURE_MAX_ANISOTROPY_EXT,8),f=Ze.MipMapLinearLinear):f=Ze.Linear,c.texture.setFilters(f,Ze.Nearest)),f!=Ze.Nearest&&f!=Ze.Linear&&c.texture.update(!0)}let h;try{let c,f,u=new md(t);if(e.skeleton.endsWith(".json")){if(f=this.assetManager.remove(e.skeleton),!f)throw new Error("Empty JSON data.");if(e.jsonField&&(f=f[e.jsonField],!f))throw new Error("JSON field does not exist: "+e.jsonField);c=new e1(u)}else f=this.assetManager.remove(e.skeleton),c=new bd(u);c.scale=e.scale,h=c.readSkeletonData(f)}catch(c){this.showError(`Error: Could not load skeleton data.
${c.message}`,c);return}this.skeleton=new pn(h);let r=new od(h);r.defaultMix=e.defaultMix,this.animationState=new fn(r),e.controlBones.forEach(c=>{h.findBone(c)||this.showError(`Error: Control bone does not exist in skeleton: ${c}`)}),!e.skin&&h.skins.length&&(e.skin=h.skins[0].name),e.skins&&e.skin.length&&e.skins.forEach(c=>{this.skeleton.data.findSkin(c)||this.showError(`Error: Skin in config list does not exist in skeleton: ${c}`)}),e.skin&&(this.skeleton.data.findSkin(e.skin)||this.showError(`Error: Skin does not exist in skeleton: ${e.skin}`),this.skeleton.setSkinByName(e.skin),this.skeleton.setSlotsToSetupPose()),Object.getOwnPropertyNames(e.viewport.animations).forEach(c=>{h.findAnimation(c)||this.showError(`Error: Animation for which a viewport was specified does not exist in skeleton: ${c}`)}),e.animations&&e.animations.length&&(e.animations.forEach(c=>{this.skeleton.data.findAnimation(c)||this.showError(`Error: Animation in config list does not exist in skeleton: ${c}`)}),e.animation||(e.animation=e.animations[0])),e.animation&&!h.findAnimation(e.animation)&&this.showError(`Error: Animation does not exist in skeleton: ${e.animation}`),this.setupInput(),e.showControls&&((h.skins.length==1||e.skins&&e.skins.length==1)&&this.skinButton.classList.add("spine-player-hidden"),(h.animations.length==1||e.animations&&e.animations.length==1)&&this.animationButton.classList.add("spine-player-hidden")),e.success&&e.success(this);let l=this.animationState.getCurrent(0);l?this.currentViewport||(this.setViewport(l.animation),this.play()):e.animation?(l=this.setAnimation(e.animation),this.play()):(l=this.animationState.setEmptyAnimation(0),l.trackEnd=1e8,this.skeleton.updateWorldTransform(Mt.update),this.setViewport(l.animation),this.pause())}setupInput(){let e=this.config,t=e.controlBones;if(!t.length&&!e.showControls)return;let i=this.selectedBones=new Array(t.length),a=this.canvas,n=null,o=new Dt,s=new ci,h=new ci,r=new Dt,l=this.skeleton,c=this.sceneRenderer,f=function(u,g){h.set(u,a.clientHeight-g,0),o.x=o.y=0;let p=24,v=0,b=null;for(let w=0;w<t.length;w++){i[w]=null;let _=l.findBone(t[w]);if(!_)continue;let y=c.camera.worldToScreen(s.set(_.worldX,_.worldY,0),a.clientWidth,a.clientHeight).distance(h);y<p&&(p=y,b=_,v=w,o.x=s.x-h.x,o.y=s.y-h.y)}return b&&(i[v]=b),b};if(new Hr(a).addListener({down:(u,g)=>{n=f(u,g)},up:()=>{n?n=null:e.showControls&&(this.paused?this.play():this.pause())},dragged:(u,g)=>{n&&(u=q.clamp(u+o.x,0,a.clientWidth),g=q.clamp(g-o.y,0,a.clientHeight),c.camera.screenToWorld(s.set(u,g,0),a.clientWidth,a.clientHeight),n.parent?(n.parent.worldToLocal(r.set(s.x-l.x,s.y-l.y)),n.x=r.x,n.y=r.y):(n.x=s.x-l.x,n.y=s.y-l.y))},moved:(u,g)=>f(u,g)}),e.showControls){this.addEventListener(document,"mousemove",b=>{b instanceof MouseEvent&&v(b.clientX,b.clientY)}),this.addEventListener(document,"touchmove",b=>{if(b instanceof TouchEvent){let w=b.changedTouches;if(w.length){let _=w[0];v(_.clientX,_.clientY)}}});let u=(b,w,_)=>{let y=b-_.left,k=w-_.top;return y>=0&&y<=_.width&&k>=0&&k<=_.height},g=!0,p=!1,v=(b,w)=>{let _=Wt(this.dom,"spine-player-popup");g=u(b,w,this.playerControls.getBoundingClientRect()),p=u(b,w,a.getBoundingClientRect()),clearTimeout(this.cancelId),!_&&!g&&!p&&!this.paused?this.playerControls.classList.add("spine-player-controls-hidden"):this.playerControls.classList.remove("spine-player-controls-hidden"),!g&&!_&&!this.paused&&(this.cancelId=setTimeout(()=>{this.paused||this.playerControls.classList.add("spine-player-controls-hidden")},1e3))}}}play(){this.paused=!1;let e=this.config;e.showControls&&(this.cancelId=setTimeout(()=>{this.paused||this.playerControls.classList.add("spine-player-controls-hidden")},1e3),this.playButton.classList.remove("spine-player-button-icon-play"),this.playButton.classList.add("spine-player-button-icon-pause"),e.animation||(e.animations&&e.animations.length?e.animation=e.animations[0]:this.skeleton.data.animations.length&&(e.animation=this.skeleton.data.animations[0].name),e.animation&&this.setAnimation(e.animation)))}pause(){this.paused=!0,this.config.showControls&&(this.playerControls.classList.remove("spine-player-controls-hidden"),clearTimeout(this.cancelId),this.playButton.classList.remove("spine-player-button-icon-pause"),this.playButton.classList.add("spine-player-button-icon-play"))}setAnimation(e,t=!0){return e=this.setViewport(e),this.animationState.setAnimationWith(0,e,t)}addAnimation(e,t=!0,i=0){return e=this.setViewport(e),this.animationState.addAnimationWith(0,e,t,i)}setViewport(e){if(typeof e=="string"){let n=this.skeleton.data.findAnimation(e);if(!n)throw new Error("Animation not found: "+e);e=n}this.previousViewport=this.currentViewport;let t=this.config.viewport,i=this.currentViewport={padLeft:t.padLeft!==void 0?t.padLeft:"10%",padRight:t.padRight!==void 0?t.padRight:"10%",padTop:t.padTop!==void 0?t.padTop:"10%",padBottom:t.padBottom!==void 0?t.padBottom:"10%"};t.x!==void 0&&t.y!==void 0&&t.width&&t.height?(i.x=t.x,i.y=t.y,i.width=t.width,i.height=t.height):this.calculateAnimationViewport(e,i);let a=this.config.viewport.animations[e.name];return a&&(a.x!==void 0&&a.y!==void 0&&a.width&&a.height&&(i.x=a.x,i.y=a.y,i.width=a.width,i.height=a.height),a.padLeft!==void 0&&(i.padLeft=a.padLeft),a.padRight!==void 0&&(i.padRight=a.padRight),a.padTop!==void 0&&(i.padTop=a.padTop),a.padBottom!==void 0&&(i.padBottom=a.padBottom)),i.padLeft=this.percentageToWorldUnit(i.width,i.padLeft),i.padRight=this.percentageToWorldUnit(i.width,i.padRight),i.padBottom=this.percentageToWorldUnit(i.height,i.padBottom),i.padTop=this.percentageToWorldUnit(i.height,i.padTop),this.viewportTransitionStart=performance.now(),e}percentageToWorldUnit(e,t){return typeof t=="string"?e*parseFloat(t.substr(0,t.length-1))/100:t}calculateAnimationViewport(e,t){this.skeleton.setToSetupPose();let i=100,a=e.duration?e.duration/i:0,n=0,o=1e8,s=-1e8,h=1e8,r=-1e8,l=new Dt,c=new Dt;const f=new Array(2);for(let u=0;u<i;u++,n+=a)e.apply(this.skeleton,n,n,!1,[],1,X.setup,ct.mixIn),this.skeleton.updateWorldTransform(Mt.update),this.skeleton.getBounds(l,c,f,this.sceneRenderer.skeletonRenderer.getSkeletonClipping()),!isNaN(l.x)&&!isNaN(l.y)&&!isNaN(c.x)&&!isNaN(c.y)?(o=Math.min(l.x,o),s=Math.max(l.x+c.x,s),h=Math.min(l.y,h),r=Math.max(l.y+c.y,r)):this.showError("Animation bounds are invalid: "+e.name);t.x=o,t.y=h,t.width=s-o,t.height=r-h}drawFrame(e=!0){try{if(this.error||this.disposed)return;e&&!this.stopRequestAnimationFrame&&requestAnimationFrame(()=>this.drawFrame());let t=document,a=t.fullscreenElement||t.webkitFullscreenElement||t.mozFullScreenElement||t.msFullscreenElement?this.bgFullscreen:this.bg;this.time.update();let n=this.time.delta,o=!this.assetManager.isLoadingComplete();!this.skeleton&&!o&&this.loadSkeleton();let s=this.skeleton,h=this.config;if(s){let r=this.sceneRenderer;r.resize(qi.Expand);let l=this.paused?0:n*this.speed;if(h.frame&&h.frame(this,l),!this.paused&&(s.update(l),this.animationState.update(l),this.animationState.apply(s),h.updateWorldTransform?h.updateWorldTransform(this,l):s.updateWorldTransform(Mt.update),h.showControls)){this.playTime+=l;let p=this.animationState.getCurrent(0);if(p){let v=p.animation.duration;for(;this.playTime>=v&&v!=0;)this.playTime-=v;this.playTime=Math.max(0,Math.min(this.playTime,v)),this.timelineSlider.setValue(this.playTime/v)}}let c=this.viewport;if(c.x=this.currentViewport.x-this.currentViewport.padLeft,c.y=this.currentViewport.y-this.currentViewport.padBottom,c.width=this.currentViewport.width+this.currentViewport.padLeft+this.currentViewport.padRight,c.height=this.currentViewport.height+this.currentViewport.padBottom+this.currentViewport.padTop,this.previousViewport){let p=(performance.now()-this.viewportTransitionStart)/1e3/h.viewport.transitionTime;if(p<1){let v=this.previousViewport.x-this.previousViewport.padLeft,b=this.previousViewport.y-this.previousViewport.padBottom,w=this.previousViewport.width+this.previousViewport.padLeft+this.previousViewport.padRight,_=this.previousViewport.height+this.previousViewport.padBottom+this.previousViewport.padTop;c.x=v+(c.x-v)*p,c.y=b+(c.y-b)*p,c.width=w+(c.width-w)*p,c.height=_+(c.height-_)*p}}r.camera.zoom=this.canvas.height/this.canvas.width>c.height/c.width?c.width/this.canvas.width:c.height/this.canvas.height,r.camera.position.x=c.x+c.width/2,r.camera.position.y=c.y+c.height/2;let f=this.context.gl;f.clearColor(a.r,a.g,a.b,a.a),f.clear(f.COLOR_BUFFER_BIT),h.update&&h.update(this,l),r.begin();let u=h.backgroundImage;if(u){let p=this.assetManager.require(u.url);u.x!==void 0&&u.y!==void 0&&u.width&&u.height?r.drawTexture(p,u.x,u.y,u.width,u.height):r.drawTexture(p,c.x,c.y,c.width,c.height)}r.drawSkeleton(s,h.premultipliedAlpha),Number(r.skeletonDebugRenderer.drawBones=h.debug.bones??!1)+Number(r.skeletonDebugRenderer.drawBoundingBoxes=h.debug.bounds??!1)+Number(r.skeletonDebugRenderer.drawClipping=h.debug.clipping??!1)+Number(r.skeletonDebugRenderer.drawMeshHull=h.debug.hulls??!1)+Number(r.skeletonDebugRenderer.drawPaths=h.debug.paths??!1)+Number(r.skeletonDebugRenderer.drawRegionAttachments=h.debug.regions??!1)+Number(r.skeletonDebugRenderer.drawMeshTriangles=h.debug.meshes??!1)>0&&r.drawSkeletonDebug(s,h.premultipliedAlpha);let g=h.controlBones;if(g.length){let p=this.selectedBones;f.lineWidth(2);for(let v=0;v<g.length;v++){let b=s.findBone(g[v]);if(!b)continue;let w=p[v]?g1:v1,_=p[v]?p1:_1;r.circle(!0,s.x+b.worldX,s.y+b.worldY,20,w),r.circle(!1,s.x+b.worldX,s.y+b.worldY,20,_)}}h.viewport.debugRender&&(f.lineWidth(1),r.rect(!1,this.currentViewport.x,this.currentViewport.y,this.currentViewport.width,this.currentViewport.height,K.GREEN),r.rect(!1,c.x,c.y,c.width,c.height,K.RED)),r.end(),h.draw&&h.draw(this,l)}h.showLoading&&(this.loadingScreen.backgroundColor.setFromColor(a),this.loadingScreen.draw(!o)),o&&h.loading&&h.loading(this,n)}catch(t){this.showError(`Error: Unable to render skeleton.
${t.message}`,t)}}startRendering(){this.stopRequestAnimationFrame=!1,requestAnimationFrame(()=>this.drawFrame())}stopRendering(){this.stopRequestAnimationFrame=!0}hidePopup(e){return this.popup!=null&&this.popup.hide(e)}showSpeedDialog(e){let t="speed";if(this.hidePopup(t))return;let i=new fa(t,e,this,this.playerControls,`
<div class="spine-player-popup-title">Speed</div>
<hr>
<div class="spine-player-row" style="align-items:center;padding:8px">
<div class="spine-player-column">
	<div class="spine-player-speed-slider" style="margin-bottom:4px"></div>
	<div class="spine-player-row" style="justify-content:space-between"><div>0.1x</div><div>1x</div><div>2x</div></div>
</div>
</div>`),a=new _s(2,.1,!0);Wt(i.dom,"spine-player-speed-slider").appendChild(a.create()),a.setValue(this.speed/2),a.change=n=>this.speed=n*2,i.show()}showAnimationsDialog(e){let t="animations";if(this.hidePopup(t)||!this.skeleton||!this.skeleton.data.animations.length)return;let i=new fa(t,e,this,this.playerControls,'<div class="spine-player-popup-title">Animations</div><hr><ul class="spine-player-list"></ul>'),a=Wt(i.dom,"spine-player-list");this.skeleton.data.animations.forEach(n=>{if(this.config.animations&&this.config.animations.indexOf(n.name)<0)return;let o=li('<li class="spine-player-list-item selectable"><div class="selectable-circle"></div><div class="selectable-text"></div></li>');n.name==this.config.animation&&o.classList.add("selected"),Wt(o,"selectable-text").innerText=n.name,a.appendChild(o),o.onclick=()=>{bs(a.children,"selected"),o.classList.add("selected"),this.config.animation=n.name,this.playTime=0,this.setAnimation(n.name),this.play()}}),i.show()}showSkinsDialog(e){let t="skins";if(this.hidePopup(t)||!this.skeleton||!this.skeleton.data.animations.length)return;let i=new fa(t,e,this,this.playerControls,'<div class="spine-player-popup-title">Skins</div><hr><ul class="spine-player-list"></ul>'),a=Wt(i.dom,"spine-player-list");this.skeleton.data.skins.forEach(n=>{if(this.config.skins&&this.config.skins.indexOf(n.name)<0)return;let o=li('<li class="spine-player-list-item selectable"><div class="selectable-circle"></div><div class="selectable-text"></div></li>');n.name==this.config.skin&&o.classList.add("selected"),Wt(o,"selectable-text").innerText=n.name,a.appendChild(o),o.onclick=()=>{bs(a.children,"selected"),o.classList.add("selected"),this.config.skin=n.name,this.skeleton.setSkinByName(this.config.skin),this.skeleton.setSlotsToSetupPose()}}),i.show()}showSettingsDialog(e){let t="settings";if(this.hidePopup(t)||!this.skeleton||!this.skeleton.data.animations.length)return;let i=new fa(t,e,this,this.playerControls,'<div class="spine-player-popup-title">Debug</div><hr><ul class="spine-player-list"></li>'),a=Wt(i.dom,"spine-player-list"),n=(o,s)=>{let h=li('<li class="spine-player-list-item"></li>'),r=new f1(o);h.appendChild(r.create());let l=this.config.debug;r.setEnabled(l[s]),r.change=c=>l[s]=c,a.appendChild(h)};n("Bones","bones"),n("Regions","regions"),n("Meshes","meshes"),n("Bounds","bounds"),n("Paths","paths"),n("Clipping","clipping"),n("Points","points"),n("Hulls","hulls"),i.show()}showError(e,t){if(this.error){if(t)throw t}else throw this.error=!0,this.dom.appendChild(li('<div class="spine-player-error" style="background:#000;color:#fff;position:absolute;top:0;width:100%;height:100%;display:flex;justify-content:center;align-items:center;overflow:auto;z-index:999">'+e.replace(`
`,"<br><br>")+"</div>")),this.config.error&&this.config.error(this,e),t||new Error(e)}}class fa{constructor(e,t,i,a,n){m(this,"id");m(this,"button");m(this,"player");m(this,"dom");m(this,"className");m(this,"windowClickListener");this.id=e,this.button=t,this.player=i,this.dom=li('<div class="spine-player-popup spine-player-hidden"></div>'),this.dom.innerHTML=n,a.appendChild(this.dom),this.className="spine-player-button-icon-"+e+"-selected"}dispose(){}hide(e){return this.dom.remove(),this.button.classList.remove(this.className),this.id==e?(this.player.popup=null,!0):!1}show(){this.player.popup=this,this.button.classList.add(this.className),this.dom.classList.remove("spine-player-hidden");let e=!1,t=()=>{e||requestAnimationFrame(t);let n=this.player.dom,o=Math.abs(n.getBoundingClientRect().bottom-n.getBoundingClientRect().bottom),s=Math.abs(n.getBoundingClientRect().right-n.getBoundingClientRect().right);this.dom.style.maxHeight=n.clientHeight-o-s+"px"};requestAnimationFrame(t);let i=!0,a=n=>{if(i||this.player.popup!=this){i=!1;return}this.dom.contains(n.target)||(this.dom.remove(),window.removeEventListener("click",a),this.button.classList.remove(this.className),this.player.popup=null,e=!0)};this.player.addEventListener(window,"click",a)}}class f1{constructor(e){m(this,"text");m(this,"switch",null);m(this,"enabled",!1);m(this,"change",()=>{});this.text=e}create(){return this.switch=li(`
<div class="spine-player-switch">
	<span class="spine-player-switch-text">${this.text}</span>
	<div class="spine-player-switch-knob-area">
		<div class="spine-player-switch-knob"></div>
	</div>
</div>`),this.switch.addEventListener("click",()=>{this.setEnabled(!this.enabled),this.change&&this.change(this.enabled)}),this.switch}setEnabled(e){var t,i;e?(t=this.switch)==null||t.classList.add("active"):(i=this.switch)==null||i.classList.remove("active"),this.enabled=e}isEnabled(){return this.enabled}}class _s{constructor(e=0,t=.1,i=!1){m(this,"snaps");m(this,"snapPercentage");m(this,"big");m(this,"slider",null);m(this,"value",null);m(this,"knob",null);m(this,"change",()=>{});this.snaps=e,this.snapPercentage=t,this.big=i}create(){this.slider=li(`
<div class="spine-player-slider ${this.big?"big":""}">
	<div class="spine-player-slider-value"></div>
	<!--<div class="spine-player-slider-knob"></div>-->
</div>`),this.value=Wt(this.slider,"spine-player-slider-value"),this.setValue(0);let e=!1;return new Hr(this.slider).addListener({down:(t,i)=>{var a;e=!0,(a=this.value)==null||a.classList.add("hovering")},up:(t,i)=>{var a;e=!1,this.change&&this.change(this.setValue(t/this.slider.clientWidth)),(a=this.value)==null||a.classList.remove("hovering")},moved:(t,i)=>{e&&this.change&&this.change(this.setValue(t/this.slider.clientWidth))},dragged:(t,i)=>{this.change&&this.change(this.setValue(t/this.slider.clientWidth))}}),this.slider}setValue(e){if(e=Math.max(0,Math.min(1,e)),this.snaps){let t=1/this.snaps,i=e%t;i<t*this.snapPercentage?e=e-i:i>t-t*this.snapPercentage&&(e=e-i+t),e=Math.max(0,Math.min(1,e))}return this.value.style.width=""+e*100+"%",e}}function Wt(d,e){return d.getElementsByClassName(e)[0]}function li(d){let e=document.createElement("div");return e.innerHTML=d,e.children[0]}function bs(d,e){for(let t=0;t<d.length;t++)d[t].classList.remove(e)}function tn(d){return JSON.stringify(d).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&#34;").replace(/'/g,"&#39;")}const g1=new K(.478,0,0,.25),p1=new K(1,1,1,1),v1=new K(.478,0,0,.5),_1=new K(1,0,0,.8),P=Cn({tracks:[],track:{duration:0,seek:0,info:{manager:null},interval:null},paused:!1,starting:{status:!1,timeout:null},tap:{amount:0,timeout:null,limit:!1},alert:{scale:!1},audio:{fade:{interval:null}},animations:{spine:{started:!1,current:-1,timing:[{name:"solo_M",timing:2e3},{name:"solo_X",timing:4e3},{name:"solo_R",timing:4e3}],timeout:null},items:[],repeat:{max:2,left:0,right:0}},sound:{enable:!0},graphql:{mutate:{end:()=>{}}}});let Ta=null;const b1=async d=>{Ta||(Ta=new m1(d,{skeleton:"/assets/spine/skeleton.json",atlas:"/assets/spine/skeleton.atlas",animations:["idle","solo_R","solo_M","solo_X"],showControls:!1,backgroundColor:null,fullScreenBackgroundColor:null,alpha:!0,animation:"idle",viewport:{x:-300/2,y:-130,width:300,height:675},premultipliedAlpha:!1}))},Zr=()=>{if(!P.animations.spine.started)return;P.animations.spine.current=P.animations.spine.current>=2||P.animations.spine.current===-1?0:P.animations.spine.current+1;const d=P.animations.spine.timing[P.animations.spine.current];Ta.setAnimation(d.name),P.animations.spine.timeout=setTimeout(()=>Zr(),1500)},$r=()=>{P.animations.spine.started&&(P.animations.spine.timeout&&(clearInterval(P.animations.spine.timeout),P.animations.spine.timeout=null),P.animations.spine.current=-1,P.animations.spine.started=!1,Ta.setAnimation("idle"))},y1=d=>{if(P.track.duration=Math.trunc(d.duration()),P.track.seek=Math.trunc(d.seek()),P.track.duration===P.track.seek)return clearInterval(P.track.interval),x1()},Kr=(d,e=0,t=0)=>{const i=P.tracks.findIndex(a=>a.id===d);i!==-1&&(P.tracks[i].next_timer=e,P.tracks[i].history_created_at=t)},w1=async d=>{const e=P.tracks.findIndex(i=>i.id===d);if(e===-1)return $e("error","The track you have selected was not found");const t=P.tracks[e];if(t.next_timer>0)return $e("error","You can listen to this track via "+ar(t.next_timer));P.starting.status=!0,P.starting.timeout=setTimeout(()=>{Ve.dispatch("setDropGameStarted",!0),P.track.info=t,P.track.interval=setInterval(()=>y1(t.manager),100),t.manager.play(),setTimeout(()=>P.starting.status=!1,400),P.starting.timeout=null,Qr()},700*3+600)},ys=async d=>{if(d.y<95||P.tap.limit)return;if(!Ve.state.drop_game.started)return P.alert.scale=!0,setTimeout(()=>P.alert.scale=!1,80);const e=()=>{P.animations.spine.started||(P.animations.spine.started=!0,Zr())};if(P.tap.timeout&&(clearTimeout(P.tap.timeout),P.tap.timeout=null,P.track.info.manager.playing()||P.track.info.manager.play()),P.paused||P.audio.fade.interval){const i=P.track.info.manager.seek(),a=P.audio.fade.interval?3:4;P.track.info.manager.seek(a>i?0:i-a),P.track.info.manager.volume(1)}return P.audio.fade.interval&&(clearInterval(P.audio.fade.interval),P.audio.fade.interval=null),P.paused&&(P.paused=!1,e(),P.track.info.manager.playing()||P.track.info.manager.play()),e(),P.tap.amount++,P.tap.limit=!0,setTimeout(()=>P.tap.limit=!1,50),P.track.duration-P.track.seek>9&&Qr(),C1()},x1=async()=>{if(P.track.duration!==P.track.seek)return;const d=Fs().unix(),e=await P.graphql.mutate.end();if(Kr(P.track.info.id,3600*24,d),await xn(),!e||!e.data||!e.data.completeDropGame)return;const t=e.data.completeDropGame;return await Ve.dispatch("user/setUserBalance",t.balance),$e("success","You got +"+t.amount+" notes!","Complete")},xn=async()=>{P.track.info.manager&&P.track.info.manager.playing()&&P.track.info.manager.stop(),await Ve.dispatch("setDropGameStarted",!1),P.track.info={manager:null},P.track.duration=0,P.track.seek=0,P.tap.amount=0,P.tap.limit=!1,P.paused=!1,P.animations.items=[],P.animations.repeat.left=0,P.animations.repeat.right=0,P.alert.scale=!1,$r(),P.starting.timeout&&(clearTimeout(P.starting.timeout),P.starting.timeout=null),P.tap.timeout&&(clearTimeout(P.tap.timeout),P.tap.timeout=null),P.track.interval&&(clearInterval(P.track.interval),P.track.interval=null),P.audio.fade.interval&&(clearInterval(P.audio.fade.interval),P.audio.fade.interval=null)},Qr=()=>{P.tap.timeout=setTimeout(()=>{P.paused=!0,P.audio.fade.interval=setInterval(()=>{const d=P.track.info.manager.volume(),e=Number(d-.01).toFixed(2),t=Number(e);P.track.info.manager.volume(t),t===0&&(P.track.info.manager.pause(),$r(),P.track.info.manager.volume(1),clearInterval(P.audio.fade.interval),P.audio.fade.interval=null)},10)},3e3)},C1=()=>{const d=oi(1,4),e=["s","m","l","xl"],t=P.animations.repeat.left>=P.animations.repeat.max?"right":P.animations.repeat.right>=P.animations.repeat.max||d===1||d===3?"left":"right";P.animations.repeat.left>=P.animations.repeat.max?P.animations.repeat.left=0:P.animations.repeat.right>=P.animations.repeat.max&&(P.animations.repeat.right=0);const i=oi(t==="right"?75:5,t==="right"?95:20),a=oi(30,45),n=oi(t==="right"?10:335,t==="right"?25:350),o=Mn.v4();return P.animations.items.push({uuid:o,top:a,left:i,rotate:n,size:e[oi(0,e.length-1)]}),P.animations.repeat[t==="right"?"left":"right"]=0,P.animations.repeat[t]++,setTimeout(()=>{P.animations.items=P.animations.items.filter(s=>s.uuid!==o)},800)},ws=()=>{const d=!P.sound.enable;Howler.mute(!d),P.sound.enable=d},xs=async()=>(await ir(),Jr.replace("/")),k1={__name:"content",setup(d){const{mutate:e,onError:t}=Qt(Dc,()=>({variables:{track_id:P.track.info.id,notes:P.tap.amount}})),i=it(),a=$(()=>i.state.drop_game),n=Xe("drop-game-loading"),o=Xe("app-modals"),s=$(()=>P.tracks.filter(v=>!v.next_timer).length),h=ye(document.visibilityState),r=ye();Ct(()=>P.track.seek,(v,b)=>{if(v-b>1)return P.track.info.manager.seek(b)});const l=()=>{h.value=document.visibilityState},c=$(()=>P.track.info.manager?`${P.track.info.manager.playing()?"Playing":"Paused"}: `+P.track.info.author+" - "+P.track.info.name:`Select track (${s.value})`),f=$(()=>{if(P.track.info.manager)return{total:p(P.track.duration),percent:Number(P.track.seek/P.track.duration*100).toFixed(2),current:p(P.track.seek)}}),u=$(()=>P.track.info.manager?P.paused?"Tap on the screen to continue the game":null:"Select a track and start the game"),g=()=>{if(!a.value.started)return Kt("game-select-track",{tracks:P.tracks,start:w1,setTimer:Kr})};Ct(h,async v=>{if(v==="hidden")return await xn()});const p=v=>{const b=Math.floor(v/60),w=Math.floor(v%60);return`${b.toString().padStart(2,"0")}:${w.toString().padStart(2,"0")}`};return Ct(r,async v=>{await b1(v),setTimeout(()=>{n.value.status=!1},500)}),t(v=>{$e("error",v.message)}),rt(()=>{P.graphql.mutate.end=e;const v=b=>{b.preventDefault(),b.stopPropagation()};document.addEventListener("keydown",v),document.addEventListener("contextmenu",v),document.addEventListener("touchstart",v),document.addEventListener("visibilitychange",l)}),oa(async()=>{await xn(),P.graphql.mutate.end=()=>{},document.removeEventListener("visibilitychange",l)}),(v,b)=>(z(),Z("div",{class:S({[x(Oe)["drop-game-body"]]:!0}),onClick:b[2]||(b[2]=(...w)=>x(ys)&&x(ys)(...w))},[x(n).status?Te("",!0):(z(),Z(It,{key:0},[x(P).starting.status?(z(),Ee(Hh,{key:0})):Te("",!0),L("div",{class:S({[x(Oe)["drop-game-header"]]:!0,[x(Oe)["drop-game-header-show-audio-player"]]:f.value})},[U(ee,{name:"drop-game-header-audio-player","animation-style":x(ai)},{default:Q(()=>[f.value?(z(),Z("div",{key:0,class:S({[x(Oe)["drop-game-header-audio-player"]]:!0})},[L("span",{class:S({[x(Oe)["current-time"]]:!0})},Se(f.value.current),3),L("span",{class:S({[x(Oe)["total-time"]]:!0})},Se(f.value.total),3),L("div",{class:S({[x(Oe)["progress-line"]]:!0}),style:Bt({width:`${f.value.percent}%`})},null,6)],2)):Te("",!0)]),_:1},8,["animation-style"]),L("div",{class:S({[x(Oe)["drop-game-header-main"]]:!0})},[U(ee,{name:"drop-game-header-main-button-home","animation-style":x(ai),"start-animation":!0},{default:Q(()=>[L("button",{type:"button",class:S({[x(Oe).button]:!0}),onClick:b[0]||(b[0]=(...w)=>x(xs)&&x(xs)(...w))},[U(Ne,{class:S({[x(Oe)["styled-icon"]]:!0}),name:"drop-game-back"},null,8,["class"]),L("span",{class:S({[x(Oe).name]:!0})},"Home",2)],2)]),_:1},8,["animation-style"]),L("div",{class:S({[x(Oe)["right-header"]]:!0})},[U(ee,{name:"drop-game-header-main-select-track","animation-style":x(ai),"start-animation":!0},{default:Q(()=>[L("button",{ref:x(o)["game-select-track"].button,type:"button",class:S({[x(Oe).button]:!0}),onClick:g},[U(Ne,{class:S({[x(Oe)["styled-icon"]]:!0}),name:"drop-game-note"},null,8,["class"]),L("span",{class:S({[x(Oe).name]:!0})},Se(c.value),3)],2)]),_:1},8,["animation-style"]),U(ee,{name:"drop-game-header-main-right-mini","animation-style":x(ai),"start-animation":!0},{default:Q(()=>[L("button",{type:"button",class:S({[x(Oe)["button-mini"]]:!0,[x(Oe)["sound-on"]]:x(P).sound.enable,[x(Oe)["sound-off"]]:!x(P).sound.enable}),onClick:b[1]||(b[1]=(...w)=>x(ws)&&x(ws)(...w))},[U(Ne,{class:S({[x(Oe)["styled-icon"]]:!0}),name:"drop-game-sound-"+(x(P).sound.enable?"on":"off")},null,8,["class","name"]),L("span",{class:S({[x(Oe).name]:!0})},Se(x(P).sound.enable?"Sound enabled":"Sound disabled"),3)],2)]),_:1},8,["animation-style"])],2)],2)],2),u.value?(z(),Ee(ee,{key:1,name:"drop-game-alert-content","animation-style":x(ai),"start-animation":!0},{default:Q(()=>[L("div",{class:S({[x(Oe)["drop-game-alert"]]:!0,[x(Oe)["drop-game-alert-scale"]]:x(P).alert.scale})},[L("div",{class:S({[x(Oe)["drop-game-alert-content"]]:!0})},Se(u.value),3)],2)]),_:1},8,["animation-style"])):Te("",!0)],64)),L("div",{class:S({[x(Oe)["drop-game-content"]]:!0})},[L("div",{class:S({[x(Oe).animation]:!0})},[x(n).status?Te("",!0):(z(),Z("div",{key:0,class:S({[x(Oe)["list-of-notes-animations"]]:!0})},[(z(!0),Z(It,null,gi(x(P).animations.items,w=>(z(),Ee(Zh,{key:w.uuid,size:w.size,left:w.left,top:w.top,rotate:w.rotate},null,8,["size","left","top","rotate"]))),128))],2)),x(n).status?Te("",!0):(z(),Ee(ee,{key:1,name:"drop-game-content-animation-tap-hint","animation-style":x(ai)},{default:Q(()=>[x(P).paused?(z(),Z("div",{key:0,class:S({[x(Oe)["animation-tap-hint"]]:!0})},[L("div",{class:S({[x(Oe)["tap-icon"]]:!0})},null,2)],2)):Te("",!0)]),_:1},8,["animation-style"])),U(ee,{name:"drop-game-content-animation-player","animation-style":x(ai),"start-animation":!0},{default:Q(()=>[L("div",{class:S({[x(Oe).player]:!0,[x(Oe)["player-loaded"]]:!x(n).status}),ref_key:"playerContainer",ref:r},null,2)]),_:1},8,["animation-style"])],2),x(n).status?Te("",!0):(z(),Ee(ee,{key:0,name:"drop-game-animation-balance","animation-style":x(ai),"start-animation":!0},{default:Q(()=>[L("div",{class:S({[x(Oe).balance]:!0})},[L("div",{class:S({[x(Oe)["balance-icon"]]:!0})},[U(Ne,{class:S({[x(Oe)["styled-icon"]]:!0}),name:"music-alt"},null,8,["class"])],2),L("span",{class:S({[x(Oe).amount]:!0})},Se(x(Vi)(x(P).tap.amount)),3)],2)]),_:1},8,["animation-style"]))],2)],2))}},A1="_loadingRotateCircleDecoration_9ki15_1",Ei={"loading-body":"_loading-body_9ki15_1","loading-circle":"_loading-circle_9ki15_6",loadingRotateCircleDecoration:A1,"loading-content":"_loading-content_9ki15_28","loading-logo":"_loading-logo_9ki15_37","loading-text":"_loading-text_9ki15_52","loading-small-text":"_loading-small-text_9ki15_59"},an={"loading-logo-enter-from":"_loading-logo-enter-from_12uej_1","loading-logo-leave-to":"_loading-logo-leave-to_12uej_2","loading-logo-enter-to":"_loading-logo-enter-to_12uej_6","loading-logo-leave-from":"_loading-logo-leave-from_12uej_7","loading-logo-enter-active":"_loading-logo-enter-active_12uej_11","loading-logo-leave-active":"_loading-logo-leave-active_12uej_12","loading-text-enter-from":"_loading-text-enter-from_12uej_16","loading-text-leave-to":"_loading-text-leave-to_12uej_17","loading-text-enter-to":"_loading-text-enter-to_12uej_21","loading-text-leave-from":"_loading-text-leave-from_12uej_22","loading-text-enter-active":"_loading-text-enter-active_12uej_26","loading-text-leave-active":"_loading-text-leave-active_12uej_27","loading-small-text-enter-from":"_loading-small-text-enter-from_12uej_31","loading-small-text-leave-to":"_loading-small-text-leave-to_12uej_32","loading-small-text-enter-to":"_loading-small-text-enter-to_12uej_36","loading-small-text-leave-from":"_loading-small-text-leave-from_12uej_37","loading-small-text-enter-active":"_loading-small-text-enter-active_12uej_41","loading-small-text-leave-active":"_loading-small-text-leave-active_12uej_42"},S1={__name:"loading",setup(d){const e=Xe("drop-game-loading"),t=ye("."),i=$(()=>{if(e.value.type===1)return"Search tracks";if(e.value.type===2){const o=P.tracks.filter(h=>h.loaded).length,s=P.tracks.length;return`Audio content (${o}/${s}) ${Math.trunc(o/s*100)}%`}return"Loading animations"}),a=()=>{setInterval(()=>{t.value.length===3?t.value=".":t.value+="."},250)},n=$(()=>{let o="Loading";return o+=t.value,o});return rt(()=>a()),(o,s)=>(z(),Z("div",{class:S({[x(Ei)["loading-body"]]:!0})},[L("div",{class:S({[x(Ei)["loading-circle"]]:!0})},null,2),L("div",{class:S({[x(Ei)["loading-content"]]:!0})},[U(ee,{name:"loading-logo","animation-style":x(an),"start-animation":!0},{default:Q(()=>[L("div",{class:S({[x(Ei)["loading-logo"]]:!0})},null,2)]),_:1},8,["animation-style"]),U(ee,{name:"loading-text","animation-style":x(an),"start-animation":!0},{default:Q(()=>[L("div",{class:S({[x(Ei)["loading-text"]]:!0})},Se(n.value),3)]),_:1},8,["animation-style"]),U(ee,{name:"loading-small-text","animation-style":x(an),"start-animation":!0},{default:Q(()=>[L("div",{class:S({[x(Ei)["loading-small-text"]]:!0})},Se(i.value),3)]),_:1},8,["animation-style"])],2)],2))}},Cs={"drop-game":"_drop-game_1vagt_1","drop-game-is-loading":"_drop-game-is-loading_1vagt_24"},E1={"show-drop-game-enter-from":"_show-drop-game-enter-from_1kay7_1","show-drop-game-leave-to":"_show-drop-game-leave-to_1kay7_2","show-drop-game-enter-to":"_show-drop-game-enter-to_1kay7_5","show-drop-game-leave-from":"_show-drop-game-leave-from_1kay7_6","show-drop-game-enter-active":"_show-drop-game-enter-active_1kay7_9","show-drop-game-leave-active":"_show-drop-game-leave-active_1kay7_10"},M1={__name:"main",setup(d){const e=di(),t=it(),i=ye({status:!0,type:1}),a=ye();st("drop-game-loading",i);const{load:n,onError:o}=Sn(Vc,{},{fetchPolicy:"no-cache"}),s=async()=>{const r=await n();if(!r||!r.dropGameTracks)return;const l=r.dropGameTracks;P.tracks=l.map(c=>({...c,manager:null,loaded:!1})),Howler.mute(!1),await h(),a.value=setInterval(()=>{P.tracks.length===P.tracks.filter(c=>c.loaded).length&&(clearInterval(a.value),i.value.type=3)},300)},h=async()=>{i.value.type=2;for(const r in P.tracks){const l=P.tracks[r];P.tracks[r].manager=new Mo.Howl({src:l.source,autoplay:!1,preload:!0,volume:1,html5:!0,format:["mp3","aac"],onload:()=>{const c=new Image;c.src=l.image,c.onload=()=>{P.tracks[r].loaded=!0},c.onerror=()=>(clearInterval(a.value),e.replace("/"))},onloaderror:()=>(clearInterval(a.value),e.replace("/"))})}};return o(r=>{t.dispatch("error/setError",{status:!0,title:"Error",description:r.message,button:{type:"success",name:"Refresh app",function:"reloadApp"}})}),rt(()=>{navigator&&navigator.mediaSession&&(navigator.mediaSession.setActionHandler("play",()=>{}),navigator.mediaSession.setActionHandler("pause",()=>{})),jh(),s()}),oa(()=>{ir(),a.value&&clearInterval(a.value),P.tracks=[]}),(r,l)=>(z(),Ee(ee,{name:"show-drop-game","animation-style":x(E1),"start-animation":!0},{default:Q(()=>[L("div",{class:S({[x(Cs)["drop-game"]]:!0,[x(Cs)["drop-game-is-loading"]]:i.value.status})},[i.value.status?(z(),Ee(S1,{key:0})):Te("",!0),!i.value.status||i.value.type>2?(z(),Ee(k1,{key:1})):Te("",!0)],2)]),_:1},8,["animation-style"]))}},T1=[{path:"/",name:"home",component:Ac},{path:"/tasks",name:"tasks",component:ih},{path:"/band",name:"band",component:Yh},{path:"/wallet",name:"wallet",component:Xh},{path:"/game",name:"game",component:M1},{path:"/:catchAll(.*)",redirect:"/"}],Jr=cc({history:Yl(),routes:T1,mode:"history"}),I1="_balance_v4ag1_17",L1="_blocks_v4ag1_54",R1="_text_v4ag1_81",bt={"game-header":"_game-header_v4ag1_1","game-header-content":"_game-header-content_v4ag1_8",balance:I1,"balance-icon":"_balance-icon_v4ag1_22","styled-icon":"_styled-icon_v4ag1_34","balance-info":"_balance-info_v4ag1_38","balance-name":"_balance-name_v4ag1_44","balance-amount":"_balance-amount_v4ag1_49",blocks:L1,"new-tasks":"_new-tasks_v4ag1_60",text:R1},B1={"header-enter-from":"_header-enter-from_1pjme_1","header-leave-to":"_header-leave-to_1pjme_2","header-enter-to":"_header-enter-to_1pjme_6","header-leave-from":"_header-leave-from_1pjme_7","header-enter-active":"_header-enter-active_1pjme_11","header-leave-active":"_header-leave-active_1pjme_12"},F1={__name:"header",setup(d){const e=it(),t=$(()=>e.state.user),i=$(()=>e.state.components.header),a=di(),n=()=>a.push("/tasks");return(o,s)=>(z(),Ee(ee,{name:"header","animation-style":x(B1),"start-animation":!0},{default:Q(()=>[i.value.visible?(z(),Z("div",{key:0,class:S({[x(bt)["game-header"]]:!0})},[L("div",{class:S({[x(bt)["game-header-content"]]:!0})},[L("div",{class:S({[x(bt).balance]:!0})},[L("div",{class:S({[x(bt)["balance-icon"]]:!0})},[U(Ne,{class:S({[x(bt)["styled-icon"]]:!0}),name:"music-alt"},null,8,["class"])],2),L("div",{class:S({[x(bt)["balance-info"]]:!0})},[L("div",{class:S({[x(bt)["balance-name"]]:!0})}," Balance ",2),L("div",{class:S({[x(bt)["balance-amount"]]:!0})},Se(x(Vi)(t.value.balance)),3)],2)],2),L("div",{class:S({[x(bt).blocks]:!0})},[L("button",{type:"button",class:S({[x(bt)["new-tasks"]]:!0,[x(ft)["border-gradient"]]:!0}),onClick:n},[U(Ne,{class:S({[x(bt)["styled-icon"]]:!0}),name:"bottom-menu-tasks"},null,8,["class"]),L("div",{class:S({[x(bt).text]:!0})}," New tasks are available ",2)],2)],2)],2)],2)):Te("",!0)]),_:1},8,["animation-style"]))}},P1="_item_1eve3_1",O1="_title_1eve3_18",Y1="_active_1eve3_26",ga={item:P1,"styled-icon":"_styled-icon_1eve3_11",title:O1,active:Y1},N1=["id"],V1=["stop-color"],D1=["stop-color"],pa={__name:"item",props:{icon:String,title:String,active:{type:Boolean,required:!1,default:!1},tap:Function},setup(d){const e=d,t=Mn.v1();return(i,a)=>(z(),Z("button",{type:"button",class:S({[x(ga).item]:!0,[x(ga).active]:e.active}),onClick:a[0]||(a[0]=(...n)=>e.tap&&e.tap(...n))},[U(Ne,{class:S({[x(ga)["styled-icon"]]:!0}),name:"bottom-menu-"+e.icon,"custom-fill":"defs-bottom-menu-item-color-"+x(t)},{default:Q(()=>[L("defs",null,[L("linearGradient",{id:"defs-bottom-menu-item-color-"+x(t),x1:"10.5013",y1:"1.66666",x2:"10.5013",y2:"18.3333",gradientUnits:"userSpaceOnUse"},[L("stop",{"stop-color":e.active?"#00CDD3":"#fff"},null,8,V1),L("stop",{offset:"1","stop-color":e.active?"#018297":"#fff"},null,8,D1)],8,N1)])]),_:1},8,["class","name","custom-fill"]),L("span",{class:S({[x(ga).title]:!0})},Se(e.title),3)],2))}},ks={"bottom-menu":"_bottom-menu_1nzpl_1","menu-items":"_menu-items_1nzpl_11"},X1={"bottom-menu-enter-from":"_bottom-menu-enter-from_1whry_1","bottom-menu-leave-to":"_bottom-menu-leave-to_1whry_2","bottom-menu-enter-to":"_bottom-menu-enter-to_1whry_6","bottom-menu-leave-from":"_bottom-menu-leave-from_1whry_7","bottom-menu-enter-active":"_bottom-menu-enter-active_1whry_11","bottom-menu-leave-active":"_bottom-menu-leave-active_1whry_12"},z1={__name:"bottom-menu",setup(d){const e=Na(),t=di(),i=it(),a=$(()=>i.state.components.menu),n=$(()=>i.state.modal),o=ye(!1),s=$(()=>e.path==="/game");return rt(()=>o.value=!0),(h,r)=>(z(),Ee(ee,{name:"bottom-menu","animation-style":x(X1)},{default:Q(()=>[!s.value&&!n.value.active&&a.value.visible&&o.value?(z(),Z("div",{key:0,class:S({[x(ks)["bottom-menu"]]:!0})},[L("div",{class:S({[x(ks)["menu-items"]]:!0})},[U(pa,{icon:"home",title:"Home",tap:()=>x(t).push("/"),active:x(e).path==="/"},null,8,["tap","active"]),U(pa,{icon:"tasks",title:"Tasks",tap:()=>x(t).push("/tasks"),active:x(e).path==="/tasks"},null,8,["tap","active"]),U(pa,{icon:"band",title:"Band",tap:()=>x(t).push("/band"),active:x(e).path==="/band"},null,8,["tap","active"]),U(pa,{icon:"wallet",title:"Wallet",tap:()=>x(t).push("/wallet"),active:x(e).path==="/wallet"},null,8,["tap","active"])],2)],2)):Te("",!0)]),_:1},8,["animation-style"]))}},U1={"game-container":"_game-container_9hzh9_2","game-content":"_game-content_9hzh9_7","game-is-started":"_game-is-started_9hzh9_10","game-disabled-scroll":"_game-disabled-scroll_9hzh9_14"},Yn=(d,e)=>{const t=d.__vccOpts||d;for(const[i,a]of e)t[i]=a;return t},q1={__name:"layout",setup(d){const e=ye();st("layout-scroll",{top:()=>{e.value.scrollTop=0},bottom:()=>{e.value.scrollTop=9999}});const t=Na(),i=$(()=>t.path==="/"||t.path==="/wallet"),a=$(()=>t.path==="/game");return Ct(()=>t.path,()=>{e.value.scrollTop=0}),(n,o)=>{const s=oo("router-view");return z(),Z("div",{class:S({[n.$style["game-container"]]:!0,[n.$style["game-is-started"]]:a.value,[n.$style["game-disabled-scroll"]]:i.value}),ref_key:"gameContainer",ref:e},[U(F1),L("div",{class:S({[n.$style["game-content"]]:!0})},[U(s)],2),U(z1)],2)}}},G1={$style:U1},j1=Yn(q1,[["__cssModules",G1]]),nn={"loading-logo":"_loading-logo_eg4jz_1","loading-text":"_loading-text_eg4jz_16","loading-small-text":"_loading-small-text_eg4jz_23"},H1="_loadingRotateCircleDecoration_e0xzz_1",$t={"loading-container":"_loading-container_e0xzz_1","loading-content":"_loading-content_e0xzz_20","loading-circle":"_loading-circle_e0xzz_32",loadingRotateCircleDecoration:H1,"loading-circle-animation-stop":"_loading-circle-animation-stop_e0xzz_53","loading-circle-animation-not-loading":"_loading-circle-animation-not-loading_e0xzz_56","loading-body":"_loading-body_e0xzz_62"},sn={"loading-logo-enter-from":"_loading-logo-enter-from_pwcg2_1","loading-logo-leave-to":"_loading-logo-leave-to_pwcg2_2","loading-logo-enter-to":"_loading-logo-enter-to_pwcg2_6","loading-logo-leave-from":"_loading-logo-leave-from_pwcg2_7","loading-logo-enter-active":"_loading-logo-enter-active_pwcg2_11","loading-logo-leave-active":"_loading-logo-leave-active_pwcg2_12","loading-text-enter-from":"_loading-text-enter-from_pwcg2_16","loading-text-leave-to":"_loading-text-leave-to_pwcg2_17","loading-text-enter-to":"_loading-text-enter-to_pwcg2_21","loading-text-leave-from":"_loading-text-leave-from_pwcg2_22","loading-text-enter-active":"_loading-text-enter-active_pwcg2_26","loading-text-leave-active":"_loading-text-leave-active_pwcg2_27","loading-small-text-enter-from":"_loading-small-text-enter-from_pwcg2_31","loading-small-text-leave-to":"_loading-small-text-leave-to_pwcg2_32","loading-small-text-enter-to":"_loading-small-text-enter-to_pwcg2_36","loading-small-text-leave-from":"_loading-small-text-leave-from_pwcg2_37","loading-small-text-enter-active":"_loading-small-text-enter-active_pwcg2_41","loading-small-text-leave-active":"_loading-small-text-leave-active_pwcg2_42"},W1={__name:"loading",props:{state:Number},setup(d){const e=Xe("app-images"),t=d,i=ye("."),a=()=>{setInterval(()=>{i.value.length===3?i.value=".":i.value+="."},250)},n=$(()=>{let s="Loading";return s+=i.value,s}),o=$(()=>{if(t.state===1)return"Initialize app";if(t.state===2){const s=e.value.length,h=e.value.filter(r=>r.loaded).length;return`Let's get the pictures (${h}/${s}) ${Math.trunc(h/s*100)}%`}if(t.state===3)return"We're running your information"});return rt(()=>a()),(s,h)=>(z(),Z("div",{class:S({[x($t)["loading-body"]]:!0})},[U(ee,{name:"loading-logo","animation-style":x(sn),"start-animation":!0},{default:Q(()=>[L("div",{class:S({[x(nn)["loading-logo"]]:!0})},null,2)]),_:1},8,["animation-style"]),U(ee,{name:"loading-text","animation-style":x(sn),"start-animation":!0},{default:Q(()=>[L("div",{class:S({[x(nn)["loading-text"]]:!0})},Se(n.value),3)]),_:1},8,["animation-style"]),U(ee,{name:"loading-small-text","animation-style":x(sn),"start-animation":!0},{default:Q(()=>[L("div",{class:S({[x(nn)["loading-small-text"]]:!0})},Se(o.value),3)]),_:1},8,["animation-style"])],2))}},Ji={"loading-logo":"_loading-logo_1kepf_1","loading-text":"_loading-text_1kepf_16","loading-title":"_loading-title_1kepf_24","loading-description":"_loading-description_1kepf_30","loading-bottom":"_loading-bottom_1kepf_36"},rn={"loading-logo-enter-from":"_loading-logo-enter-from_34xjw_1","loading-logo-leave-to":"_loading-logo-leave-to_34xjw_2","loading-logo-enter-to":"_loading-logo-enter-to_34xjw_6","loading-logo-leave-from":"_loading-logo-leave-from_34xjw_7","loading-logo-enter-active":"_loading-logo-enter-active_34xjw_11","loading-logo-leave-active":"_loading-logo-leave-active_34xjw_12","loading-text-enter-from":"_loading-text-enter-from_34xjw_16","loading-text-leave-to":"_loading-text-leave-to_34xjw_17","loading-text-enter-to":"_loading-text-enter-to_34xjw_21","loading-text-leave-from":"_loading-text-leave-from_34xjw_22","loading-text-enter-active":"_loading-text-enter-active_34xjw_26","loading-text-leave-active":"_loading-text-leave-active_34xjw_27","loading-bottom-enter-from":"_loading-bottom-enter-from_34xjw_31","loading-bottom-leave-to":"_loading-bottom-leave-to_34xjw_32","loading-bottom-enter-to":"_loading-bottom-enter-to_34xjw_36","loading-bottom-leave-from":"_loading-bottom-leave-from_34xjw_37","loading-bottom-enter-active":"_loading-bottom-enter-active_34xjw_41","loading-bottom-leave-active":"_loading-bottom-leave-active_34xjw_42"},Z1={__name:"welcome",setup(d){const e=Xe("change-loading-state");return(t,i)=>(z(),Z("div",{class:S({[x($t)["loading-body"]]:!0})},[U(ee,{name:"loading-logo","animation-style":x(rn),"start-animation":!0},{default:Q(()=>[L("div",{class:S({[x(Ji)["loading-logo"]]:!0})},null,2)]),_:1},8,["animation-style"]),U(ee,{name:"loading-text","animation-style":x(rn),"start-animation":!0},{default:Q(()=>[L("div",{class:S({[x(Ji)["loading-text"]]:!0})},[L("div",{class:S({[x(Ji)["loading-title"]]:!0})},"Welcome to Marshell",2),L("div",{class:S({[x(Ji)["loading-description"]]:!0})},"Tap, listen to and earn",2)],2)]),_:1},8,["animation-style"]),U(ee,{name:"loading-bottom","animation-style":x(rn),"start-animation":!0},{default:Q(()=>[L("div",{class:S({[x(Ji)["loading-bottom"]]:!0})},[U(Jt,{name:"Create your band",onClick:i[0]||(i[0]=a=>x(e)("create"))})],2)]),_:1},8,["animation-style"])],2))}},$1=d=>{let e="";const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",i=t.length;let a=0;for(;a<d;)e+=t.charAt(Math.floor(Math.random()*i)),a+=1;return e},K1=d=>/^data:image\/(jpeg|png);base64,([A-Za-z0-9+/]{4})*([A-Za-z0-9+/]{3}=|[A-Za-z0-9+/]{2}==)?$/.test(d),Q1="_name_9bgz7_63",We={"loading-text":"_loading-text_9bgz7_1","loading-title":"_loading-title_9bgz7_10","loading-description":"_loading-description_9bgz7_22","loading-avatar":"_loading-avatar_9bgz7_28","avatar-body":"_avatar-body_9bgz7_34","avatar-img":"_avatar-img_9bgz7_40","avatar-edit":"_avatar-edit_9bgz7_49","styled-icon":"_styled-icon_9bgz7_59",name:Q1,"loading-bottom":"_loading-bottom_9bgz7_69","loading-input":"_loading-input_9bgz7_75","input-label":"_input-label_9bgz7_80","style-input":"_style-input_9bgz7_85","error-input":"_error-input_9bgz7_97","checking-input":"_checking-input_9bgz7_97","input-text":"_input-text_9bgz7_106","checking-text":"_checking-text_9bgz7_111","error-text":"_error-text_9bgz7_114","input-loader":"_input-loader_9bgz7_140"},va={"loading-text-enter-from":"_loading-text-enter-from_ou62r_1","loading-text-leave-to":"_loading-text-leave-to_ou62r_2","loading-text-enter-to":"_loading-text-enter-to_ou62r_6","loading-text-leave-from":"_loading-text-leave-from_ou62r_7","loading-text-enter-active":"_loading-text-enter-active_ou62r_11","loading-text-leave-active":"_loading-text-leave-active_ou62r_12","loading-avatar-enter-from":"_loading-avatar-enter-from_ou62r_16","loading-avatar-leave-to":"_loading-avatar-leave-to_ou62r_17","loading-avatar-enter-to":"_loading-avatar-enter-to_ou62r_21","loading-avatar-leave-from":"_loading-avatar-leave-from_ou62r_22","loading-avatar-enter-active":"_loading-avatar-enter-active_ou62r_26","loading-avatar-leave-active":"_loading-avatar-leave-active_ou62r_27","loading-bottom-enter-from":"_loading-bottom-enter-from_ou62r_31","loading-bottom-leave-to":"_loading-bottom-leave-to_ou62r_32","loading-bottom-enter-to":"_loading-bottom-enter-to_ou62r_36","loading-bottom-leave-from":"_loading-bottom-leave-from_ou62r_37","loading-bottom-enter-active":"_loading-bottom-enter-active_ou62r_41","loading-bottom-leave-active":"_loading-bottom-leave-active_ou62r_42","loading-input-enter-from":"_loading-input-enter-from_ou62r_46","loading-input-leave-to":"_loading-input-leave-to_ou62r_47","loading-input-enter-to":"_loading-input-enter-to_ou62r_51","loading-input-leave-from":"_loading-input-leave-from_ou62r_52","loading-input-enter-active":"_loading-input-enter-active_ou62r_56","loading-input-leave-active":"_loading-input-leave-active_ou62r_57"},J1=["disabled"],eu=["disabled","value"],Mi=5,_a=14,tu={__name:"create",props:{bandName:String},setup(d){const e=d,t=di(),i=Pa(),a=$(()=>{const A=e.bandName.replace(/[^a-zA-Z0-9]/g,"").substring(0,14),E=A.length<Mi?Mi-A.length+oi(1,3):0;return A+$1(E)}),n=it(),o=$(()=>n.state.init),s=$(()=>({src:o.value.player_register.avatar,default:o.value.player_register.avatar===o.value.default_avatar})),h=ye({bandName:{loading:!1,error:{status:!1,message:""}}}),r=ye(null),l=ye(a.value),c=ye(!1),f=Xe("app-modals"),u=Xe("loading-initialize-user"),g=Xe("change-loading-circle-animation-status"),p=Xe("loading-ref-code");Ct(c,A=>g(A));const{mutate:v,onError:b}=Qt(Ic,()=>({variables:{bandName:l.value}})),{mutate:w,onError:_}=Qt(Lc,()=>({variables:{initData:i.initData,bandName:l.value,avatar:s.value.src,refCode:p}}));Ct(l,To(A=>y(A),300));const y=async A=>{if(h.value.bandName.loading)return;if(h.value.bandName.loading||(h.value.bandName.error.status=!1,h.value.bandName.error.message="",h.value.bandName.loading=!0),A.length<Mi)return k("Bandname cannot be less than "+Mi+" characters long");if(A.length>_a)return k("Bandname cannot be more than "+_a+" characters long");if(/[^a-zA-Z0-9]/.test(A))return k("Bandname must contain only English letters and numbers");const E=await v();if(!(!E||!E.data||!E.data.checkingAvailabilityBandName))return setTimeout(()=>{h.value.bandName.loading=!1},250)},k=A=>{h.value.bandName.loading=!1,h.value.bandName.error.message=A,h.value.bandName.error.status=!0},C=async()=>{const A=l.value,E=s.value;if(A.length<Mi)return k("Bandname cannot be less than "+Mi+" characters long");if(A.length>_a)return k("Bandname cannot be more than "+_a+" characters long");if(/[^a-zA-Z0-9]/.test(A))return k("Bandname must contain only English letters and numbers");if(!E.default&&!K1(E.src))return $e("error","Bandname must contain only English letters and numbers");c.value=!0;const M=await w();if(!(!M||!M.data||!M.data.createBand))return await t.push({query:{}}),await u()};return b(A=>k(A.message)),_(A=>(g(!1),c.value=!1,$e("error",A.message))),rt(()=>y(l.value)),(A,E)=>(z(),Z("div",{class:S({[x($t)["loading-body"]]:!0})},[U(ee,{name:"loading-text","animation-style":x(va),"start-animation":!0},{default:Q(()=>[L("div",{class:S({[x(We)["loading-text"]]:!0})},[L("div",{class:S({[x(We)["loading-title"]]:!0})},E[2]||(E[2]=[L("span",null,"Rock is not dead!",-1),L("span",null,"Create your own band",-1)]),2),L("div",{class:S({[x(We)["loading-description"]]:!0})},"Tap, listen to and earn",2)],2)]),_:1},8,["animation-style"]),U(ee,{name:"loading-avatar","animation-style":x(va),"start-animation":!0},{default:Q(()=>[L("div",{class:S({[x(We)["loading-avatar"]]:!0})},[L("div",{class:S({[x(We)["avatar-body"]]:!0})},[L("div",{class:S({[x(We)["avatar-img"]]:!0}),style:Bt({"background-image":`url(${o.value.player_register.avatar}), url(${x(la)})`})},null,6)],2),L("button",{type:"button",disabled:c.value||h.value.bandName.loading,ref:x(f)["edit-avatar"].button,class:S({[x(We)["avatar-edit"]]:!0}),onClick:E[0]||(E[0]=M=>x(Kt)("edit-avatar"))},[U(Ne,{class:S({[x(We)["styled-icon"]]:!0}),name:"avatar-pen-edit"},null,8,["class"]),L("span",{class:S({[x(We).name]:!0})},"Edit",2)],10,J1)],2)]),_:1},8,["animation-style"]),U(ee,{name:"loading-input","animation-style":x(va),"start-animation":!0},{default:Q(()=>[L("div",{class:S({[x(We)["loading-input"]]:!0})},[L("label",{class:S({[x(We)["input-label"]]:!0})},"Bandname",2),L("div",{class:S({[x(We)["style-input"]]:!0,[x(We)["checking-input"]]:h.value.bandName.loading,[x(We)["error-input"]]:h.value.bandName.error.status})},[lo(L("input",{type:"text",ref_key:"inputRef",ref:r,"onUpdate:modelValue":E[1]||(E[1]=M=>l.value=M),placeholder:"Make up a bandname",disabled:c.value||h.value.bandName.loading,value:l.value},null,8,eu),[[co,l.value]]),h.value.bandName.loading?(z(),Ee(Di,{key:1,class:S({[x(We)["input-loader"]]:!0}),width:18,height:18},null,8,["class"])):(z(),Ee(Ne,{key:0,class:S({[x(We)["styled-icon"]]:!0}),name:"input-loading-"+(h.value.bandName.error.status?"error":"success")},null,8,["class","name"]))],2),L("div",{class:S({[x(We)["input-text"]]:!0,[x(We)["checking-text"]]:h.value.bandName.loading,[x(We)["error-text"]]:h.value.bandName.error.status})},Se(h.value.bandName.loading?"Checking Bandname for availability...":h.value.bandName.error.status?h.value.bandName.error.message:"Cool, thatâ€™s available!"),3)],2)]),_:1},8,["animation-style"]),U(ee,{name:"loading-bottom","animation-style":x(va),"start-animation":!0},{default:Q(()=>[L("div",{class:S({[x(We)["loading-bottom"]]:!0})},[U(Jt,{icon:c.value?null:"rock",name:c.value?"Chill a sec, downloadâ€™s in progress..":"Letâ€™s rock",disabled:c.value||h.value.bandName.loading,onClick:C},null,8,["icon","name","disabled"])],2)]),_:1},8,["animation-style"])],2))}},iu="_amount_a6nuj_54",au="_name_a6nuj_61",Yt={"loading-daily-content":"_loading-daily-content_a6nuj_1","loading-daily-icon":"_loading-daily-icon_a6nuj_8","loading-daily-title":"_loading-daily-title_a6nuj_17","loading-daily-amount":"_loading-daily-amount_a6nuj_24","token-icon":"_token-icon_a6nuj_38","styled-icon":"_styled-icon_a6nuj_50",amount:iu,name:au,"loading-bottom":"_loading-bottom_a6nuj_69","loading-bottom-info":"_loading-bottom-info_a6nuj_79"},ba={"loading-daily-icon-enter-from":"_loading-daily-icon-enter-from_1s6vt_1","loading-daily-icon-leave-to":"_loading-daily-icon-leave-to_1s6vt_2","loading-daily-icon-enter-to":"_loading-daily-icon-enter-to_1s6vt_6","loading-daily-icon-leave-from":"_loading-daily-icon-leave-from_1s6vt_7","loading-daily-icon-enter-active":"_loading-daily-icon-enter-active_1s6vt_11","loading-daily-icon-leave-active":"_loading-daily-icon-leave-active_1s6vt_12","loading-daily-title-enter-from":"_loading-daily-title-enter-from_1s6vt_16","loading-daily-title-leave-to":"_loading-daily-title-leave-to_1s6vt_17","loading-daily-title-enter-to":"_loading-daily-title-enter-to_1s6vt_21","loading-daily-title-leave-from":"_loading-daily-title-leave-from_1s6vt_22","loading-daily-title-enter-active":"_loading-daily-title-enter-active_1s6vt_26","loading-daily-title-leave-active":"_loading-daily-title-leave-active_1s6vt_27","loading-daily-amount-enter-from":"_loading-daily-amount-enter-from_1s6vt_31","loading-daily-amount-leave-to":"_loading-daily-amount-leave-to_1s6vt_32","loading-daily-amount-enter-to":"_loading-daily-amount-enter-to_1s6vt_36","loading-daily-amount-leave-from":"_loading-daily-amount-leave-from_1s6vt_37","loading-daily-amount-enter-active":"_loading-daily-amount-enter-active_1s6vt_41","loading-daily-amount-leave-active":"_loading-daily-amount-leave-active_1s6vt_42","loading-bottom-enter-from":"_loading-bottom-enter-from_1s6vt_46","loading-bottom-leave-to":"_loading-bottom-leave-to_1s6vt_47","loading-bottom-enter-to":"_loading-bottom-enter-to_1s6vt_51","loading-bottom-leave-from":"_loading-bottom-leave-from_1s6vt_52","loading-bottom-enter-active":"_loading-bottom-enter-active_1s6vt_56","loading-bottom-leave-active":"_loading-bottom-leave-active_1s6vt_57"},nu={__name:"daily",setup(d){const{mutate:e,onError:t}=Qt(Bc,()=>({variables:{}})),i=it(),a=$(()=>i.state.user.available_daily_rewards),n=ye(!1),o=async()=>{n.value=!0;const s=await e();if(!s||!s.data|!s.data.claimDailyRewards)return;const h=s.data.claimDailyRewards;return await i.dispatch("user/setUserBalance",h.balance),await i.dispatch("preloader/setPreloader",!1),await i.dispatch("user/setUserAvailableDailyRewards",{status:!1,amount:0})};return t(s=>(n.value=!1,$e("error",s.message))),(s,h)=>(z(),Z("div",{class:S({[x($t)["loading-body"]]:!0})},[L("div",{class:S({[x(Yt)["loading-daily-content"]]:!0})},[U(ee,{name:"loading-daily-icon","animation-style":x(ba),"start-animation":!0},{default:Q(()=>[L("div",{class:S({[x(Yt)["loading-daily-icon"]]:!0})},null,2)]),_:1},8,["animation-style"]),U(ee,{name:"loading-daily-title","animation-style":x(ba),"start-animation":!0},{default:Q(()=>[L("div",{class:S({[x(Yt)["loading-daily-title"]]:!0})},"Daily band rewards",2)]),_:1},8,["animation-style"]),U(ee,{name:"loading-daily-amount","animation-style":x(ba),"start-animation":!0},{default:Q(()=>[L("div",{class:S({[x(Yt)["loading-daily-amount"]]:!0})},[L("div",{class:S({[x(Yt)["token-icon"]]:!0})},[U(Ne,{class:S({[x(Yt)["styled-icon"]]:!0}),name:"music-alt"},null,8,["class"])],2),L("div",{class:S({[x(Yt).amount]:!0})},Se(a.value.amount),3),L("div",{class:S({[x(Yt).name]:!0})},"Marshell points",2)],2)]),_:1},8,["animation-style"])],2),U(ee,{name:"loading-bottom","animation-style":x(ba),"start-animation":!0},{default:Q(()=>[L("div",{class:S({[x(Yt)["loading-bottom"]]:!0})},[L("div",{class:S({[x(Yt)["loading-bottom-info"]]:!0})},"Check-in every day to get x2 points",2),U(Jt,{icon:"rock",name:"Letâ€™s rock",disabled:n.value,onClick:o},null,8,["disabled"])],2)]),_:1},8,["animation-style"])],2))}},su=()=>{const d=new URLSearchParams(window.location.search);return Object.fromEntries(d.entries())},ru={__name:"main",setup(d){const e=Pa(),{mutate:t,onError:i}=Qt(Tc,()=>({variables:{initData:e.initData}})),{mutate:a,onError:n}=Qt(Rc,()=>({variables:{initData:e.initData}})),o=it(),s=su(),h=s.affiliate?s.affiliate:null,r=ye("loading"),l=ye(1),c=ye(),f=ye(!0),u=ye(null),g=ye(null),p=Xe("app-images"),v=C=>{r.value==="welcome"&&C!=="create"||r.value==="create"&&C!=="daily"||(r.value=C)},b=async()=>{const C=await a();if(!C||!C.data||!C.data.initUser)return;const A=C.data.initUser,E=A.avatar;l.value=3,y(E),g.value=setInterval(()=>{if(p.value.length===p.value.filter(M=>M.loaded).length)return clearInterval(g.value),o.dispatch("user/setUser",A),A.available_daily_rewards.status?(f.value=!1,v("daily")):o.dispatch("preloader/setPreloader",!1)},300)},w=async()=>{const C=await t();if(!C||!C.data||!C.data.initGame)return;const A=C.data.initGame;await o.dispatch("init/setInitDefaultAvatar",A.default_avatar),_(),u.value=setInterval(()=>{p.value.length===p.value.filter(E=>E.loaded).length&&(clearInterval(u.value),A.is_register?setTimeout(()=>b(),300):(o.dispatch("user/setTemporaryAuthToken",A.temporary_auth_token),o.dispatch("init/setInitPlayerRegisterAvatar",A.avatar),c.value=A.name,r.value="welcome",f.value=!1))},300)},_=()=>{l.value=2;for(const C in p.value){const A=p.value[C],E=new Image;E.src=A.component,E.onload=()=>{p.value[C].loaded=!0},E.onerror=()=>(clearInterval(u.value),k())}},y=C=>{const A=new Image;A.src=C,A.onload=()=>!0,A.onerror=()=>(clearInterval(g.value),!1)};st("loading-ref-code",h),st("loading-initialize-user",b),st("change-loading-state",v),st("change-loading-circle-animation-status",C=>{f.value=C});const k=()=>o.dispatch("error/setError",{status:!0,title:"Error",description:"There was an error on our server side",button:{type:"success",name:"Refresh app",function:"reloadApp"}});return i(()=>k()),n(()=>k()),rt(()=>w()),(C,A)=>(z(),Z("div",{class:S({[x($t)["loading-container"]]:!0})},[L("div",{class:S({[x($t)["loading-content"]]:!0})},[L("div",{class:S({[x($t)["loading-circle"]]:!0,[x($t)["loading-circle-animation-not-loading"]]:r.value!=="loading",[x($t)["loading-circle-animation-stop"]]:!f.value})},null,2),r.value==="loading"?(z(),Ee(W1,{key:0,state:l.value},null,8,["state"])):r.value==="welcome"?(z(),Ee(Z1,{key:1})):r.value==="create"?(z(),Ee(tu,{key:2,bandName:c.value},null,8,["bandName"])):r.value==="daily"?(z(),Ee(nu,{key:3})):Te("",!0)],2)],2))}},ou="_info_1ayql_25",lu="_title_1ayql_29",cu="_description_1ayql_36",ni={"game-error":"_game-error_1ayql_1","game-error-content":"_game-error-content_1ayql_9","styled-icon":"_styled-icon_1ayql_21",info:ou,title:lu,description:cu,"error-btn":"_error-btn_1ayql_43","error-btn-success":"_error-btn-success_1ayql_54","border-gradient":"_border-gradient_1ayql_57","error-btn-fail":"_error-btn-fail_1ayql_61"},hu={"error-enter-from":"_error-enter-from_mt4zr_1","error-leave-to":"_error-leave-to_mt4zr_2","error-enter-to":"_error-enter-to_mt4zr_6","error-leave-from":"_error-leave-from_mt4zr_7","error-enter-active":"_error-enter-active_mt4zr_11","error-leave-active":"_error-leave-active_mt4zr_12"},du={__name:"error",props:{icon:{type:String,required:!1,default:"error"},title:String,description:String,button:Object},setup(d){const e=d,t=Pa(),i=()=>window.location.reload(),a=()=>t.close(),n=()=>{if(e.button.function==="reloadApp")return i();if(e.button.function==="closeApp")return a()};return(o,s)=>(z(),Ee(ee,{name:"error","animation-style":x(hu),"start-animation":!0},{default:Q(()=>[L("div",{class:S({[x(ni)["game-error"]]:!0})},[L("div",{class:S({[x(ni)["game-error-content"]]:!0})},[U(Ne,{class:S({[x(ni)["styled-icon"]]:!0}),name:e.icon},null,8,["class","name"]),L("div",{class:S({[x(ni).info]:!0})},[L("div",{class:S({[x(ni).title]:!0})},Se(e.title),3),L("div",{class:S({[x(ni).description]:!0})},Se(e.description),3)],2),L("button",{type:"button",class:S({[x(ni)["error-btn"]]:!0,[x(ni)["error-btn-"+e.button.type]]:!0,[x(ft)["border-gradient"]]:e.button.type==="success"}),onClick:n},Se(e.button.name),3)],2)],2)]),_:1},8,["animation-style"]))}},uu={"over-error":"_over-error_1y5nc_1"},mu={__name:"over-error",setup(d){const e=it(),t=$(()=>e.state.error);return(i,a)=>(z(),Z("div",{class:S({[x(uu)["over-error"]]:!0})},[U(du,{title:t.value.title,button:t.value.button,description:t.value.description},null,8,["title","button","description"])],2))}},fu="_notification_1bcqd_1",gu="_title_1bcqd_53",pu="_message_1bcqd_60",yt={notification:fu,"notification-body":"_notification-body_1bcqd_9","notification-content":"_notification-content_1bcqd_15","notification-icon":"_notification-icon_1bcqd_21","styled-icon":"_styled-icon_1bcqd_30","notification-info":"_notification-info_1bcqd_33","notification-error":"_notification-error_1bcqd_41","notification-warning":"_notification-warning_1bcqd_47","notification-success":"_notification-success_1bcqd_50",title:gu,message:pu,"notification-action":"_notification-action_1bcqd_67","notification-delete":"_notification-delete_1bcqd_73"},vu={"notification-enter-from":"_notification-enter-from_1hvq1_1","notification-leave-to":"_notification-leave-to_1hvq1_2","notification-enter-to":"_notification-enter-to_1hvq1_6","notification-leave-from":"_notification-leave-from_1hvq1_7","notification-enter-active":"_notification-enter-active_1hvq1_11","notification-leave-active":"_notification-leave-active_1hvq1_12"},_u={__name:"notification",props:{id:String,type:String,title:String,message:String},setup(d){const e=Bs(),t=ye(!1),i=d,a={error:"Error",success:"Success",warning:"Warning",info:"Info"},n=it(),o=()=>{if(!t.value)return t.value=!0,setTimeout(()=>{n.dispatch("notifications/deleteItemNotificationsPopup",i.id)},300)};return rt(()=>{setTimeout(()=>o(),4*1e3),e.notificationOccurred(i.type==="info"?"success":i.type)}),(s,h)=>(z(),Ee(ee,{name:"notification","animation-style":x(vu),"start-animation":!0},{default:Q(()=>[t.value?Te("",!0):(z(),Z("div",{key:0,class:S({[x(yt).notification]:!0,[x(yt)["notification-"+i.type]]:!0})},[L("div",{class:S({[x(yt)["notification-body"]]:!0})},[L("div",{class:S({[x(yt)["notification-content"]]:!0})},[L("div",{class:S({[x(yt)["notification-icon"]]:!0})},[U(Ne,{class:S({[x(yt)["styled-icon"]]:!0}),name:"notification-"+i.type},null,8,["class","name"])],2),L("div",{class:S({[x(yt)["notification-info"]]:!0})},[L("div",{class:S({[x(yt).title]:!0})},Se(i.title?i.title:a[i.type]),3),L("div",{class:S({[x(yt).message]:!0})},Se(i.message),3)],2)],2),L("div",{class:S({[x(yt)["notification-action"]]:!0})},[L("button",{type:"button",class:S({[x(yt)["notification-delete"]]:!0}),onClick:o},[U(Ne,{class:S({[x(yt)["styled-icon"]]:!0}),name:"notification-close"},null,8,["class"])],2)],2)],2)],2))]),_:1},8,["animation-style"]))}},St={"bottom-modal":"_bottom-modal_6u5wt_1","bottom-modal-backdrop":"_bottom-modal-backdrop_6u5wt_9","bottom-modal-is-auth":"_bottom-modal-is-auth_6u5wt_17","bottom-modal-is-guest":"_bottom-modal-is-guest_6u5wt_22","bottom-modal-container":"_bottom-modal-container_6u5wt_27","bottom-modal-body":"_bottom-modal-body_6u5wt_40","bottom-modal-header":"_bottom-modal-header_6u5wt_49","bottom-modal-header-title":"_bottom-modal-header-title_6u5wt_57","bottom-modal-header-exit":"_bottom-modal-header-exit_6u5wt_63","styled-icon":"_styled-icon_6u5wt_71","bottom-modal-content":"_bottom-modal-content_6u5wt_75"},As={"bottom-modal-backdrop-enter-from":"_bottom-modal-backdrop-enter-from_b8624_1","bottom-modal-backdrop-leave-to":"_bottom-modal-backdrop-leave-to_b8624_2","bottom-modal-backdrop-enter-to":"_bottom-modal-backdrop-enter-to_b8624_5","bottom-modal-backdrop-leave-from":"_bottom-modal-backdrop-leave-from_b8624_6","bottom-modal-backdrop-enter-active":"_bottom-modal-backdrop-enter-active_b8624_9","bottom-modal-backdrop-leave-active":"_bottom-modal-backdrop-leave-active_b8624_10","bottom-modal-container-enter-from":"_bottom-modal-container-enter-from_b8624_14","bottom-modal-container-leave-to":"_bottom-modal-container-leave-to_b8624_15","bottom-modal-container-enter-to":"_bottom-modal-container-enter-to_b8624_18","bottom-modal-container-leave-from":"_bottom-modal-container-leave-from_b8624_19","bottom-modal-container-enter-active":"_bottom-modal-container-enter-active_b8624_22","bottom-modal-container-leave-active":"_bottom-modal-container-leave-active_b8624_23"},bu={__name:"header",setup(d){return(e,t)=>(z(),Z("div",{class:S({[x(St)["bottom-modal-header-title"]]:!0})},"Edit avatar",2))}},yu={__name:"header",props:{tracks:Array},setup(d){const e=d;return(t,i)=>(z(),Z("div",{class:S({[x(St)["bottom-modal-header-title"]]:!0})},"Choose a Track ("+Se(e.tracks.filter(a=>!a.next_timer).length)+")",3))}},wu=d=>new Promise((e,t)=>{const i=new FileReader;i.onload=()=>e(i.result),i.onerror=t,i.readAsDataURL(d)}),xu="_button_1lut0_9",Gt={"list-of-buttons":"_list-of-buttons_1lut0_1",button:xu,"button-delete":"_button-delete_1lut0_21","button-add":"_button-add_1lut0_26","button-cancel":"_button-cancel_1lut0_38","edit-avatar-add":"_edit-avatar-add_1lut0_43"},Cu={__name:"main",setup(d){const e=it(),t=$(()=>e.state.init),i=$(()=>!e.state.user.auth_token),a=$(()=>i.value?e.state.init.player_register.avatar===t.value.default_avatar:e.state.user.avatar===t.value.default_avatar),n=()=>{if(i.value)e.dispatch("init/setInitPlayerRegisterAvatar",t.value.default_avatar);else return $e("error","Forbidden")},o=ye(),s=()=>{o.value&&o.value.click()},h=async l=>{const c=l.target.files;if(!c)return $e("error","Selected file not found");const f=c[0];if(!f.type.startsWith("image/"))return r("error","You can upload only .png and .jpeg files");if((f.size/1024).toFixed(2)>1024)return r("error","Maximum image size for uploading is 1 MB");const p=await wu(f);if(!p)return r("error","An error occurred while loading the image information");if(i.value){if(t.value.player_register.avatar===p)return r("error","The avatar you've chosen is already in your possession.");await e.dispatch("init/setInitPlayerRegisterAvatar",p)}else return $e("error","Forbidden");return r("success","Avatar successfully uploaded"),Kt()},r=(l,c)=>{var f;return((f=o.value)==null?void 0:f.value)!==null&&(o.value.value=null),$e(l,c),Kt()};return oa(()=>e.dispatch("modal/setModalRender",!1)),En(()=>setTimeout(()=>e.dispatch("modal/setModalRender",!0),100)),(l,c)=>(z(),Z("div",{class:S({[x(Gt)["edit-avatar"]]:!0})},[L("div",{class:S({[x(Gt)["list-of-buttons"]]:!0})},[a.value?Te("",!0):(z(),Z("button",{key:0,type:"button",class:S({[x(Gt).button]:!0,[x(Gt)["button-delete"]]:!0}),onClick:n},"Delete avatar",2)),L("div",{class:S({[x(Gt)["edit-avatar-add"]]:!0})},[L("input",{type:"file",onChange:h,ref_key:"addFileInput",ref:o},null,544),L("button",{type:"button",class:S({[x(Gt).button]:!0,[x(ft)["border-gradient"]]:!0,[x(Gt)["button-add"]]:!0}),accept:"image/png, image/jpeg",onClick:s},"Add new band avatar",2)],2),L("button",{type:"button",class:S({[x(Gt).button]:!0,[x(Gt)["button-cancel"]]:!0}),onClick:c[0]||(c[0]=()=>x(Kt)())},"Cancel",2)],2)],2))}},ku="_avatar_1qj13_19",Au="_info_1qj13_29",Su="_title_1qj13_37",Eu="_description_1qj13_43",jt={"track-item":"_track-item_1qj13_1","left-blocks":"_left-blocks_1qj13_12",avatar:ku,info:Au,title:Su,description:Eu,"button-select":"_button-select_1qj13_49","more-than-hours":"_more-than-hours_1qj13_57","more-than-minutes":"_more-than-minutes_1qj13_61","more-than-seconds":"_more-than-seconds_1qj13_65"},Mu={__name:"item",props:{item_id:Number,image:String,author:String,name:String,nextTimer:Number,historyCreatedAt:Number},setup(d){const e=d,t=Xe("drop-game-start-game"),i=Xe("drop-game-set-track-timer"),n=ye({seconds:(()=>{if(e.nextTimer<=0)return 0;const f=Fs().unix(),u=e.nextTimer-(f-e.historyCreatedAt);return u>0?u:0})(),interval:null}),o=ye(n.value.seconds>0),s=ye(!0),h=$(()=>ar(n.value.seconds)),r=$(()=>n.value.seconds>=3600?"more-than-hours":n.value.seconds>=60&&n.value.seconds<=3600?"more-than-minutes":"more-than-seconds"),l=()=>{n.value.interval=setInterval(()=>{n.value.seconds--,n.value.seconds===0&&(clearInterval(n.value.interval),i(e.item_id),o.value=!1)},1e3)},c=f=>{if(s.value)return Kt(),s.value=!1,t(f)};return rt(()=>{n.value.seconds>0&&l()}),(f,u)=>(z(),Z("div",{class:S({[x(jt)["track-item"]]:!0})},[L("div",{class:S({[x(jt)["left-blocks"]]:!0})},[L("div",{class:S({[x(jt).avatar]:!0}),style:Bt({backgroundImage:`url(${e.image}), url(${x(la)})`})},null,6),L("div",{class:S({[x(jt).info]:!0})},[L("div",{class:S({[x(jt).title]:!0})},Se(e.author),3),L("div",{class:S({[x(jt).description]:!0})},Se(e.name),3)],2)],2),U(Jt,{class:S({[x(jt)["button-select"]]:!0,[x(jt)[r.value]]:o.value,[x(jt)["button-disabled"]]:o.value,[x(un)["button-text-default"]]:!0}),icon:o.value?null:"game-play",disabled:o.value||!s.value,name:o.value?h.value:"Play","icon-width":16,"icon-color":"#fff",onClick:u[0]||(u[0]=()=>c(e.item_id))},null,8,["class","icon","disabled","name"])],2))}},Tu="_amount_y4t2k_43",Ht={"select-track":"_select-track_y4t2k_1","track-search":"_track-search_y4t2k_4","styled-icon":"_styled-icon_y4t2k_14","track-input":"_track-input_y4t2k_19","list-title":"_list-title_y4t2k_37",amount:Tu,"list-of-tracks":"_list-of-tracks_y4t2k_46","track-loading":"_track-loading_y4t2k_55","list-empty":"_list-empty_y4t2k_62"},Iu={__name:"main",props:{tracks:Array,start:Function,setTimer:Function},setup(d){const e=d,t=it(),i=$(()=>e.tracks.sort((a,n)=>a.next_timer-n.next_timer));return st("drop-game-start-game",e.start),st("drop-game-set-track-timer",e.setTimer),oa(()=>t.dispatch("modal/setModalRender",!1)),En(()=>setTimeout(()=>t.dispatch("modal/setModalRender",!0),100)),(a,n)=>(z(),Z("div",{class:S({[x(Ht)["select-track"]]:!0})},[L("div",{class:S({[x(Ht)["track-loading"]]:!0,[x(ft)["d-none"]]:!0})},[U(Di,{width:42,height:42,"border-size":4})],2),L("div",{class:S({[x(Ht)["track-search"]]:!0,[x(ft)["d-none"]]:!0})},[U(Ne,{class:S({[x(Ht)["styled-icon"]]:!0}),name:"search"},null,8,["class"]),L("input",{type:"text",class:S({[x(Ht)["track-input"]]:!0}),placeholder:"Enter track author or track name"},null,2)],2),L("div",{class:S({[x(Ht)["list-title"]]:!0,[x(ft)["d-none"]]:!0})},[n[0]||(n[0]=An(" Choose a Track ")),L("span",{class:S({[x(Ht).amount]:!0})},"("+Se(e.tracks.filter(o=>!o.next_timer).length)+")",3)],2),e.tracks.length?(z(),Z("div",{key:1,class:S({[x(Ht)["list-of-tracks"]]:!0})},[(z(!0),Z(It,null,gi(i.value,(o,s)=>(z(),Ee(Mu,{key:s,item_id:o.id,image:o.image,author:o.author,name:o.name,"next-timer":o.next_timer,"history-created-at":o.history_created_at},null,8,["item_id","image","author","name","next-timer","history-created-at"]))),128))],2)):(z(),Z("div",{key:0,class:S({[x(Ht)["list-empty"]]:!0})},"Track list is empty",2))],2))}},Lu=["data-current-modal"],Ru={__name:"main",setup(d){const e=Na(),t=it(),i=$(()=>t.state.modal),a=$(()=>t.getters["user/isAuth"]),n=$(()=>t.state.drop_game);Ct(()=>e.path,()=>{i.value.active&&Kt()});const o=ye(),s=Xe("app-modals"),h=Xe("app-notifications"),r=l=>{var c,f;if(i.value.active&&(!o.value||!o.value.contains(l.target)&&h.content.value&&!((c=h.content)!=null&&c.value.contains(l.target))&&(!s[i.value.selected]||s[i.value.selected]&&s[i.value.selected].button.value&&!((f=s[i.value.selected].button)!=null&&f.value.contains(l.target)))))return Kt()};return oa(()=>window.removeEventListener("click",r)),rt(()=>window.addEventListener("click",r)),(l,c)=>i.value.active?(z(),Z("div",{key:0,"data-current-modal":i.value.selected,class:S({[x(St)["bottom-modal"]]:!0,[x(St)[`bottom-modal-is-${a.value?"auth":"guest"}`]]:!0})},[U(ee,{name:"bottom-modal-container","animation-style":x(As),"start-animation":!0},{default:Q(()=>[i.value.closeAnimation?Te("",!0):(z(),Z("div",{key:0,class:S({[x(St)["bottom-modal-container"]]:!0}),ref_key:"container",ref:o},[L("div",{class:S({[x(St)["bottom-modal-body"]]:!0})},[L("div",{class:S({[x(St)["bottom-modal-header"]]:!0})},[i.value.selected==="edit-avatar"?(z(),Ee(bu,{key:0})):x(e).path==="/game"&&i.value.selected==="game-select-track"&&!n.value.started?(z(),Ee(yu,{key:1,tracks:i.value.props.tracks},null,8,["tracks"])):Te("",!0),L("button",{type:"button",class:S({[x(St)["bottom-modal-header-exit"]]:!0}),onClick:c[0]||(c[0]=()=>x(Kt)())},[U(Ne,{class:S({[x(St)["styled-icon"]]:!0}),name:"modal-close"},null,8,["class"])],2)],2),L("div",{class:S({[x(St)["bottom-modal-content"]]:!0})},[i.value.selected==="edit-avatar"?(z(),Ee(Cu,Dn(Xn({key:0},i.value.props)),null,16)):x(e).path==="/game"&&i.value.selected==="game-select-track"&&!n.value.started?(z(),Ee(Iu,Dn(Xn({key:1},i.value.props)),null,16)):Te("",!0)],2)],2)],2))]),_:1},8,["animation-style"]),U(ee,{name:"bottom-modal-backdrop","animation-style":x(As)},{default:Q(()=>[i.value.closeAnimation?Te("",!0):(z(),Z("div",{key:0,class:S({[x(St)["bottom-modal-backdrop"]]:!0})},null,2))]),_:1},8,["animation-style"])],10,Lu)):Te("",!0)}},Bu={},Fu={xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",style:{position:"absolute",width:"0",height:"0",overflow:"hidden"},version:"1.1"};function Pu(d,e){return z(),Z("svg",Fu,e[0]||(e[0]=[ho('<defs><symbol id="icon-drop-game-select-track" viewBox="0 0 12 12"><path d="M6 0.21973C6.29289 0.21973 6.53033 0.457166 6.53033 0.750058L6.53062 5.46942L11.25 5.46971C11.5203 5.46971 11.7435 5.67202 11.7762 5.93352L11.7803 6.00004C11.7803 6.29293 11.5429 6.53037 11.25 6.53037L6.53062 6.53066L6.53033 11.25C6.53033 11.5204 6.32802 11.7435 6.06652 11.7762L6 11.7803C5.70711 11.7803 5.46967 11.5429 5.46967 11.25L5.46938 6.53066L0.750019 6.53037C0.479657 6.53037 0.256549 6.32805 0.223824 6.06656L0.219691 6.00004C0.219691 5.70715 0.457128 5.46971 0.75002 5.46971L5.46938 5.46942L5.46967 0.750058C5.46967 0.479696 5.67198 0.256587 5.93348 0.223862L6 0.21973Z" fill="#fff" stroke="#fff" stroke-width="0.4"></path></symbol><symbol id="icon-search" viewBox="0 0 15 16"><path d="M9.64959 11.9597C9.28347 11.5921 9.28347 10.9962 9.64959 10.6286C10.0157 10.2611 10.6093 10.2611 10.9754 10.6286L14.7254 14.3933C15.0915 14.7609 15.0915 15.3568 14.7254 15.7244C14.3593 16.0919 13.7657 16.0919 13.3996 15.7244L9.64959 11.9597Z"></path><path d="M6.56246 11.2941C9.15127 11.2941 11.2499 9.18722 11.2499 6.58823C11.2499 3.98925 9.15127 1.88235 6.56246 1.88235C3.97364 1.88235 1.87499 3.98925 1.87499 6.58823C1.87499 9.18722 3.97364 11.2941 6.56246 11.2941ZM6.56246 13.1765C2.93811 13.1765 0 10.2268 0 6.58823C0 2.94965 2.93811 0 6.56246 0C10.1868 0 13.1249 2.94965 13.1249 6.58823C13.1249 10.2268 10.1868 13.1765 6.56246 13.1765Z"></path></symbol><symbol id="icon-drop-game-sound-off" viewBox="0 0 16 16"><path d="M11.9999 11.1667C11.8933 11.1667 11.7933 11.1333 11.6999 11.0667C11.4799 10.9 11.4333 10.5867 11.5999 10.3667C12.4399 9.24666 12.6199 7.76 12.0799 6.47333C11.9733 6.22 12.0933 5.92666 12.3466 5.82C12.5999 5.71333 12.8933 5.83333 12.9999 6.08666C13.6799 7.7 13.4466 9.57333 12.3999 10.9733C12.2999 11.1 12.1533 11.1667 11.9999 11.1667Z" fill="white"></path><path d="M13.2199 12.8333C13.1132 12.8333 13.0132 12.8 12.9199 12.7333C12.6999 12.5667 12.6532 12.2533 12.8199 12.0333C14.2466 10.1333 14.5599 7.58668 13.6399 5.39334C13.5332 5.14001 13.6532 4.84668 13.9066 4.74001C14.1599 4.63334 14.4532 4.75334 14.5599 5.00668C15.6199 7.52668 15.2599 10.4467 13.6199 12.6333C13.5266 12.7667 13.3732 12.8333 13.2199 12.8333Z" fill="white"></path><path d="M9.35999 8.64001C9.77999 8.22001 10.5 8.52001 10.5 9.11334V11.0667C10.5 12.2133 10.0867 13.0733 9.34665 13.4867C9.04665 13.6533 8.71332 13.7333 8.36665 13.7333C7.83332 13.7333 7.25999 13.5533 6.67332 13.1867L6.24665 12.92C5.88665 12.6933 5.82665 12.1867 6.12665 11.8867L9.35999 8.64001Z" fill="white"></path><path d="M14.5133 1.48667C14.3133 1.28667 13.9866 1.28667 13.7866 1.48667L10.4866 4.78667C10.4466 3.72 10.0466 2.92 9.33992 2.52667C8.59325 2.11334 7.63992 2.22 6.66658 2.82667L4.72659 4.04C4.59325 4.12 4.43992 4.16667 4.28658 4.16667H3.66659H3.33325C1.71992 4.16667 0.833252 5.05334 0.833252 6.66667V9.33334C0.833252 10.9467 1.71992 11.8333 3.33325 11.8333H3.43992L1.47992 13.7933C1.27992 13.9933 1.27992 14.32 1.47992 14.52C1.58659 14.6133 1.71325 14.6667 1.84659 14.6667C1.97992 14.6667 2.10659 14.6133 2.20659 14.5133L14.5133 2.20667C14.7199 2.00667 14.7199 1.68667 14.5133 1.48667Z" fill="white"></path></symbol><symbol id="icon-drop-game-sound-on" viewBox="0 0 16 16"><path d="M11.9999 11.1667C11.8933 11.1667 11.7933 11.1333 11.6999 11.0667C11.4799 10.9 11.4333 10.5867 11.5999 10.3667C12.6466 8.97334 12.6466 7.02668 11.5999 5.63334C11.4333 5.41334 11.4799 5.10001 11.6999 4.93334C11.9199 4.76668 12.2333 4.81334 12.3999 5.03334C13.7066 6.78001 13.7066 9.22001 12.3999 10.9667C12.2999 11.1 12.1533 11.1667 11.9999 11.1667Z" fill="white"></path><path d="M13.2199 12.8333C13.1132 12.8333 13.0132 12.8 12.9199 12.7333C12.6999 12.5667 12.6532 12.2533 12.8199 12.0333C14.5999 9.65999 14.5999 6.33999 12.8199 3.96666C12.6532 3.74666 12.6999 3.43332 12.9199 3.26666C13.1399 3.09999 13.4532 3.14666 13.6199 3.36666C15.6666 6.09332 15.6666 9.90666 13.6199 12.6333C13.5266 12.7667 13.3732 12.8333 13.2199 12.8333Z" fill="white"></path><path d="M9.34659 2.51999C8.59992 2.10666 7.64659 2.21332 6.67325 2.81999L4.72659 4.03999C4.59325 4.11999 4.43992 4.16666 4.28659 4.16666H3.66659H3.33325C1.71992 4.16666 0.833252 5.05332 0.833252 6.66666V9.33332C0.833252 10.9467 1.71992 11.8333 3.33325 11.8333H3.66659H4.28659C4.43992 11.8333 4.59325 11.88 4.72659 11.96L6.67325 13.18C7.25992 13.5467 7.83325 13.7267 8.36659 13.7267C8.71325 13.7267 9.04659 13.6467 9.34659 13.48C10.0866 13.0667 10.4999 12.2067 10.4999 11.06V4.93999C10.4999 3.79332 10.0866 2.93332 9.34659 2.51999Z" fill="white"></path></symbol><symbol id="icon-drop-game-note" viewBox="0 0 16 16"><path d="M14.4801 4.18667V4.96667C14.4801 5.62001 14.2201 6.18001 13.7601 6.50667C13.4734 6.72001 13.1201 6.82001 12.7534 6.82001C12.5267 6.82001 12.3001 6.78667 12.0667 6.70667L8.48006 5.51334V12C8.48006 13.7467 7.06006 15.1667 5.3134 15.1667C3.56673 15.1667 2.14673 13.7467 2.14673 12C2.14673 10.2533 3.56673 8.83334 5.3134 8.83334C6.1534 8.83334 6.9134 9.16667 7.48006 9.70001V2.66667C7.48006 2.02001 7.74673 1.46001 8.20673 1.12667C8.66673 0.800007 9.28006 0.726674 9.8934 0.926674L12.8401 1.91334C13.7467 2.21334 14.4801 3.23334 14.4801 4.18667Z" fill="#6E6E6E"></path></symbol><symbol id="icon-drop-game-back" viewBox="0 0 20 20"><path d="M13.4916 1.66666H6.50829C3.47496 1.66666 1.66663 3.47499 1.66663 6.50832V13.4833C1.66663 16.525 3.47496 18.3333 6.50829 18.3333H13.4833C16.5166 18.3333 18.325 16.525 18.325 13.4917V6.50832C18.3333 3.47499 16.525 1.66666 13.4916 1.66666ZM11.4916 12.5C11.7333 12.7417 11.7333 13.1417 11.4916 13.3833C11.3666 13.5083 11.2083 13.5667 11.05 13.5667C10.8916 13.5667 10.7333 13.5083 10.6083 13.3833L7.66663 10.4417C7.42496 10.2 7.42496 9.79999 7.66663 9.55832L10.6083 6.61666C10.85 6.37499 11.25 6.37499 11.4916 6.61666C11.7333 6.85832 11.7333 7.25832 11.4916 7.49999L8.99163 9.99999L11.4916 12.5Z" fill="#6E6E6E"></path></symbol><symbol id="icon-band" viewBox="0 0 20 20"><path d="M14.6083 6.47496C14.55 6.46663 14.4917 6.46663 14.4333 6.47496C13.1417 6.43329 12.1167 5.37496 12.1167 4.07496C12.1167 2.74996 13.1917 1.66663 14.525 1.66663C15.85 1.66663 16.9333 2.74163 16.9333 4.07496C16.925 5.37496 15.9 6.43329 14.6083 6.47496Z" fill="#fff"></path><path d="M17.325 12.25C16.3917 12.875 15.0833 13.1083 13.875 12.95C14.1917 12.2666 14.3583 11.5083 14.3667 10.7083C14.3667 9.87497 14.1833 9.0833 13.8333 8.39164C15.0667 8.22497 16.375 8.4583 17.3167 9.0833C18.6333 9.94997 18.6333 11.375 17.325 12.25Z" fill="#fff"></path><path d="M5.36667 6.47496C5.425 6.46663 5.48333 6.46663 5.54167 6.47496C6.83333 6.43329 7.85833 5.37496 7.85833 4.07496C7.85833 2.74163 6.78333 1.66663 5.45 1.66663C4.125 1.66663 3.05 2.74163 3.05 4.07496C3.05 5.37496 4.075 6.43329 5.36667 6.47496Z" fill="#fff"></path><path d="M5.45833 10.7083C5.45833 11.5167 5.63333 12.2833 5.95 12.975C4.775 13.1 3.55 12.85 2.65 12.2583C1.33333 11.3833 1.33333 9.95834 2.65 9.08334C3.54167 8.48334 4.8 8.24167 5.98333 8.37501C5.64166 9.07501 5.45833 9.86667 5.45833 10.7083Z" fill="#fff"></path><path d="M10.1 13.225C10.0333 13.2167 9.95833 13.2167 9.88333 13.225C8.35 13.175 7.125 11.9167 7.125 10.3667C7.13333 8.78333 8.40833 7.5 10 7.5C11.5833 7.5 12.8667 8.78333 12.8667 10.3667C12.8583 11.9167 11.6417 13.175 10.1 13.225Z" fill="#fff"></path><path d="M7.39167 14.95C6.13333 15.7916 6.13333 17.175 7.39167 18.0083C8.825 18.9666 11.175 18.9666 12.6083 18.0083C13.8667 17.1666 13.8667 15.7833 12.6083 14.95C11.1833 13.9916 8.83333 13.9916 7.39167 14.95Z" fill="#fff"></path></symbol><symbol id="icon-logout" viewBox="0 -0.5 25 25"><path d="M11.75 9.874C11.75 10.2882 12.0858 10.624 12.5 10.624C12.9142 10.624 13.25 10.2882 13.25 9.874H11.75ZM13.25 4C13.25 3.58579 12.9142 3.25 12.5 3.25C12.0858 3.25 11.75 3.58579 11.75 4H13.25ZM9.81082 6.66156C10.1878 6.48991 10.3542 6.04515 10.1826 5.66818C10.0109 5.29121 9.56615 5.12478 9.18918 5.29644L9.81082 6.66156ZM5.5 12.16L4.7499 12.1561L4.75005 12.1687L5.5 12.16ZM12.5 19L12.5086 18.25C12.5029 18.25 12.4971 18.25 12.4914 18.25L12.5 19ZM19.5 12.16L20.2501 12.1687L20.25 12.1561L19.5 12.16ZM15.8108 5.29644C15.4338 5.12478 14.9891 5.29121 14.8174 5.66818C14.6458 6.04515 14.8122 6.48991 15.1892 6.66156L15.8108 5.29644ZM13.25 9.874V4H11.75V9.874H13.25ZM9.18918 5.29644C6.49843 6.52171 4.7655 9.19951 4.75001 12.1561L6.24999 12.1639C6.26242 9.79237 7.65246 7.6444 9.81082 6.66156L9.18918 5.29644ZM4.75005 12.1687C4.79935 16.4046 8.27278 19.7986 12.5086 19.75L12.4914 18.25C9.08384 18.2892 6.28961 15.5588 6.24995 12.1513L4.75005 12.1687ZM12.4914 19.75C16.7272 19.7986 20.2007 16.4046 20.2499 12.1687L18.7501 12.1513C18.7104 15.5588 15.9162 18.2892 12.5086 18.25L12.4914 19.75ZM20.25 12.1561C20.2345 9.19951 18.5016 6.52171 15.8108 5.29644L15.1892 6.66156C17.3475 7.6444 18.7376 9.79237 18.75 12.1639L20.25 12.1561Z" fill="#fff"></path></symbol><symbol id="icon-circle-check" fill="none" viewBox="0 0 24 24"><path d="M21 12C21 16.9706 16.9706 21 12 21C7.02944 21 3 16.9706 3 12C3 7.02944 7.02944 3 12 3C16.9706 3 21 7.02944 21 12Z" stroke="#fff" stroke-width="2"></path><path d="M9 12L10.6828 13.6828V13.6828C10.858 13.858 11.142 13.858 11.3172 13.6828V13.6828L15 10" stroke="#fff" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path></symbol><symbol id="icon-gradient-turquoise-wallet" viewBox="0 0 34 34"><path d="M34 14.8646V19.1354C34 20.2756 33.2708 21.2085 32.3428 21.25H29.0947C27.3049 21.25 25.6643 19.6122 25.5151 17.3732C25.4157 16.0671 25.8134 14.8439 26.5094 13.9939C27.1226 13.2061 27.9678 12.75 28.8958 12.75H32.3428C33.2708 12.7915 34 13.7244 34 14.8646Z" fill="url(#paint0_linear_76_834)"></path><path d="M31.0307 23.2125H28.6282C25.4361 23.2125 22.748 20.71 22.4792 17.525C22.328 15.705 22.9664 13.885 24.2433 12.59C25.3185 11.435 26.8138 10.7875 28.4266 10.7875H31.0307C31.5179 10.7875 31.9211 10.3675 31.8707 9.86C31.5011 5.6075 28.7962 2.7025 24.7809 2.2125C24.3777 2.1425 23.9577 2.125 23.5208 2.125H8.4003C7.92988 2.125 7.47627 2.16 7.03945 2.23C2.7553 2.79 0 6.115 0 10.875V23.125C0 27.955 3.76333 31.875 8.4003 31.875H23.5208C28.225 31.875 31.4675 28.8125 31.8707 24.14C31.9211 23.6325 31.5179 23.2125 31.0307 23.2125ZM18.4807 13.0625H8.4003C7.71147 13.0625 7.14025 12.4675 7.14025 11.75C7.14025 11.0325 7.71147 10.4375 8.4003 10.4375H18.4807C19.1695 10.4375 19.7407 11.0325 19.7407 11.75C19.7407 12.4675 19.1695 13.0625 18.4807 13.0625Z" fill="url(#paint1_linear_76_834)"></path><defs><linearGradient id="paint0_linear_76_834" x1="29.75" y1="12.75" x2="29.75" y2="21.25" gradientUnits="userSpaceOnUse"><stop stop-color="#00CDD3"></stop><stop offset="1" stop-color="#018297"></stop></linearGradient><linearGradient id="paint1_linear_76_834" x1="15.9375" y1="2.125" x2="15.9375" y2="31.875" gradientUnits="userSpaceOnUse"><stop stop-color="#00CDD3"></stop><stop offset="1" stop-color="#018297"></stop></linearGradient></defs></symbol><symbol id="icon-pagination-right" viewBox="0 0 20 20"><path d="M9.99998 18.3334C14.5916 18.3334 18.3333 14.5917 18.3333 10C18.3333 5.40837 14.5916 1.66671 9.99998 1.66671C5.40831 1.66671 1.66665 5.40837 1.66665 10C1.66665 14.5917 5.40831 18.3334 9.99998 18.3334ZM8.50831 7.50004C8.26665 7.25837 8.26665 6.85837 8.50831 6.61671C8.63331 6.49171 8.79165 6.43337 8.94998 6.43337C9.10831 6.43337 9.26665 6.49171 9.39165 6.61671L12.3333 9.55837C12.575 9.80004 12.575 10.2 12.3333 10.4417L9.39165 13.3834C9.14998 13.625 8.74998 13.625 8.50831 13.3834C8.26665 13.1417 8.26665 12.7417 8.50831 12.5L11.0083 10L8.50831 7.50004Z" fill="#6E6E6E"></path></symbol><symbol id="icon-pagination-left" viewBox="0 0 20 20"><path d="M9.99999 1.66663C5.40832 1.66663 1.66666 5.40829 1.66666 9.99996C1.66666 14.5916 5.40832 18.3333 9.99999 18.3333C14.5917 18.3333 18.3333 14.5916 18.3333 9.99996C18.3333 5.40829 14.5917 1.66663 9.99999 1.66663ZM11.4917 12.5C11.7333 12.7416 11.7333 13.1416 11.4917 13.3833C11.3667 13.5083 11.2083 13.5666 11.05 13.5666C10.8917 13.5666 10.7333 13.5083 10.6083 13.3833L7.66666 10.4416C7.42499 10.2 7.42499 9.79996 7.66666 9.55829L10.6083 6.61663C10.85 6.37496 11.25 6.37496 11.4917 6.61663C11.7333 6.85829 11.7333 7.25829 11.4917 7.49996L8.99166 9.99996L11.4917 12.5Z" fill="#6E6E6E"></path></symbol><symbol id="icon-copy" viewBox="0 0 24 24"><path d="M16 12.9V17.1C16 20.6 14.6 22 11.1 22H6.9C3.4 22 2 20.6 2 17.1V12.9C2 9.4 3.4 8 6.9 8H11.1C14.6 8 16 9.4 16 12.9Z" fill="white"></path><path d="M17.1 2H12.9C9.81691 2 8.37097 3.09409 8.06974 5.73901C8.00672 6.29235 8.46499 6.75 9.0219 6.75H11.1C15.3 6.75 17.25 8.7 17.25 12.9V14.9781C17.25 15.535 17.7076 15.9933 18.261 15.9303C20.9059 15.629 22 14.1831 22 11.1V6.9C22 3.4 20.6 2 17.1 2Z" fill="white"></path></symbol><symbol id="icon-band-share-user" viewBox="0 0 20 20"><path d="M10 12.5C5.825 12.5 2.425 15.3 2.425 18.75C2.425 18.9833 2.60833 19.1667 2.84167 19.1667H17.1583C17.3917 19.1667 17.575 18.9833 17.575 18.75C17.575 15.3 14.175 12.5 10 12.5Z" fill="white"></path><path d="M13.0917 3.04996C12.3417 2.19996 11.225 1.66663 10 1.66663C8.83333 1.66663 7.76667 2.14163 7.00833 2.92496C6.28333 3.67496 5.83333 4.70829 5.83333 5.83329C5.83333 6.61663 6.05 7.34996 6.44167 7.97496C6.65 8.33329 6.91667 8.65829 7.23333 8.92496C7.95833 9.59163 8.925 9.99996 10 9.99996C11.525 9.99996 12.8417 9.18329 13.5667 7.97496C13.7833 7.61663 13.95 7.21663 14.0417 6.79996C14.125 6.49163 14.1667 6.16663 14.1667 5.83329C14.1667 4.76663 13.7583 3.79163 13.0917 3.04996ZM11.5583 6.59996H10.7833V7.40829C10.7833 7.84163 10.4333 8.19163 10 8.19163C9.56667 8.19163 9.21667 7.84163 9.21667 7.40829V6.59996H8.44167C8.00833 6.59996 7.65833 6.24996 7.65833 5.81663C7.65833 5.38329 8.00833 5.03329 8.44167 5.03329H9.21667V4.29163C9.21667 3.85829 9.56667 3.50829 10 3.50829C10.4333 3.50829 10.7833 3.85829 10.7833 4.29163V5.03329H11.5583C11.9917 5.03329 12.3417 5.38329 12.3417 5.81663C12.3417 6.24996 11.9917 6.59996 11.5583 6.59996Z" fill="white"></path></symbol><symbol id="icon-gradient-background-music-alt" viewBox="0 0 18 18"><g filter="url(#filter0_b_76_624)"><rect width="18" height="18" rx="6" fill="url(#paint0_linear_76_624)"></rect></g><path d="M12.2085 5.01528L9.32329 7.82304L6.42923 5L6.84055 10.5654C6.50467 10.4947 6.11602 10.5533 5.76391 10.7566C5.09512 11.1427 4.81187 11.9043 5.1314 12.4576C5.45082 13.011 6.25198 13.1465 6.92089 12.7603C7.41158 12.477 7.69471 11.9915 7.68457 11.5346H7.68504V7.9122L9.31374 8.63602L12.2085 5.01528Z" fill="#1F1F1F"></path><path d="M12.9759 10.7762C12.6252 10.5738 12.2381 10.5148 11.9032 10.5842L12.3141 5.17047L9.37165 8.92585L7.86554 8.20765L9.37165 9.88875L11.0584 8.20204V11.4963C11.0216 11.9697 11.3076 12.4848 11.8191 12.7801C12.4878 13.1662 13.289 13.0307 13.6085 12.4774C13.928 11.924 13.6448 11.1625 12.976 10.7763L12.9759 10.7762Z" fill="#1F1F1F"></path><defs><filter id="filter0_b_76_624" x="-45" y="-45" width="108" height="108" filterUnits="userSpaceOnUse" color-interpolation-filters="sRGB"><feFlood flood-opacity="0" result="BackgroundImageFix"></feFlood><feGaussianBlur in="BackgroundImageFix" stdDeviation="22.5"></feGaussianBlur><feComposite in2="SourceAlpha" operator="in" result="effect1_backgroundBlur_76_624"></feComposite><feBlend mode="normal" in="SourceGraphic" in2="effect1_backgroundBlur_76_624" result="shape"></feBlend></filter><linearGradient id="paint0_linear_76_624" x1="9" y1="0" x2="9" y2="18" gradientUnits="userSpaceOnUse"><stop stop-color="#00CDD3"></stop><stop offset="1" stop-color="#018297"></stop></linearGradient></defs></symbol><symbol id="icon-opacity-background-music-alt" viewBox="0 0 18 18"><g filter="url(#filter0_b_91_269)"><rect width="18" height="18" rx="6" fill="#00CDD3" fill-opacity="0.15"></rect></g><path d="M12.2085 5.01528L9.32329 7.82304L6.42923 5L6.84055 10.5654C6.50467 10.4947 6.11602 10.5533 5.76391 10.7566C5.09512 11.1427 4.81187 11.9043 5.1314 12.4576C5.45082 13.011 6.25198 13.1465 6.92089 12.7603C7.41158 12.477 7.69471 11.9915 7.68457 11.5346H7.68504V7.9122L9.31374 8.63602L12.2085 5.01528Z" fill="url(#paint0_linear_91_269)"></path><path d="M12.9759 10.7762C12.6252 10.5738 12.2381 10.5148 11.9032 10.5842L12.314 5.17047L9.37164 8.92585L7.86552 8.20765L9.37164 9.88875L11.0583 8.20204V11.4963C11.0216 11.9697 11.3076 12.4848 11.819 12.7801C12.4878 13.1662 13.289 13.0307 13.6085 12.4774C13.9279 11.924 13.6448 11.1625 12.976 10.7763L12.9759 10.7762Z" fill="url(#paint1_linear_91_269)"></path><defs><filter id="filter0_b_91_269" x="-45" y="-45" width="108" height="108" filterUnits="userSpaceOnUse" color-interpolation-filters="sRGB"><feFlood flood-opacity="0" result="BackgroundImageFix"></feFlood><feGaussianBlur in="BackgroundImageFix" stdDeviation="22.5"></feGaussianBlur><feComposite in2="SourceAlpha" operator="in" result="effect1_backgroundBlur_91_269"></feComposite><feBlend mode="normal" in="SourceGraphic" in2="effect1_backgroundBlur_91_269" result="shape"></feBlend></filter><linearGradient id="paint0_linear_91_269" x1="8.60426" y1="5" x2="8.60426" y2="12.9803" gradientUnits="userSpaceOnUse"><stop stop-color="#00CDD3"></stop><stop offset="1" stop-color="#018297"></stop></linearGradient><linearGradient id="paint1_linear_91_269" x1="10.8027" y1="5.17047" x2="10.8027" y2="13" gradientUnits="userSpaceOnUse"><stop stop-color="#00CDD3"></stop><stop offset="1" stop-color="#018297"></stop></linearGradient></defs></symbol><symbol id="icon-wallet" viewBox="0 0 20 20"><path d="M20 8.7439V11.2561C20 11.9268 19.5711 12.4756 19.0252 12.5H17.1145C16.0617 12.5 15.0966 11.5366 15.0089 10.2195C14.9504 9.45122 15.1844 8.73171 15.5938 8.23171C15.9545 7.76829 16.4516 7.5 16.9975 7.5H19.0252C19.5711 7.52439 20 8.07317 20 8.7439Z" fill="white"></path><path d="M18.2534 13.6544H16.8401C14.9624 13.6544 13.3812 12.1824 13.2231 10.3088C13.1341 9.23824 13.5097 8.16765 14.2607 7.40588C14.8932 6.72647 15.7728 6.34559 16.7215 6.34559H18.2534C18.54 6.34559 18.7771 6.09853 18.7475 5.8C18.5301 3.29853 16.939 1.58971 14.577 1.30147C14.3398 1.26029 14.0927 1.25 13.8358 1.25H4.94135C4.66464 1.25 4.3978 1.27059 4.14085 1.31176C1.62076 1.64118 0 3.59706 0 6.39706V13.6029C0 16.4441 2.21373 18.75 4.94135 18.75H13.8358C16.6029 18.75 18.5103 16.9485 18.7475 14.2C18.7771 13.9015 18.54 13.6544 18.2534 13.6544ZM10.871 7.68382H4.94135C4.53616 7.68382 4.20015 7.33382 4.20015 6.91176C4.20015 6.48971 4.53616 6.13971 4.94135 6.13971H10.871C11.2762 6.13971 11.6122 6.48971 11.6122 6.91176C11.6122 7.33382 11.2762 7.68382 10.871 7.68382Z" fill="white"></path></symbol><symbol id="icon-band-features-icon" viewBox="0 0 24 24"><path d="M12 0L22.3923 6V18L12 24L1.6077 18V6L12 0Z" fill="url(#paint0_linear_76_477)"></path><path d="M12 7L16.3301 9.5V14.5L12 17L7.66987 14.5V9.5L12 7Z" fill="black"></path><defs><linearGradient id="paint0_linear_76_477" x1="12" y1="0" x2="12" y2="24" gradientUnits="userSpaceOnUse"><stop stop-color="#00CDD3"></stop><stop offset="1" stop-color="#018297"></stop></linearGradient></defs></symbol><symbol id="icon-social-instagram" viewBox="0 0 24 24"><path fill-rule="evenodd" clip-rule="evenodd" d="M12 18C15.3137 18 18 15.3137 18 12C18 8.68629 15.3137 6 12 6C8.68629 6 6 8.68629 6 12C6 15.3137 8.68629 18 12 18ZM12 16C14.2091 16 16 14.2091 16 12C16 9.79086 14.2091 8 12 8C9.79086 8 8 9.79086 8 12C8 14.2091 9.79086 16 12 16Z" fill="white"></path><path d="M18 5C17.4477 5 17 5.44772 17 6C17 6.55228 17.4477 7 18 7C18.5523 7 19 6.55228 19 6C19 5.44772 18.5523 5 18 5Z" fill="white"></path><path fill-rule="evenodd" clip-rule="evenodd" d="M1.65396 4.27606C1 5.55953 1 7.23969 1 10.6V13.4C1 16.7603 1 18.4405 1.65396 19.7239C2.2292 20.8529 3.14708 21.7708 4.27606 22.346C5.55953 23 7.23969 23 10.6 23H13.4C16.7603 23 18.4405 23 19.7239 22.346C20.8529 21.7708 21.7708 20.8529 22.346 19.7239C23 18.4405 23 16.7603 23 13.4V10.6C23 7.23969 23 5.55953 22.346 4.27606C21.7708 3.14708 20.8529 2.2292 19.7239 1.65396C18.4405 1 16.7603 1 13.4 1H10.6C7.23969 1 5.55953 1 4.27606 1.65396C3.14708 2.2292 2.2292 3.14708 1.65396 4.27606ZM13.4 3H10.6C8.88684 3 7.72225 3.00156 6.82208 3.0751C5.94524 3.14674 5.49684 3.27659 5.18404 3.43597C4.43139 3.81947 3.81947 4.43139 3.43597 5.18404C3.27659 5.49684 3.14674 5.94524 3.0751 6.82208C3.00156 7.72225 3 8.88684 3 10.6V13.4C3 15.1132 3.00156 16.2777 3.0751 17.1779C3.14674 18.0548 3.27659 18.5032 3.43597 18.816C3.81947 19.5686 4.43139 20.1805 5.18404 20.564C5.49684 20.7234 5.94524 20.8533 6.82208 20.9249C7.72225 20.9984 8.88684 21 10.6 21H13.4C15.1132 21 16.2777 20.9984 17.1779 20.9249C18.0548 20.8533 18.5032 20.7234 18.816 20.564C19.5686 20.1805 20.1805 19.5686 20.564 18.816C20.7234 18.5032 20.8533 18.0548 20.9249 17.1779C20.9984 16.2777 21 15.1132 21 13.4V10.6C21 8.88684 20.9984 7.72225 20.9249 6.82208C20.8533 5.94524 20.7234 5.49684 20.564 5.18404C20.1805 4.43139 19.5686 3.81947 18.816 3.43597C18.5032 3.27659 18.0548 3.14674 17.1779 3.0751C16.2777 3.00156 15.1132 3 13.4 3Z" fill="white"></path></symbol><symbol id="icon-social-youtube" viewBox="0 0 16 16"><g clip-path="url(#clip0_76_319)"><path d="M13.1382 15.7273C9.72363 16.0916 6.28001 16.0916 2.86546 15.7273C2.20238 15.6573 1.58334 15.3621 1.11154 14.8909C0.639737 14.4198 0.343681 13.8012 0.272729 13.1382C-0.0915607 9.72363 -0.0915607 6.28001 0.272729 2.86546C0.342751 2.20238 0.637938 1.58334 1.10908 1.11154C1.58022 0.639737 2.19884 0.343681 2.86182 0.272729C6.27637 -0.0915607 9.71999 -0.0915607 13.1345 0.272729C13.7976 0.342751 14.4167 0.637938 14.8885 1.10908C15.3603 1.58022 15.6563 2.19884 15.7273 2.86182C16.0916 6.27637 16.0916 9.71999 15.7273 13.1345C15.6573 13.7976 15.3621 14.4167 14.8909 14.8885C14.4198 15.3603 13.8012 15.6563 13.1382 15.7273Z" fill="white"></path><path d="M12.7663 5.5945C12.5663 4.97904 11.9045 4.60632 11.2954 4.52086C9.10463 4.28813 6.89533 4.28813 4.70452 4.52086C4.09543 4.60632 3.4318 4.97541 3.23362 5.5945C2.9218 7.18328 2.9218 8.81753 3.23362 10.4063C3.43362 11.0209 4.09543 11.3945 4.70452 11.48C6.89533 11.7127 9.10463 11.7127 11.2954 11.48C11.9045 11.3945 12.5682 11.0254 12.7663 10.4063C13.0782 8.81753 13.0782 7.18328 12.7663 5.5945ZM6.80362 9.91632V6.08359L9.92362 7.99995C8.8718 8.64632 7.85089 9.27268 6.80362 9.91632Z" fill="#252323"></path></g><defs><clipPath id="clip0_76_319"><rect width="16" height="16" fill="white"></rect></clipPath></defs></symbol><symbol id="icon-social-telegram" viewBox="0 0 16 16"><g clip-path="url(#clip0_76_311)"><path d="M16 1.57782L13.4694 14.3366C13.4694 14.3366 13.1156 15.2213 12.1422 14.7966L6.27624 10.3069C7.06467 9.59813 13.1812 4.09907 13.4487 3.84969C13.8622 3.46376 13.6056 3.23407 13.125 3.52594L4.0903 9.26344L0.604674 8.09001C0.604674 8.09001 0.0559241 7.89532 0.00311163 7.47063C-0.0500134 7.04594 0.622487 6.81594 0.622487 6.81594L14.8322 1.24157C14.8322 1.24157 16 0.728443 16 1.57782Z" fill="white"></path></g><defs><clipPath id="clip0_76_311"><rect width="16" height="16" fill="white"></rect></clipPath></defs></symbol><symbol id="icon-social-x" viewBox="0 0 16 16"><g clip-path="url(#clip0_76_243)"><path d="M9.48942 6.77491L15.3177 0H13.9366L8.87589 5.88256L4.83392 0H0.171997L6.28424 8.89547L0.171997 16H1.55319L6.89742 9.78782L11.166 16H15.828L9.48908 6.77491H9.48942ZM7.59768 8.97384L6.97839 8.08805L2.05086 1.03974H4.17229L8.14887 6.72795L8.76816 7.61374L13.9372 15.0075H11.8158L7.59768 8.97418V8.97384Z" fill="white"></path></g><defs><clipPath id="clip0_76_243"><rect width="16" height="16" fill="white"></rect></clipPath></defs></symbol><symbol id="icon-game-play" viewBox="0 0 20 20"><path d="M14.575 8L4.66671 13.975C4.08337 14.325 3.33337 13.9083 3.33337 13.225V6.55833C3.33337 3.65 6.47504 1.83333 9.00004 3.28333L12.825 5.48333L14.5667 6.48333C15.1417 6.825 15.15 7.65833 14.575 8Z"></path><path d="M15.075 12.8833L11.7 14.8333L8.33334 16.775C7.12501 17.4667 5.75834 17.325 4.76667 16.625C4.28334 16.2917 4.34167 15.55 4.85001 15.25L15.4417 8.9C15.9417 8.6 16.6 8.88334 16.6917 9.45834C16.9 10.75 16.3667 12.1417 15.075 12.8833Z"></path></symbol><symbol id="icon-bottom-menu-wallet" viewBox="0 0 17 16"><path d="M16.5 6.99512V9.00488C16.5 9.54146 16.1569 9.98049 15.7201 10H14.1916C13.3494 10 12.5773 9.22927 12.5071 8.17561C12.4603 7.56098 12.6475 6.98537 12.975 6.58537C13.2636 6.21463 13.6613 6 14.098 6H15.7201C16.1569 6.01951 16.5 6.45854 16.5 6.99512Z"></path><path d="M15.1027 10.9235H13.9721C12.4699 10.9235 11.2049 9.74588 11.0784 8.24706C11.0073 7.39059 11.3077 6.53412 11.9086 5.92471C12.4146 5.38118 13.1182 5.07647 13.8772 5.07647H15.1027C15.332 5.07647 15.5217 4.87882 15.498 4.64C15.3241 2.63882 14.0512 1.27176 12.1616 1.04118C11.9718 1.00824 11.7742 1 11.5686 1H4.45308C4.23171 1 4.01824 1.01647 3.81268 1.04941C1.79661 1.31294 0.5 2.87765 0.5 5.11765V10.8824C0.5 13.1553 2.27098 15 4.45308 15H11.5686C13.7824 15 15.3082 13.5588 15.498 11.36C15.5217 11.1212 15.332 10.9235 15.1027 10.9235ZM9.19678 6.14706H4.45308C4.12893 6.14706 3.86012 5.86706 3.86012 5.52941C3.86012 5.19176 4.12893 4.91176 4.45308 4.91176H9.19678C9.52093 4.91176 9.78974 5.19176 9.78974 5.52941C9.78974 5.86706 9.52093 6.14706 9.19678 6.14706Z"></path></symbol><symbol id="icon-bottom-menu-band" viewBox="0 0 17 16"><path d="M12.1867 5.18001C12.14 5.17334 12.0934 5.17334 12.0467 5.18001C11.0134 5.14668 10.1934 4.30001 10.1934 3.26001C10.1934 2.20001 11.0534 1.33334 12.12 1.33334C13.18 1.33334 14.0467 2.19334 14.0467 3.26001C14.04 4.30001 13.22 5.14668 12.1867 5.18001Z"></path><path d="M14.36 9.79999C13.6133 10.3 12.5666 10.4867 11.6 10.36C11.8533 9.81333 11.9866 9.20666 11.9933 8.56666C11.9933 7.89999 11.8467 7.26666 11.5667 6.71333C12.5533 6.57999 13.6 6.76666 14.3533 7.26666C15.4067 7.95999 15.4067 9.09999 14.36 9.79999Z"></path><path d="M4.79327 5.18001C4.83994 5.17334 4.88661 5.17334 4.93327 5.18001C5.96661 5.14668 6.78661 4.30001 6.78661 3.26001C6.78661 2.19334 5.92661 1.33334 4.85994 1.33334C3.79994 1.33334 2.93994 2.19334 2.93994 3.26001C2.93994 4.30001 3.75994 5.14668 4.79327 5.18001Z"></path><path d="M4.86662 8.56666C4.86662 9.21333 5.00662 9.82666 5.25996 10.38C4.31996 10.48 3.33996 10.28 2.61996 9.80666C1.56662 9.10666 1.56662 7.96666 2.61996 7.26666C3.33329 6.78666 4.33996 6.59333 5.28662 6.7C5.01329 7.26 4.86662 7.89333 4.86662 8.56666Z"></path><path d="M8.57995 10.58C8.52662 10.5733 8.46662 10.5733 8.40662 10.58C7.17995 10.54 6.19995 9.53333 6.19995 8.29333C6.20662 7.02667 7.22662 6 8.49995 6C9.76662 6 10.7933 7.02667 10.7933 8.29333C10.7866 9.53333 9.81328 10.54 8.57995 10.58Z"></path><path d="M6.41333 11.96C5.40666 12.6333 5.40666 13.74 6.41333 14.4067C7.55999 15.1733 9.43999 15.1733 10.5867 14.4067C11.5933 13.7333 11.5933 12.6267 10.5867 11.96C9.44666 11.1933 7.56666 11.1933 6.41333 11.96Z"></path></symbol><symbol id="icon-bottom-menu-tasks" viewBox="0 0 17 16"><path d="M11.852 0H5.148C2.236 0 0.5 1.736 0.5 4.648V11.352C0.5 14.264 2.236 16 5.148 16H11.852C14.764 16 16.5 14.264 16.5 11.352V4.648C16.5 1.736 14.764 0 11.852 0ZM6.876 10.32L5.076 12.12C4.956 12.24 4.804 12.296 4.652 12.296C4.5 12.296 4.34 12.24 4.228 12.12L3.628 11.52C3.388 11.288 3.388 10.904 3.628 10.672C3.86 10.44 4.236 10.44 4.476 10.672L4.652 10.848L6.028 9.472C6.26 9.24 6.636 9.24 6.876 9.472C7.108 9.704 7.108 10.088 6.876 10.32ZM6.876 4.72L5.076 6.52C4.956 6.64 4.804 6.696 4.652 6.696C4.5 6.696 4.34 6.64 4.228 6.52L3.628 5.92C3.388 5.688 3.388 5.304 3.628 5.072C3.86 4.84 4.236 4.84 4.476 5.072L4.652 5.248L6.028 3.872C6.26 3.64 6.636 3.64 6.876 3.872C7.108 4.104 7.108 4.488 6.876 4.72ZM12.948 11.696H8.748C8.42 11.696 8.148 11.424 8.148 11.096C8.148 10.768 8.42 10.496 8.748 10.496H12.948C13.284 10.496 13.548 10.768 13.548 11.096C13.548 11.424 13.284 11.696 12.948 11.696ZM12.948 6.096H8.748C8.42 6.096 8.148 5.824 8.148 5.496C8.148 5.168 8.42 4.896 8.748 4.896H12.948C13.284 4.896 13.548 5.168 13.548 5.496C13.548 5.824 13.284 6.096 12.948 6.096Z"></path></symbol><symbol id="icon-bottom-menu-home" viewBox="0 0 16 16"><path d="M15.7685 5.99143C15.8507 5.97193 15.9211 5.91914 15.9628 5.84571C16.037 5.71107 15.9976 5.54212 15.8714 5.45429L7.99995 0L0.128525 5.45429C0.00233745 5.54212 -0.0371264 5.71107 0.0370963 5.84571C0.0917305 5.94093 0.193031 5.99975 0.302811 6C0.363224 5.99953 0.422048 5.98059 0.471382 5.94571L7.67424 0.96C7.86973 0.822857 8.13018 0.822857 8.32567 0.96L15.5285 5.94571C15.5982 5.9949 15.6857 6.01157 15.7685 5.99143Z"></path><path d="M1.42847 5.97999V15.1428C1.42988 15.6156 1.81281 15.9986 2.28561 16H13.7142C14.187 15.9986 14.5699 15.6156 14.5713 15.1428V5.97999L7.9999 1.42856L1.42847 5.97999ZM11.417 5.92284C11.6056 6.08559 11.7141 6.32232 11.7142 6.57142V12.2857C11.7142 13.2314 10.817 14 9.71418 14C8.61132 14 7.71418 13.2314 7.71418 12.2857C7.71418 11.34 8.61132 10.5714 9.71418 10.5714C9.80968 10.5714 9.90508 10.5772 9.9999 10.5886V8.19713L6.57132 8.66284V13.1428C6.57132 14.0886 5.67418 14.8571 4.57132 14.8571C3.46847 14.8571 2.57132 14.0886 2.57132 13.1428C2.57132 12.1971 3.46847 11.4286 4.57132 11.4286C4.66682 11.4286 4.76223 11.4343 4.85704 11.4457V7.27142C4.85976 6.84442 5.17438 6.48363 5.59704 6.42284L10.7428 5.72284C10.9858 5.68976 11.2313 5.76259 11.417 5.92284Z"></path></symbol><symbol id="icon-music-alt" viewBox="0 0 24 22"><path d="M19.7352 0.0418286L11.8362 7.72882L3.9129 0L5.03901 15.2367C4.11943 15.0433 3.05541 15.2037 2.09139 15.7602C0.260411 16.8174 -0.515053 18.9023 0.359754 20.4173C1.23423 21.9323 3.42762 22.3032 5.25893 21.246C6.60235 20.4702 7.37749 19.1412 7.34971 17.8902H7.35102L7.35102 7.97293L11.81 9.95456L19.7352 0.0418286Z" fill="url(#paint0_linear_268_246)"></path><path d="M21.8361 15.8139C20.876 15.2597 19.8163 15.0982 18.8993 15.2881L20.0241 0.466709L11.9685 10.7481L7.84509 8.78179L11.9685 13.3842L16.5863 8.76643V17.7854C16.4856 19.0814 17.2686 20.4915 18.6689 21.3C20.4999 22.3571 22.6933 21.9862 23.5681 20.4713C24.4426 18.9563 23.6674 16.8714 21.8364 15.8142L21.8361 15.8139Z" fill="url(#paint1_linear_268_246)"></path><defs><linearGradient id="paint0_linear_268_246" x1="9.86762" y1="0" x2="9.86762" y2="21.8482" gradientUnits="userSpaceOnUse"><stop stop-color="#00CDD3"></stop><stop offset="1" stop-color="#018297"></stop></linearGradient><linearGradient id="paint1_linear_268_246" x1="15.8864" y1="0.466709" x2="15.8864" y2="21.9022" gradientUnits="userSpaceOnUse"><stop stop-color="#00CDD3"></stop><stop offset="1" stop-color="#018297"></stop></linearGradient></defs></symbol><symbol id="icon-white-music-alt" viewBox="0 0 24 22"><path d="M19.7352 0.0418286L11.8362 7.72882L3.9129 0L5.03901 15.2367C4.11943 15.0433 3.05541 15.2037 2.09139 15.7602C0.260411 16.8174 -0.515053 18.9023 0.359754 20.4173C1.23423 21.9323 3.42762 22.3032 5.25893 21.246C6.60235 20.4702 7.37749 19.1412 7.34971 17.8902H7.35102L7.35102 7.97293L11.81 9.95456L19.7352 0.0418286Z" fill="#fff"></path><path d="M21.8361 15.8139C20.876 15.2597 19.8163 15.0982 18.8993 15.2881L20.0241 0.466709L11.9685 10.7481L7.84509 8.78179L11.9685 13.3842L16.5863 8.76643V17.7854C16.4856 19.0814 17.2686 20.4915 18.6689 21.3C20.4999 22.3571 22.6933 21.9862 23.5681 20.4713C24.4426 18.9563 23.6674 16.8714 21.8364 15.8142L21.8361 15.8139Z" fill="#fff"></path></symbol><symbol id="icon-notification-close" viewBox="0 0 10 10"><path d="M0.183058 0.183058C0.427136 -0.0610193 0.822864 -0.0610193 1.06694 0.183058L5 4.11562L8.93306 0.183058C9.15836 -0.0422441 9.51288 -0.0595753 9.75806 0.131065L9.81694 0.183058C10.061 0.427136 10.061 0.822864 9.81694 1.06694L5.88438 5L9.81694 8.93306C10.0422 9.15836 10.0596 9.51288 9.86893 9.75806L9.81694 9.81694C9.57286 10.061 9.17714 10.061 8.93306 9.81694L5 5.88438L1.06694 9.81694C0.841639 10.0422 0.48712 10.0596 0.241938 9.86893L0.183058 9.81694C-0.0610193 9.57286 -0.0610193 9.17714 0.183058 8.93306L4.11562 5L0.183058 1.06694C-0.0422441 0.841639 -0.0595753 0.48712 0.131065 0.241938L0.183058 0.183058Z" fill="#5B5D65"></path></symbol><symbol id="icon-notification-error" viewBox="0 0 16 16"><g clip-path="url(#clip0_159_567)"><path d="M13.3025 13C13.184 12.9999 13.068 12.9661 12.9679 12.9025C12.8679 12.839 12.788 12.7483 12.7375 12.641C12.6871 12.5338 12.6682 12.4144 12.683 12.2968C12.6978 12.1792 12.7458 12.0682 12.8213 11.9769C13.7389 10.8547 14.2402 9.44963 14.2402 8C14.2402 6.55037 13.7389 5.14535 12.8213 4.02313C12.769 3.95981 12.7297 3.88681 12.7056 3.8083C12.6816 3.72979 12.6732 3.64731 12.681 3.56556C12.6888 3.48382 12.7126 3.40441 12.7511 3.33188C12.7896 3.25934 12.842 3.1951 12.9054 3.14282C13.0332 3.03723 13.1978 2.98676 13.3629 3.00253C13.528 3.01829 13.6801 3.09899 13.7857 3.22688C14.8867 4.57396 15.4881 6.26024 15.4881 8C15.4881 9.73977 14.8867 11.426 13.7857 12.7731C13.7269 12.8443 13.6531 12.9015 13.5695 12.9407C13.486 12.98 13.3948 13.0002 13.3025 13ZM3.09442 12.8569C3.15776 12.8046 3.21018 12.7404 3.2487 12.6679C3.28721 12.5955 3.31107 12.5161 3.31891 12.4344C3.32674 12.3526 3.3184 12.2702 3.29436 12.1917C3.27032 12.1132 3.23105 12.0402 3.1788 11.9769C2.26117 10.8547 1.75986 9.44963 1.75986 8C1.75986 6.55037 2.26117 5.14535 3.1788 4.02313C3.23108 3.95985 3.27039 3.88689 3.29447 3.80842C3.31856 3.72995 3.32695 3.6475 3.31918 3.56578C3.3114 3.48407 3.2876 3.40468 3.24915 3.33216C3.21069 3.25965 3.15833 3.19541 3.09505 3.14313C3.03177 3.09085 2.95881 3.05154 2.88034 3.02745C2.80187 3.00337 2.71942 2.99497 2.6377 3.00275C2.55599 3.01053 2.4766 3.03432 2.40408 3.07278C2.33156 3.11123 2.26733 3.1636 2.21505 3.22688C1.11374 4.57381 0.512085 6.26014 0.512085 8C0.512085 9.73986 1.11374 11.4262 2.21505 12.7731C2.32061 12.9008 2.47252 12.9813 2.6374 12.997C2.80229 13.0127 2.96666 12.9623 3.09442 12.8569ZM13 8C12.9986 9.32563 12.4713 10.5965 11.5339 11.5339C10.5966 12.4713 9.32567 12.9985 8.00005 13C1.38255 12.765 1.38442 3.23375 8.00005 3C9.32567 3.00149 10.5966 3.52875 11.5339 4.46611C12.4713 5.40347 12.9986 6.67438 13 8ZM8.62505 10.5C8.62505 10.3342 8.5592 10.1753 8.44199 10.0581C8.32478 9.94085 8.16581 9.875 8.00005 9.875C7.83429 9.875 7.67532 9.94085 7.55811 10.0581C7.4409 10.1753 7.37505 10.3342 7.37505 10.5C7.37505 10.6658 7.4409 10.8247 7.55811 10.9419C7.67532 11.0592 7.83429 11.125 8.00005 11.125C8.16581 11.125 8.32478 11.0592 8.44199 10.9419C8.5592 10.8247 8.62505 10.6658 8.62505 10.5ZM8.62505 5.5C8.62505 5.33424 8.5592 5.17527 8.44199 5.05806C8.32478 4.94085 8.16581 4.875 8.00005 4.875C7.83429 4.875 7.67532 4.94085 7.55811 5.05806C7.4409 5.17527 7.37505 5.33424 7.37505 5.5V8C7.37505 8.16576 7.4409 8.32473 7.55811 8.44194C7.67532 8.55915 7.83429 8.625 8.00005 8.625C8.16581 8.625 8.32478 8.55915 8.44199 8.44194C8.5592 8.32473 8.62505 8.16576 8.62505 8V5.5Z" fill="white"></path></g><defs><clipPath id="clip0_159_567"><rect width="15" height="15" fill="white" transform="translate(0.5 0.5)"></rect></clipPath></defs></symbol><symbol id="icon-notification-success" viewBox="0 0 16 16"><g clip-path="url(#clip0_159_576)"><path d="M8 0.5C3.86437 0.5 0.5 3.86437 0.5 8C0.5 12.1356 3.86437 15.5 8 15.5C12.1356 15.5 15.5 12.1356 15.5 8C15.5 3.86437 12.1356 0.5 8 0.5ZM11.875 7.07L9.10875 9.78563C8.61938 10.2656 7.98938 10.505 7.35875 10.505C6.735 10.505 6.11125 10.27 5.62375 9.79937L4.43687 8.6325C4.19062 8.39062 4.1875 7.995 4.42938 7.74875C4.67063 7.50187 5.0675 7.49875 5.31313 7.74125L6.49625 8.90438C6.98125 9.37313 7.74687 9.37062 8.23438 8.89312L11 6.17812C11.2456 5.93563 11.64 5.94 11.8838 6.18625C12.1256 6.4325 12.1219 6.82812 11.875 7.07Z" fill="white"></path></g><defs><clipPath id="clip0_159_576"><rect width="15" height="15" fill="white" transform="translate(0.5 0.5)"></rect></clipPath></defs></symbol><symbol id="icon-notification-warning" viewBox="0 0 16 16"><g clip-path="url(#clip0_159_600)"><path d="M15.0875 6.425L12.9 2.675C12.3419 1.71875 11.3081 1.125 10.2006 1.125H5.78064C4.67377 1.125 3.63939 1.71875 3.08127 2.675L0.894395 6.425C0.32752 7.39625 0.32752 8.60313 0.894395 9.57438L3.08189 13.3244C3.64002 14.2806 4.67377 14.8744 5.78127 14.8744H10.2013C11.3081 14.8744 12.3425 14.2806 12.9006 13.3244L15.0881 9.57438C15.655 8.60313 15.6544 7.39625 15.0875 6.425ZM7.37502 4.875C7.37502 4.52938 7.65502 4.25 8.00002 4.25C8.34502 4.25 8.62502 4.52938 8.62502 4.875V8.3125C8.62502 8.65812 8.34502 8.9375 8.00002 8.9375C7.65502 8.9375 7.37502 8.65812 7.37502 8.3125V4.875ZM8.00002 11.75C7.48252 11.75 7.06252 11.33 7.06252 10.8125C7.06252 10.295 7.48252 9.875 8.00002 9.875C8.51752 9.875 8.93752 10.295 8.93752 10.8125C8.93752 11.33 8.51752 11.75 8.00002 11.75Z" fill="white"></path></g><defs><clipPath id="clip0_159_600"><rect width="15" height="15" fill="white" transform="translate(0.5 0.5)"></rect></clipPath></defs></symbol><symbol id="icon-notification-info" viewBox="0 0 14 14"><g clip-path="url(#clip0_159_587)"><path d="M2.4556 10.4375H11.4252C11.7012 10.4375 11.9732 10.371 12.2181 10.2437C12.4631 10.1163 12.6737 9.93185 12.8322 9.70587C12.9908 9.47989 13.0926 9.21904 13.129 8.9454C13.1654 8.67176 13.1353 8.39337 13.0414 8.1338L11.4074 3.61635C11.1284 2.61244 10.5282 1.72756 9.69858 1.09705C8.86901 0.466544 7.85575 0.125122 6.81377 0.125C5.72909 0.124983 4.67682 0.494868 3.83072 1.17358C2.98461 1.8523 2.39526 2.79926 2.15997 3.85812L0.813617 8.21229C0.734348 8.46936 0.716528 8.74145 0.76159 9.00666C0.806652 9.27187 0.913338 9.5228 1.07306 9.73926C1.23279 9.95572 1.44109 10.1317 1.68122 10.2529C1.92134 10.3742 2.18658 10.4374 2.4556 10.4375Z" fill="white"></path><path d="M4.19275 11.5833C4.32424 12.2309 4.67556 12.8131 5.18718 13.2312C5.69881 13.6494 6.33926 13.8779 7.00004 13.8779C7.66082 13.8779 8.30128 13.6494 8.8129 13.2312C9.32452 12.8131 9.67584 12.2309 9.80733 11.5833H4.19275Z" fill="white"></path></g><defs><clipPath id="clip0_159_587"><rect width="13.75" height="13.75" fill="white" transform="translate(0.125 0.125)"></rect></clipPath></defs></symbol><symbol id="icon-error" viewBox="0 0 40 40"><path d="M36.2666 26.5333L25.6 7.33331C24.1666 4.74998 22.1833 3.33331 20 3.33331C17.8166 3.33331 15.8333 4.74998 14.4 7.33331L3.7333 26.5333C2.3833 28.9833 2.2333 31.3333 3.31663 33.1833C4.39996 35.0333 6.5333 36.05 9.3333 36.05H30.6666C33.4666 36.05 35.6 35.0333 36.6833 33.1833C37.7666 31.3333 37.6166 28.9666 36.2666 26.5333ZM18.75 15C18.75 14.3166 19.3166 13.75 20 13.75C20.6833 13.75 21.25 14.3166 21.25 15V23.3333C21.25 24.0166 20.6833 24.5833 20 24.5833C19.3166 24.5833 18.75 24.0166 18.75 23.3333V15ZM21.1833 29.5166C21.1 29.5833 21.0166 29.65 20.9333 29.7166C20.8333 29.7833 20.7333 29.8333 20.6333 29.8666C20.5333 29.9166 20.4333 29.95 20.3166 29.9666C20.2166 29.9833 20.1 30 20 30C19.9 30 19.7833 29.9833 19.6666 29.9666C19.5666 29.95 19.4666 29.9166 19.3666 29.8666C19.2666 29.8333 19.1666 29.7833 19.0666 29.7166C18.9833 29.65 18.9 29.5833 18.8166 29.5166C18.5166 29.2 18.3333 28.7666 18.3333 28.3333C18.3333 27.9 18.5166 27.4666 18.8166 27.15C18.9 27.0833 18.9833 27.0166 19.0666 26.95C19.1666 26.8833 19.2666 26.8333 19.3666 26.8C19.4666 26.75 19.5666 26.7166 19.6666 26.7C19.8833 26.65 20.1166 26.65 20.3166 26.7C20.4333 26.7166 20.5333 26.75 20.6333 26.8C20.7333 26.8333 20.8333 26.8833 20.9333 26.95C21.0166 27.0166 21.1 27.0833 21.1833 27.15C21.4833 27.4666 21.6666 27.9 21.6666 28.3333C21.6666 28.7666 21.4833 29.2 21.1833 29.5166Z" fill="#FF4D4D"></path></symbol><symbol id="icon-modal-close" viewBox="0 0 20 20"><g opacity="0.15" clip-path="url(#clip0_2_94)"><path d="M10 0C4.48583 0 0 4.48583 0 10C0 15.5142 4.48583 20 10 20C15.5142 20 20 15.5142 20 10C20 4.48583 15.5142 0 10 0ZM13.0892 11.9108C13.415 12.2367 13.415 12.7633 13.0892 13.0892C12.9267 13.2517 12.7133 13.3333 12.5 13.3333C12.2867 13.3333 12.0733 13.2517 11.9108 13.0892L10 11.1783L8.08917 13.0892C7.92667 13.2517 7.71333 13.3333 7.5 13.3333C7.28667 13.3333 7.07333 13.2517 6.91083 13.0892C6.585 12.7633 6.585 12.2367 6.91083 11.9108L8.82167 10L6.91083 8.08917C6.585 7.76333 6.585 7.23667 6.91083 6.91083C7.23667 6.585 7.76333 6.585 8.08917 6.91083L10 8.82167L11.9108 6.91083C12.2367 6.585 12.7633 6.585 13.0892 6.91083C13.415 7.23667 13.415 7.76333 13.0892 8.08917L11.1783 10L13.0892 11.9108Z" fill="white"></path></g><defs><clipPath id="clip0_2_94"><rect width="20" height="20" fill="white"></rect></clipPath></defs></symbol><symbol id="icon-input-loading-error" viewBox="0 0 18 18"><path d="M16.32 11.94L11.52 3.3C10.875 2.1375 9.98251 1.5 9.00001 1.5C8.01751 1.5 7.12501 2.1375 6.48001 3.3L1.68001 11.94C1.07251 13.0425 1.00501 14.1 1.49251 14.9325C1.98001 15.765 2.94001 16.2225 4.20001 16.2225H13.8C15.06 16.2225 16.02 15.765 16.5075 14.9325C16.995 14.1 16.9275 13.035 16.32 11.94ZM8.43751 6.75C8.43751 6.4425 8.69251 6.1875 9.00001 6.1875C9.30751 6.1875 9.56251 6.4425 9.56251 6.75V10.5C9.56251 10.8075 9.30751 11.0625 9.00001 11.0625C8.69251 11.0625 8.43751 10.8075 8.43751 10.5V6.75ZM9.53251 13.2825C9.49501 13.3125 9.45751 13.3425 9.42001 13.3725C9.37501 13.4025 9.33001 13.425 9.28501 13.44C9.24001 13.4625 9.19501 13.4775 9.14251 13.485C9.09751 13.4925 9.04501 13.5 9.00001 13.5C8.95501 13.5 8.90251 13.4925 8.85001 13.485C8.80501 13.4775 8.76001 13.4625 8.71501 13.44C8.67001 13.425 8.62501 13.4025 8.58001 13.3725C8.54251 13.3425 8.50501 13.3125 8.46751 13.2825C8.33251 13.14 8.25001 12.945 8.25001 12.75C8.25001 12.555 8.33251 12.36 8.46751 12.2175C8.50501 12.1875 8.54251 12.1575 8.58001 12.1275C8.62501 12.0975 8.67001 12.075 8.71501 12.06C8.76001 12.0375 8.80501 12.0225 8.85001 12.015C8.94751 11.9925 9.05251 11.9925 9.14251 12.015C9.19501 12.0225 9.24001 12.0375 9.28501 12.06C9.33001 12.075 9.37501 12.0975 9.42001 12.1275C9.45751 12.1575 9.49501 12.1875 9.53251 12.2175C9.66751 12.36 9.75001 12.555 9.75001 12.75C9.75001 12.945 9.66751 13.14 9.53251 13.2825Z" fill="#FC3434"></path></symbol><symbol id="icon-input-loading-success" viewBox="0 0 18 18"><g clip-path="url(#clip0_2_21)"><path d="M9 0C4.03725 0 0 4.03725 0 9C0 13.9628 4.03725 18 9 18C13.9628 18 18 13.9628 18 9C18 4.03725 13.9628 0 9 0ZM13.65 7.884L10.3305 11.1427C9.74325 11.7188 8.98725 12.006 8.2305 12.006C7.482 12.006 6.7335 11.724 6.1485 11.1593L4.72425 9.759C4.42875 9.46875 4.425 8.994 4.71525 8.6985C5.00475 8.40225 5.481 8.3985 5.77575 8.6895L7.1955 10.0852C7.7775 10.6477 8.69625 10.6447 9.28125 10.0717L12.6 6.81375C12.8947 6.52275 13.368 6.528 13.6605 6.8235C13.9508 7.119 13.9463 7.59375 13.65 7.884Z" fill="#34FCD8"></path></g><defs><clipPath id="clip0_2_21"><rect width="18" height="18" fill="white"></rect></clipPath></defs></symbol><symbol id="icon-rock" viewBox="0 0 16 16"><path d="M10.3333 10C9.77999 10 9.33332 9.55333 9.33332 9V6.33333C9.33332 5.78 9.77999 5.33333 10.3333 5.33333C10.8867 5.33333 11.3333 5.78 11.3333 6.33333V9C11.3333 9.55333 10.8867 10 10.3333 10ZM8.66666 9V6.33333C8.66666 5.78 8.21999 5.33333 7.66666 5.33333C7.11332 5.33333 6.66666 5.78 6.66666 6.33333V9C6.66666 9.55333 7.11332 10 7.66666 10C8.21999 10 8.66666 9.55333 8.66666 9ZM13.5 0.679995C13.0067 0.759995 12.6667 1.22 12.6667 1.72V8.88C12.6667 10.1467 11.7067 11.2733 10.44 11.3267C9.90666 11.3533 9.40666 11.1933 8.99999 10.9067C8.61999 11.1733 8.15999 11.3267 7.66666 11.3267C7.11332 11.3267 6.61332 11.1333 6.21332 10.8133C6.19999 10.8267 4.99999 12.0333 4.58666 12.44C4.32666 12.7 3.90666 12.7 3.64666 12.44C3.38666 12.18 3.38666 11.76 3.64666 11.5L5.19999 9.94666C5.77332 9.37333 5.71332 8.41333 5.02666 7.91333C4.48666 7.52666 3.73332 7.64 3.25999 8.10666L1.46666 9.9C0.39999 10.9667 0.39999 12.6933 1.46666 13.76L2.52666 14.82C3.27999 15.5733 4.29332 15.9933 5.35332 15.9933H11.3333C13.1733 15.9933 14.6667 14.5 14.6667 12.66V1.66666C14.6667 1.06 14.1267 0.579995 13.5 0.679995ZM5.33332 6.57333V1.05333C5.33332 0.553329 4.99332 0.0933288 4.49999 0.0133288C3.87332 -0.0866712 3.33332 0.393329 3.33332 0.999995V6.50666C3.97999 6.26666 4.69999 6.29333 5.33332 6.56666V6.57333Z" fill="white"></path></symbol><symbol id="icon-avatar-pen-edit" viewBox="0 0 24 24"><g clip-path="url(#clip0_2_4)"><path d="M13.75 11.664L10.293 15.121C9.734 15.68 8.961 16 8.172 16H8V15.828C8 15.039 8.32 14.266 8.879 13.707L12.336 10.25L13.75 11.664ZM14.793 7.793L13.75 8.836L15.164 10.25L16.207 9.207C16.597 8.817 16.597 8.183 16.207 7.793C15.817 7.403 15.184 7.402 14.793 7.793ZM24 12C24 18.617 18.617 24 12 24C5.383 24 0 18.617 0 12C0 5.383 5.383 0 12 0C18.617 0 24 5.383 24 12ZM17.621 6.379C16.451 5.209 14.549 5.209 13.379 6.379L7.465 12.293C6.521 13.237 6 14.493 6 15.828V17C6 17.553 6.447 18 7 18H8.172C9.507 18 10.763 17.479 11.707 16.535L17.621 10.621C18.791 9.451 18.791 7.549 17.621 6.379Z" fill="white"></path></g><defs><clipPath id="clip0_2_4"><rect width="24" height="24" fill="white"></rect></clipPath></defs></symbol></defs>',1)]))}const Ou=Yn(Bu,[["render",Pu]]),Yu="/static/images/background-1.Cww4E_2l.png",Nu="/static/images/band-banner-icon.D3YJhzix.png",Vu="/static/images/daily-band-rewards-icon.CIrxQRZq.png",Du="/static/images/drop-game-background.BP8pWCuQ.png",Xu="/static/images/drop-game-tap.B0V1joVt.png",zu="/static/images/drop-game-test-player.r7L_lFBJ.png",Uu="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADQAAAAwCAYAAABe6Vn9AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAY2SURBVHgBzVp9aJVVHH4mkh9pSaRprq1CpaiQgigIqaAooqCIQCr6I8ioCCIKVOgDigIRklqD5UDKsqxY/4QQFRZZSv0TsyiC0rRyrdrc3Jy53d2eZ+857XfPPe/uufO91gMP59zzno/fcz5/73kvUAPlcnkl/gegHQtS8s1IyLOSlX2VWmEj4Dp1QSE2sJK7yRFyz38him0+5MIfUARY0Spy0HEXeTpOEtjWOrKV3EAeRRFgRS1kn2M/+enJEMU22shLyAdcZ36TUi5lDZXJUXLMhReSXWzgNDQAqpd8j9G95AD5rGv3p5TyNQU1NTUdZFBCJshToj5kw+egQLhOepfsJneQXabt8ZQ6UkZI+AuTI+RFLSbfohHNKABOzHayxE58iuEL5BLTZl9KPamC+lyldqRKrsFtJyrKiXmDPJW8j78fYXg5KmfF/pS6UgUdRuU6sjyLfI1GLMU04MptJVeQ95NXkA+jUow4kFJfqqD+SAOWmn5b6hXl8m8hl5HPkYPkWlOvneKHU+pMFXQw0kAJlVNQI9VJI89OqdDl60TWGa+S2tkkbq5pq2TaLHSEwl3OTr2xQFRHLVHueQe5iPyWm8AGho+537bDbN2/oEBBvyI+1UpGmDdARrXT6CWIi1F6OzLxGvlHmbaG4U3I7yzFyyhQ0EBEyFgg5LgxYiH5UijK/W5zz5X3cXIeeS8qOyi2hn5DgYIGUT3dwmkxHqTJ6E0UsdiJUaiz5Uz3vJMcQrYZxASEbRxJsBMzkYYjrtJa0LRoMr9lvNaU1siDyESqni6uG+2Km11aCTWmFPMPIQGpgg6hWpAMGCZ3k9dPUXY2+aSLq44eGvcyxdzD+LmId5TtGMV/RyJSBQ3nNDxA4zbSOB2MdyE7FOdNUU8vuZb5b2V4Z6ROK8LGk7ZsIVWQhns0aBTGoPPI1x0vJlcj28UsZNgzLlxtynrjFX5MXhekKSxWEEdhmL1aQvUaKblQrr7cfLn425l/DfNfy/jNyKaV8DayjpGoWcg6yI6Cdj9NrWtQvZ4GUaQgB22bCwMjJgQ5wc8z+jSp9bGT4TtM38n4RSrH+CeMa5s+A9VTrd3kHTXpvgOTdjghddsGKl0du73CidL6kNvfQ64iX6SBTzAcd2JuZ/wyVB/ObRJjBMTOux4kop4RUqX+ksSPUkVP07A/aPhGRtchexVYTq5n2ncML3D57bR9hWU+M1WUEd98krZsoZ4R8meRdU1KYSYa+DODTajs6WWoHpmOQIwQjpCfCQ0RNIS4L1cFGvo9g82o9sy9gZ3MsytS1AsKfbk/kYh6ppwXZJHrPdDgLzjVtAHI6bQbyVY+251TzF/IAJXbdpJjKtQjKHa4lqYqQMPfpyj5eDe6pG1M2zNFkbw11JAR8hclFjX9OwrY4e7xfmT8yxrZ8wSNIBH1CFJP28MQSHNYJepNpMGfbWXzW+UbIqgPk1PMz+0SioXvNJh2ku4SPOoR5C9KLEZRLGJTLnnLFmoKMl8c9BoQTrmk28w6YTtJbQ2jDkQF6YKewVXIbmRmmUd2iuUt4BOBf+v1kKBm2rPetfc3Mo9FzvABrq0qL7xCkNuNbiBbMLlOQjffxoteQ0C1oHJg71JHfZHYq/MOQYbMwnJZr8t3IO7a22lmD7tGj9BU0P3dlbR7PkV94BMnBCmRwW3IXKFQjEdMYNGCptNJK/SuRlEf6YcfoVuQibHbshAT5tPLKH7KhYLC2WHTrR3LKaqXorpnMiIXfy7iPROOSiisESMU7qS2fR8HKn094VKyWyPUjGqH0CJMsxUV891zEqGnELYX25g8ZujuT4LmBpXkebmx9OR3/UTIGwkvY2Ii8mbMAgmagalHKA/KewAFgmvgOHtZdxeLctqrZdtMCVIvn1IjY7htCyM0YB+Khw7NqzE9DEmQPlOk/qHC9tLnaADcvYSuw1pij5GdVbFzUeiVIE2bVnIO0tEdczsKhEZJN7Dz3e9aG4PC/bTp6MQD9ojE6CPtHOTv/YLeS75mwaI3gyhol/4+0Iq4GGBytvT7l8cmU1hiljjODurWO8khFkr6RlMknF3nI3OUQ1HazPbRrn83p6acSiRI1MF5jAWKPkCnBfcq472bY7FPLP8AzBRIPpc0VYYAAAAASUVORK5CYII=",qu="/static/images/game-circle-loader.DIVWmBWS.png",Gu="/static/images/home-game-background.CFt573Qs.png",ju="/static/images/logo-square.K2H6PI12.png",Hu="_text_2ocy3_14",Ss={"landscape-error":"_landscape-error_2ocy3_1",text:Hu},Wu={"show-landscape-error-text-enter-from":"_show-landscape-error-text-enter-from_119d2_1","show-landscape-error-text-leave-to":"_show-landscape-error-text-leave-to_119d2_2","show-landscape-error-text-enter-to":"_show-landscape-error-text-enter-to_119d2_6","show-landscape-error-text-leave-from":"_show-landscape-error-text-leave-from_119d2_7","show-landscape-error-text-enter-active":"_show-landscape-error-text-enter-active_119d2_11","show-landscape-error-text-leave-active":"_show-landscape-error-text-leave-active_119d2_12"},Zu={__name:"landscape-error",setup(d,{expose:e}){const t=ye(window.matchMedia("(orientation: portrait)").matches),i=()=>{t.value=window.matchMedia("(orientation: portrait)").matches};e({isPortrait:t});const a=window.matchMedia("(orientation: portrait)");return rt(()=>{a.addEventListener("change",i)}),uo(()=>{a.removeEventListener("change",i)}),(n,o)=>t.value?Te("",!0):(z(),Z("div",{key:0,class:S({[x(Ss)["landscape-error"]]:!0})},[U(ee,{name:"show-landscape-error-text","animation-style":x(Wu),"start-animation":!0},{default:Q(()=>[L("span",{class:S({[x(Ss).text]:!0})},"Switch the device to portrait mode",2)]),_:1},8,["animation-style"])],2))}},$u="_logo_r2w24_29",Ku="_text_r2w24_37",Qu={"main-container":"_main-container_r2w24_7","main-is-landscape":"_main-is-landscape_r2w24_16","not-mobile-device":"_not-mobile-device_r2w24_19",logo:$u,text:Ku,"main-is-full-width":"_main-is-full-width_r2w24_43","game-notification":"_game-notification_r2w24_49"},Ju={__name:"app",setup(d){const e=[{tag:"background-1",component:Yu},{tag:"band-banner-icon",component:Nu},{tag:"daily-band-rewards-icon",component:Vu},{tag:"drop-game-background",component:Du},{tag:"drop-game-tap",component:Xu},{tag:"drop-game-test-player",component:zu},{tag:"drop-game-music-alt",component:Uu},{tag:"game-circle-loader",component:qu},{tag:"home-game-background",component:Gu},{tag:"logo-square",component:ju},{tag:"no-image",component:la},{tag:"cdn-no-avatar",component:"https://avatars.cdn.marshelltap.com/no-avatar.png"}],t=Na(),i=di(),a=Pa(),n=ko(),o=Ao(),s=So(),h=it(),r=$(()=>a.platform&&(a.platform==="ios"||a.platform==="android")),l=$(()=>h.state.error.status),c=$(()=>h.state.preloader.status),f=$(()=>h.state.notifications),u=$(()=>h.state.modal),g=$(()=>h.state.preloader.status);Ct(()=>({preloaderStatus:g.value,errorAvailable:l.value,isMobile:r.value,currentPath:t.path,modalActive:u.value.active}),k=>{k.errorAvailable?n.setHeaderColor("#0d2928"):k.isMobile?k.modalActive?n.setHeaderColor(g.value?"#131f1c":"#000000"):n.setHeaderColor(g.value?"#1e1610":"#000000"):n.setHeaderColor("#000000"),!k.errorAvailable&&k.isMobile&&(k.modalActive||k.currentPath!=="/")?o.showBackButton():o.hideBackButton()}),o.onBackButtonClicked(async()=>{if(u.value.active)await h.dispatch("modal/setModalCloseAnimation",!0),setTimeout(async()=>{await h.dispatch("modal/setModalCloseAnimation",!1),await h.dispatch("modal/setModalActive")},200);else if(t.path!=="/")return i.back()});const p=ye(e.map(k=>({tag:k.tag,component:k.component,loaded:!1}))),v=ye(null);st("app-modals",{"edit-avatar":{button:ye()},"game-select-track":{button:ye()}}),st("app-images",p);const b=ye();st("app-notifications",{button:ye(),content:b});const w=$(()=>a.platform==="ios"?"34px":"15px"),_=$(()=>a.platform==="ios"?"34px":"20px"),y=$(()=>a.platform==="ios"?"34px":"25px");return En(()=>{s.expand(),s.disableVerticalSwipes()}),(k,C)=>{var A,E;return z(),Z("div",{class:S({[k.$style["main-container"]]:!0,[k.$style["main-is-landscape"]]:!((A=v.value)!=null&&A.isPortrait),[k.$style["main-is-full-width"]]:!r.value||!((E=v.value)!=null&&E.isPortrait)}),style:Bt({"--main-offset-bottom":w.value,"--modal-offset-bottom":_.value,"--more-offset-bottom":y.value})},[r.value?(z(),Z(It,{key:1},[U(Ou),l.value?Te("",!0):(z(),Z(It,{key:0},[c.value?c.value?(z(),Ee(ru,{key:1})):Te("",!0):(z(),Ee(j1,{key:0}))],64)),l.value?(z(),Ee(mu,{key:1})):Te("",!0),L("div",{class:S({[k.$style["game-notification"]]:!0}),ref_key:"appNotificationsContent",ref:b},[(z(!0),Z(It,null,gi(f.value.popup,M=>(z(),Ee(_u,{key:M.id,id:M.id,type:M.type,title:M.title,message:M.message},null,8,["id","type","title","message"]))),128))],2),U(Ru),U(Zu,{ref_key:"isRefPortrait",ref:v},null,512)],64)):(z(),Z("div",{key:0,class:S({[k.$style["not-mobile-device"]]:!0})},[L("div",{class:S({[k.$style.logo]:!0})},null,2),L("span",{class:S({[k.$style.text]:!0})},"Login is only allowed from mobile devices",2)],2))],6)}}},e0={$style:Qu},t0=Yn(Ju,[["__cssModules",e0]]),{tonConnectUI:i0,setOptions:a0}=wo({manifestUrl:"https://main.cdn.marshelltap.com/tonconnect-manifest.json"}),Ri=ye({auth:!1,temporary:!1}),Es=ye(!1),n0=d=>vo((e,{headers:t})=>{const i=d.user.auth_token;return{headers:{...t,token:i}}}),s0=n0(Ve.state).concat(mo({uri:"https://api.marshelltap.com/api/graphql"})),r0=new fo({link:s0,cache:new go}),bi=po({setup(){st(_o,r0)},render:()=>kn(t0)});bi.use(Ve);bi.use(Jr);bi.use(Eo);const xt=Io("https://api.marshelltap.com/",{autoConnect:!1,transports:["websocket"],reconnection:!0,reconnectionDelay:3*1e3,auth:{token:null}});xt.on("connect_error",async()=>{await Ve.dispatch("error/setError",{status:!0,title:"Error",description:"There was an error on our server side",button:{type:"success",name:"Refresh app",function:"reloadApp"}})});xt.on("game_error",async d=>{d.status||(d.status=!0),await Ve.dispatch("error/setError",d),d.is_multi&&!Es.value&&(Es.value=!0),d.connection_type&&Ri.value[d.connection_type]&&(Ri.value[d.connection_type]=!1)});xt.on("notification",async d=>{await Ve.dispatch("notifications/addItemNotificationsPopup",d)});Ct(()=>Ve.state.user.auth_token||Ve.state.user.temporary_auth_token,d=>{const e=d===Ve.state.user.temporary_auth_token;!e&&!Ri.value.auth?(xt.connected&&xt.disconnect(),xt.auth={token:d},xt.connect(),Ri.value.auth=!0):e&&!Ri.value.temporary&&(xt.connected&&xt.disconnect(),xt.auth={token:d},xt.connect(),Ri.value.temporary=!0)});bi.provide(xo,i0);bi.provide(Co,a0);bi.provide("socket-client",xt);bi.mount("#app");
